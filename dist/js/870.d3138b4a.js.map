{"version":3,"file":"js/870.d3138b4a.js","mappings":"+HAIA,MAAMA,EAAU,wBACVC,EAAWC,EAAAA,EAAMC,OAAO,CAC1BC,QAAS,IACTC,QAAS,MAIbJ,EAASK,aAAaC,QAAQC,KAC1BC,IAEIA,EAAOC,IAAMV,EAAUS,EAAOC,IAEvBD,KAEXE,GAEWC,QAAQC,OAAOF,KAM9B,K,oECzBIG,EAAwB,CAAE,KAAQ,CAAE,IAAO,MAAO,MAAS,CAAE,QAAW,gBAAiB,UAAa,SAAW,SAAY,CAAC,CAAE,IAAO,OAAQ,MAAS,CAAE,EAAK,wYAA4Y,KAAQ,iBAAkB,MAAS,YACllB,I,UCAA,SAASC,EAAcC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAAyB,MAAhBF,UAAUD,GAAaI,OAAOH,UAAUD,IAAM,CAAC,EAAOK,EAAUD,OAAOE,KAAKH,GAAqD,oBAAjCC,OAAOG,wBAAwCF,EAAUA,EAAQG,OAAOJ,OAAOG,sBAAsBJ,GAAQM,QAAO,SAAUC,GAAO,OAAON,OAAOO,yBAAyBR,EAAQO,GAAKE,UAAY,MAAOP,EAAQQ,SAAQ,SAAUC,GAAOC,EAAgBhB,EAAQe,EAAKX,EAAOW,GAAO,GAAI,CAAE,OAAOf,CAAQ,CAExe,SAASgB,EAAgBC,EAAKF,EAAKG,GAAiK,OAApJH,KAAOE,EAAOZ,OAAOc,eAAeF,EAAKF,EAAK,CAAEG,MAAOA,EAAOL,YAAY,EAAMO,cAAc,EAAMC,UAAU,IAAkBJ,EAAIF,GAAOG,EAAgBD,CAAK,CAOhN,IAAInB,EAAwB,SAA+BwB,EAAOC,GAChE,IAAIC,EAAIzB,EAAc,CAAC,EAAGuB,EAAOC,EAAQE,OAEzC,OAAOC,EAAAA,EAAAA,IAAaC,EAAAA,EAAU5B,EAAc,CAAC,EAAGyB,EAAG,CACjD,KAAQI,IACN,KACN,EAEA9B,EAAsB+B,YAAc,wBACpC/B,EAAsBgC,cAAe,EACrC,O,4OClBA,MAAMC,EAAeC,KAAMC,EAAAA,EAAAA,IAAa,mBAAmBD,EAAEA,KAAIE,EAAAA,EAAAA,MAAcF,GACzEG,EAAa,CACjBpB,IAAK,EACLqB,MAAO,CAAC,MAAQ,QAAQ,OAAS,UAE7BC,EAAa,CACjBtB,IAAK,EACLuB,MAAO,WAEHC,EAAa,CAAED,MAAO,gBACtBE,EAAa,CAAEF,MAAO,eACtBG,EAAa,CAAEL,MAAO,CAAC,MAAQ,MAAM,QAAU,OAAO,iBAAiB,MAAM,QAAU,gBACvFM,EAAa,CAAEN,MAAO,CAAC,cAAc,MAAM,QAAU,OAAO,kBAAkB,SAAS,cAAc,SAAS,YAAY,OAAO,MAAQ,SACzIO,EAAa,CACjB5B,IAAK,EACLqB,MAAO,CAAC,MAAQ,YAEZQ,EAAa,CAAER,MAAO,CAAC,QAAU,QACjCS,EAAa,CAAE9B,IAAK,GACpB+B,EAA4Bf,GAAa,KAAmBgB,EAAAA,EAAAA,GAAoB,IAAK,KAAM,MAAO,KAClGC,EAAc,CAAEZ,MAAO,CAAC,cAAc,QACtCa,EAAc,CAAC,WACfC,EAAc,CAAEd,MAAO,CAAC,QAAU,OAAO,iBAAiB,MAAM,kBAAkB,gBAAgB,cAAc,WAChHe,EAAc,CAAEb,MAAO,YACvBc,EAAc,CAAErC,IAAK,GACrBsC,EAA4BtB,GAAa,KAAmBgB,EAAAA,EAAAA,GAAoB,MAAO,CAAEX,MAAO,CAAC,aAAa,QAAU,UAAW,KACnIkB,EAAc,CAAC,OAiCrB,OAA4BC,EAAAA,EAAAA,IAAiB,CAC3CC,OAAQ,iBACRC,KAAAA,CAAMC,GCqIR,MAAMC,GAAgBC,EAAAA,EAAAA,IAA4B,CAChD,CAAE1C,MAAO,EAAG2C,MAAO,OACnB,CAAE3C,MAAO,EAAG2C,MAAO,OACnB,CAAE3C,MAAO,EAAG2C,MAAO,SAIfC,GAAaF,EAAAA,EAAAA,KAAa,GAchC,SAASG,EAAUC,GACjB,OAAO,IAAIpE,SAAQ,CAACqE,EAASpE,KAC3B,MAAMqE,EAAS,IAAIC,WACnBD,EAAOE,cAAcJ,GACrBE,EAAOG,OAAS,IAAMJ,EAAQC,EAAOI,QACrCJ,EAAOK,QAAU5E,GAASE,EAAOF,EAAM,GAE3C,CAEA,MAAM6E,GAAiBZ,EAAAA,EAAAA,KAAI,GACrBa,GAAeb,EAAAA,EAAAA,IAAI,IACnBc,GAAed,EAAAA,EAAAA,IAAI,IACnBe,EAAeA,KACnBC,QAAQC,IAAI,cACZC,EAAU5D,OAAQ,CAAI,EAGlB6D,EAAgBf,IACpBY,QAAQC,IAAI,SAAUb,EAAK,EAGvBgB,GAAWpB,EAAAA,EAAAA,IAAI,MACfqB,GAAWrB,EAAAA,EAAAA,IAA6B,IAGxCkB,GAAYlB,EAAAA,EAAAA,KAAI,GAChBsB,EAAeA,KACnBV,EAAetD,OAAQ,EACvBwD,EAAaxD,MAAQ,EAAE,EAEnBiE,EAAgBC,UACfpB,EAAKtE,KAAQsE,EAAKqB,UACrBrB,EAAKqB,cAAiBtB,EAAUC,EAAKsB,gBAEvCb,EAAavD,MAAQ8C,EAAKtE,KAAOsE,EAAKqB,QACtCb,EAAetD,OAAQ,EAEvBwD,EAAaxD,MAAQ8C,EAAKuB,MAAQvB,EAAKtE,IAAI8F,UAAUxB,EAAKtE,IAAI+F,YAAY,KAAO,EAAE,EAM/EC,EAAkBA,KACtB,MAAMC,EAAUC,SAASC,gBACrBF,EAAQG,kBACVH,EAAQG,oBACCH,EAAQI,qBACjBJ,EAAQI,uBACCJ,EAAQK,wBACjBL,EAAQK,0BACCL,EAAQM,qBACjBN,EAAQM,qB,EAKNC,EAAiBA,KACjBN,SAASM,eACXN,SAASM,iBACAN,SAASO,oBAClBP,SAASO,sBACAP,SAASQ,qBAClBR,SAASQ,uBACAR,SAASS,kBAClBT,SAASS,kB,EAQPC,EAAeA,CAACC,EAAeC,IAC5BA,EAAOtF,MAAMuF,cAAcC,QAAQH,EAAME,gBAAkB,EAE9DE,EAAS,CACbC,SAAU,CAAEC,KAAM,GAClBC,WAAY,CAAED,KAAM,KAEhBE,GAAUnD,EAAAA,EAAAA,KAAa,GACvBoD,GAAUpD,EAAAA,EAAAA,MACVqD,GAAYrD,EAAAA,EAAAA,IAAe,CAC/BsD,IAAK,GACLC,OAAQ,GACRC,SAAU,GACVC,UAAMC,EACNC,YAAQD,EACRE,QAAS,GACTC,YAAaC,MACbrC,aAASiC,EACTK,UAAML,IAGFM,GAASC,EAAAA,EAAAA,IAAgB,CAC7BvG,MAAO,CACLwG,OAAQ,CACNH,KAAMtH,OACN0H,UAAU,IAGdC,MAAAA,GACE,OAAOC,KAAKH,MACd,IAIF,MAAMI,IAAQtE,EAAAA,EAAAA,IAAS,IAEjBuE,IAAWvE,EAAAA,EAAAA,MACX2B,IAAO3B,EAAAA,EAAAA,MAEPwE,GAAUhD,UAGd,GAFAiD,EAAEC,iBACF1D,QAAQC,IAAI,WACPU,GAAKrE,MAIV,GAAIgH,GAAMhH,MAAMqH,SAAShD,GAAKrE,OAC5BsH,EAAAA,GAAQ7I,MAAM,SAAU,SAD1B,CAIAuI,GAAMhH,MAAMuH,KAAKlD,GAAKrE,OACtB,UACQwH,EAAAA,EAAcC,KAAK,WAAY,CAAEhB,KAAMpC,GAAKrE,O,CAClD,MAAOvB,GACP6I,EAAAA,GAAQ7I,MAAMA,EAAMiJ,SAASC,KAAKL,QAAS,KAC3C5D,QAAQC,IAAI,QAASlF,E,CAGvB4F,GAAKrE,MAAQ,GACb4H,YAAW,KACTX,GAASjH,OAAO6H,OAAO,GACtB,E,MAlBDP,EAAAA,GAAQ7I,MAAM,UAAW,IAkBtB,EAEDqJ,GAAgC,CACpC7B,OAAQ,CAAC,CAAEY,UAAU,EAAMS,QAAS,UAAWS,QAAS,WACxD7B,SAAU,CAAC,CAAEW,UAAU,EAAMS,QAAS,QAASS,QAAS,WACxDzB,QAAS,CAAC,CAAEO,UAAU,EAAMS,QAAS,WAAYS,QAAS,WAC1DxB,YAAa,CAAC,CAAEM,UAAU,EAAMS,QAAS,UAAWS,QAAS,WAC7D1B,OAAQ,CAAC,CAAEQ,UAAU,EAAMS,QAAS,QAASS,QAAS,WACtDtB,KAAM,CAAC,CAAEI,UAAU,EAAMS,QAAS,UAAWS,QAAS,WAEtD5B,KAAM,CAAC,CAAEU,UAAU,EAAMS,QAAS,WAAYS,QAAS,YA4CnDC,GAAaA,KACjBtE,QAAQC,IAAI,OACZmC,EAAQ9F,OAAOiI,WAAWC,MAAKhE,UAE7B,IAAIC,EAAoB,GACxBT,QAAQC,IAAI,OAAQI,EAAS/D,MAAO4D,EAAU5D,OAC9C,IAAK,IAAIjB,EAAI,EAAGA,EAAIgF,EAAS/D,OAAOf,OAAQF,IAAK,CAE/C,IAAIoJ,EAGAA,EAFAvE,EAAU5D,OACR,kBAAmB+D,EAAS/D,MAAMjB,SACvB8D,EAAUkB,EAAS/D,MAAMjB,GAAGqF,eAMpCL,EAAS/D,MAAMjB,GAAGP,IAI3BkF,QAAQC,IAAI,OAAQwE,GACpBhE,EAAQoD,KAAKY,E,CAEfzE,QAAQC,IAAI,UAAWQ,GACvB,IAAK,IAAIiE,EAAI,EAAGA,EAAIjE,EAAQlF,OAAQmJ,IAAK,CACvC,MAAMC,EAAelE,EAAQiE,GACvBE,EAAY,KACZC,EAAcC,KAAKC,KAAKJ,EAAapJ,OAASqJ,GACpD,IAAK,IAAIvJ,EAAI,EAAGA,EAAIwJ,EAAaxJ,IAAK,CACpC,MAAM2J,EAAQ3J,EAAIuJ,EACZK,EAAMH,KAAKI,IAAIF,EAAQJ,EAAWD,EAAapJ,QAC/C4J,EAAQR,EAAa/D,UAAUoE,EAAOC,GAE5CG,MAAM,YAAa,CACjBC,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CAAEN,QAAOO,MAAOrK,EAAGwJ,cAAac,SAAUjB,EAAI,EAAGnJ,OAAQkF,EAAQlF,OAAQqK,cAAc,K,EASlH5F,QAAQC,IAAI,OAAQQ,EAAS4B,EAAU/F,aACjCwH,EAAAA,EAAcC,KAAK,YAAa,CAAE8B,KAAMxD,EAAU/F,MAAOsJ,cAAc,IAAQpB,MAAMsB,IAKzF,GAJAC,GAAazJ,OAAQ,EACrBsH,EAAAA,GAAQoC,QAAQ,GAAG5F,EAAS9D,UAAW,KACvC4D,EAAU5D,OAAQ,EAClB0D,QAAQC,IAAI,MAAO6F,EAAKzD,EAAU/F,OAC9B+F,EAAU/F,MAAMgG,IAClB,IAAK,IAAIjH,EAAI,EAAGA,EAAI4K,GAAU3J,MAAMf,OAAQF,IACtC4K,GAAU3J,MAAMjB,GAAGiH,MAAQwD,EAAI7B,KAAK4B,KAAKvD,MAC3C2D,GAAU3J,MAAMjB,GAAK,CAAEc,IAAK2J,EAAI7B,KAAK4B,KAAKvD,OAAQwD,EAAI7B,KAAK4B,WAI1D,CACL,MAAMpB,GAAOzF,EAAAA,EAAAA,IAAc,CAAC,CAAE7C,IAAK2J,EAAI7B,KAAK4B,KAAKvD,OAAQwD,EAAI7B,KAAK4B,QAClEI,GAAU3J,MAAQmI,EAAKnI,MAAMT,OAAOoK,GAAU3J,M,CAEhD4J,IAAa,IAEZC,OAAMpL,IACPiF,QAAQC,IAAIlF,GACZ6I,EAAAA,GAAQ7I,MAAMA,EAAMiJ,SAASC,KAAKL,QAAS,IAAI,IAEjD5D,QAAQC,IAAI,QAASoC,EAAU/F,MAAM,IACpC6J,OAAMpL,IACPiF,QAAQC,IAAI,QAASlF,EAAM,GAC3B,EAIEmL,GAAc1F,UAClB,IACE,MAAM,KAAEyD,SAAeH,EAAAA,EAAcsC,IAAI,cACzCpG,QAAQC,IAAI,OAAQgE,GACpB,IAAIoC,EAAY,GAChB,IAAK,IAAIhL,EAAI,EAAGA,EAAI4I,EAAKqC,MAAM/K,OAAQF,IACrCgL,EAAUxC,KAAKI,EAAKqC,MAAMjL,GAAG0H,MAE/BO,GAAMhH,MAAQ,IAAI,IAAIiK,IAAIF,G,CAC1B,MAAOtL,GAEPiF,QAAQC,IAAIlF,E,GAUVyL,GAAahG,UACjBR,QAAQC,IAAI,MAAMwG,EAAAA,EAAAA,IAAMC,GAAMC,wBACxB7C,EAAAA,EAAcC,KAAK,eAAgB,CAAE6C,OAAOH,EAAAA,EAAAA,IAAMC,GAAMC,mBAAoBnC,MAAMsB,IACtF9F,QAAQC,IAAI,MAAO6F,GACfA,GACFlC,EAAAA,GAAQzB,QAAQ,UAAW,GAAKqC,MAAK,KACnCZ,EAAAA,GAAQoC,QAAQ,OAAQ,GACxB,IAAK,IAAI3K,EAAI,EAAGA,GAAIoL,EAAAA,EAAAA,IAAMC,GAAMC,iBAAiBpL,OAAQF,IACvD4K,GAAU3J,MAAQ2J,GAAU3J,MAAMR,QAAO+K,GAAQA,EAAK1K,OAAQsK,EAAAA,EAAAA,IAAMC,GAAMC,iBAAiBtL,KAE7FqL,GAAMC,gBAAkB,EAAE,G,GAG9B,EAEEG,GAAatG,UACjBR,QAAQC,IAAI,OAAQ8C,SAEde,EAAAA,EAAcC,KAAK,cAAe,CAAEhB,SAAQyB,MAAMsB,IACtD9F,QAAQC,IAAI,MAAO6F,GACfA,IACFlC,EAAAA,GAAQoC,QAAQ,OAAQ,GACxBE,K,GAEF,EAIEa,GAAWvG,UACfR,QAAQC,IAAI,MAAO9D,GACnB,UACQ2H,EAAAA,EAAcC,KAAK,cAAe,CAAEzB,IAAKnG,IAAOqI,MAAMsB,IAC1D9F,QAAQC,IAAI,MAAO6F,GACfA,GACFlC,EAAAA,GAAQzB,QAAQ,UAAW,GAAKqC,MAAK,KACnCZ,EAAAA,GAAQoC,QAAQ,OAAQ,GACxBC,GAAU3J,MAAQ2J,GAAU3J,MAAMR,QAAO+K,GAAQA,EAAK1K,MAAQA,GAAI,G,IAIxE,MAAOpB,GACP6I,EAAAA,GAAQ7I,MAAM,OAAQ,GACtBiF,QAAQC,IAAIlF,E,GAYViM,GAAmBC,IAEvBA,EAAQ/K,SAAQ,CAACuH,EAAGiC,KAClBuB,EAAQvB,GAAOwB,UAAY,YAAY,GACvC,EAGEC,GAAU,CACd,CACEC,MAAO,KACPC,UAAW,WACXlL,IAAK,WACLmL,sBAAsB,EACtBC,UAAU,EACVC,SAAUA,CAAClL,EAAOmL,IAAWA,EAAOjF,SAASkF,WAAW7F,cAAc8B,SAASrH,EAAMuF,eACrF8F,2BAA4BC,IACtBA,GACF1D,YAAW,KACT2D,GAAYvL,MAAM6H,OAAO,GACxB,I,EAGP2D,MAAO,UAET,CACEV,MAAO,KACPC,UAAW,SACXlL,IAAK,SACLoL,UAAU,EACVD,sBAAsB,EACtBE,SAAUA,CAAClL,EAAOmL,IAAWA,EAAOlF,OAAOmF,WAAW7F,cAAc8B,SAASrH,EAAMuF,eACnF8F,2BAA4BC,IACtBA,GACF1D,YAAW,KACT2D,GAAYvL,MAAM6H,OAAO,GACxB,I,EAIP2D,MAAO,UAET,CACEV,MAAO,KACPC,UAAW,OACXlL,IAAK,OACLmL,sBAAsB,EACtBE,SAAUA,CAAClL,EAAOmL,IAAWA,EAAO1E,KAAK2E,WAAW7F,cAAc8B,SAASrH,EAAMuF,eACjF8F,2BAA4BC,IACtBA,GACF1D,YAAW,KACT2D,GAAYvL,MAAM6H,OAAO,GACxB,I,EAGP2D,MAAO,UAET,CACEV,MAAO,OACPC,UAAW,cACXlL,IAAK,cACL4L,aAAcA,EAAGC,UACRlF,IAAMkF,GAAMC,OAAO,cAE5BH,MAAO,UAET,CACEV,MAAO,MACPC,UAAW,UACXlL,IAAK,UACL2L,MAAO,UAET,CACEV,MAAO,OACPC,UAAW,OACXlL,IAAK,OACL2L,MAAO,UAET,CACEV,MAAO,KACPC,UAAW,SACXlL,IAAK,SACL2L,MAAO,UAGT,CACEV,MAAO,KACPC,UAAW,SACXlL,IAAK,SACL2L,MAAO,WAGL7B,IAAYjH,EAAAA,EAAAA,IAAS,IAErB+G,IAAe/G,EAAAA,EAAAA,KAAa,GAC5BkJ,GAAcA,KAClBnC,GAAazJ,OAAQ,EACrB6L,IAAW,EAGPC,GAAWA,CAACX,EAAa1E,KAC7B,OAAQA,GACN,IAAK,OACHoF,KACAE,GAAaZ,GACbrH,EAAS9D,MAAQ,KACjByJ,GAAazJ,OAAQ,EACrB,MACF,IAAK,MACH6L,KACA/H,EAAS9D,MAAQ,KACjByJ,GAAazJ,OAAQ,EACrB,MACF,QACE0D,QAAQjF,MAAM,CAAEuN,IAAK,WAGzBtI,QAAQC,IAAI,SAAUwH,EAAO,EAIzBY,GAAgBZ,IAEpBpF,EAAU/F,MAAMgG,IAAMmF,EAAOtL,IAC7BkG,EAAU/F,MAAMiG,OAASkF,EAAOlF,OAChCF,EAAU/F,MAAMkG,SAAWiF,EAAOjF,SAClCH,EAAU/F,MAAMsG,QAAU6E,EAAO7E,QACjCP,EAAU/F,MAAMuG,YAAcC,IAAM2E,EAAO5E,aAC3CR,EAAU/F,MAAMqG,OAAS8E,EAAO9E,OAChCN,EAAU/F,MAAMyG,KAAO0E,EAAO1E,KAC9BV,EAAU/F,MAAMmG,KAAOgF,EAAOhF,KAC9BzC,QAAQC,IAAI,SAAUuF,KAAK+C,MAAMd,EAAOhH,UACxC+E,KAAK+C,MAAMd,EAAOhH,QAAQ+H,QAAQ,KAAM,MAAMC,KAAK5B,IACjDxG,EAAS/D,OAAOuH,KAAK,CACnB6E,IAAK7B,EACLlG,KAAMkG,EACNlE,OAAQ,OACR7H,IAAK+L,GACL,GACF,EAMEsB,GAAYA,KAChB9F,EAAU/F,MAAMgG,IAAM,GACtBD,EAAU/F,MAAMiG,OAAS,GACzBF,EAAU/F,MAAMkG,SAAW,GAC3BH,EAAU/F,MAAMsG,QAAU,GAC1BP,EAAU/F,MAAMuG,YAAcC,MAC9BT,EAAU/F,MAAMqG,YAASD,EACzBL,EAAU/F,MAAMyG,UAAOL,EACvBL,EAAU/F,MAAMmG,UAAOC,EACvBL,EAAU/F,MAAMmE,aAAUiC,EAC1BrC,EAAS/D,MAAQ,EAAE,GAKrBqM,EAAAA,EAAAA,KAAcnI,UACZ,IACEtB,EAAW5C,OAAQ,QACbwH,EAAAA,EAAcsC,IAAI,cAAc5B,MAAMsB,IAC1C,GAAIA,EACF,IAAK,IAAIzK,EAAI,EAAGA,EAAIyK,EAAI7B,KAAK2C,MAAMrL,OAAQF,IACzC4K,GAAU3J,MAAMuH,KAAK,CAAE1H,IAAK2J,EAAI7B,KAAK2C,MAAMvL,GAAGiH,OAAQwD,EAAI7B,KAAK2C,MAAMvL,I,IAGxEuN,SAAQ,KACT1C,KACA/D,EAAQ7F,OAAQ,EAChB4C,EAAW5C,OAAQ,CAAK,G,CAE1B,MAAOvB,GACPiF,QAAQC,IAAIlF,E,KAKhB,MAAM8N,GAASrI,UACb,IACEtB,EAAW5C,OAAQ,QACbwH,EAAAA,EAAcC,KAAK,cAAcS,MAAMsB,IAC3C,GAAIA,EAAK,CACP,IAAK,IAAIzK,EAAI,EAAGA,EAAIyK,EAAI7B,KAAK2C,MAAMrL,OAAQF,IACzC4K,GAAU3J,MAAMuH,KAAK,CAAE1H,IAAK2J,EAAI7B,KAAK2C,MAAMvL,GAAGiH,OAAQwD,EAAI7B,KAAK2C,MAAMvL,KAEvE6K,I,KAED0C,SAAQ,KACT1J,EAAW5C,OAAQ,CAAK,G,CAG1B,MAAOvB,GACPiF,QAAQC,IAAIlF,E,GAIV+N,GAAUA,KACd,IACE3G,EAAQ7F,OAAQ,EAChB4H,YAAW1D,UACTyF,GAAU3J,MAAQ,GAClB,MAAM,KAAE2H,SAAeH,EAAAA,EAAcsC,IAAI,cACzC,IAAK,IAAI/K,EAAI,EAAGA,EAAI4I,EAAK2C,MAAMrL,OAAQF,IACrC4K,GAAU3J,MAAMuH,KAAK,CAAE1H,IAAK8H,EAAK2C,MAAMvL,GAAGiH,OAAQ2B,EAAK2C,MAAMvL,KAE/D6K,KACA/D,EAAQ7F,OAAQ,CAAK,GACpB,I,CAEH,MAAOvB,GACPiF,QAAQC,IAAIlF,E,GAKV2L,IAAQqC,EAAAA,EAAAA,IAAS,CACrBC,WAAY,GACZC,eAAgB,GAChBtC,gBAAiB,KAGbkB,IAAc7I,EAAAA,EAAAA,MAIdkK,GAAeA,CAACC,EAAcC,EAAS/B,KAC3C+B,IACA1C,GAAMsC,WAAaG,EAAa,GAChCzC,GAAMuC,eAAiB5B,CAAS,EAG5BgC,GAAcC,IAClBA,EAAa,CAAEF,SAAS,IACxB1C,GAAMsC,WAAa,EAAE,EAGjBO,GAAkB5C,IACtB3G,QAAQC,IAAI,4BAA6B0G,GACzCD,GAAMC,gBAAkBA,CAAe,EAKnC6C,IAAcC,EAAAA,EAAAA,KAAS,IAAM/C,GAAMC,gBAAgBpL,OAAS,ID9IlE,MAAO,CAACmO,EAAUC,KAChB,MAAMC,GAAsBC,EAAAA,EAAAA,IAAkB,YACxCC,GAAqBD,EAAAA,EAAAA,IAAkB,WACvCE,GAA0BF,EAAAA,EAAAA,IAAkB,gBAC5CG,GAAmBH,EAAAA,EAAAA,IAAkB,SACrCI,GAAqBJ,EAAAA,EAAAA,IAAkB,WACvCK,IAAyBL,EAAAA,EAAAA,IAAkB,eAC3CM,IAA2BN,EAAAA,EAAAA,IAAkB,iBAC7CO,IAAuBP,EAAAA,EAAAA,IAAkB,aACzCQ,IAAqBR,EAAAA,EAAAA,IAAkB,WACvCS,IAAsBT,EAAAA,EAAAA,IAAkB,YACxCU,IAAsBV,EAAAA,EAAAA,IAAkB,YACxCW,IAAqBX,EAAAA,EAAAA,IAAkB,WACvCY,IAAoBZ,EAAAA,EAAAA,IAAkB,UACtCa,IAA4Bb,EAAAA,EAAAA,IAAkB,kBAC9Cc,IAAkCd,EAAAA,EAAAA,IAAkB,wBAE1D,OAAQ3K,EAAW5C,QACdsO,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAOtN,EAAY,EACpDT,EAAAA,EAAAA,IAAagO,EAAAA,EAAY,CAAEtN,MAAO,CAAC,QAAU,OAAO,kBAAkB,SAAS,cAAc,iBAE9FoN,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAOpN,EAAY,EACpDX,EAAAA,EAAAA,IAAaiO,EAAAA,EAAS,CACpBC,kBAAmBlK,EACnBmK,iBAAkB3J,EAClB4J,SAAUrC,MAEZ1K,EAAAA,EAAAA,GAAoB,MAAOR,EAAY,EACrCb,EAAAA,EAAAA,IAAaqO,EAAAA,EAAS,CAAErQ,IAAK,uBAC7BqD,EAAAA,EAAAA,GAAoB,MAAOP,EAAY,EACrCO,EAAAA,EAAAA,GAAoB,MAAON,EAAY,EACrCf,EAAAA,EAAAA,IAAa8M,EAAqB,CAChC7G,KAAM,UACNvF,MAAO,CAAC,MAAQ,OAAO,cAAc,OACrC4N,QAASzB,EAAO,KAAOA,EAAO,GAAM0B,GAAiBjD,GAAS,CAAC,EAAG,SACjE,CACDkD,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBC,EAAAA,EAAAA,IAAiB,SAEnBC,EAAG,KAEL3O,EAAAA,EAAAA,IAAa8M,EAAqB,CAChC7G,KAAM,UACNvF,MAAO,CAAC,cAAc,OACtBkO,UAAWlC,GAAYlN,MACvB8O,QAAS5E,IACR,CACD8E,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBC,EAAAA,EAAAA,IAAiB,aAEnBC,EAAG,GACF,EAAG,CAAC,cACPtN,EAAAA,EAAAA,GAAoB,OAAQL,EAAY,CACrC0L,GAAYlN,QACRsO,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoBc,EAAAA,GAAW,CAAExP,IAAK,GAAK,EACxDqP,EAAAA,EAAAA,KAAiBI,EAAAA,EAAAA,IAAiB,OAAOlF,GAAMC,gBAAgBpL,YAAa,IAC3E,MACHsQ,EAAAA,EAAAA,IAAoB,IAAI,QAGhC/O,EAAAA,EAAAA,IAAamN,EAAoB,CAC/BzM,MAAO,CAAC,gBAAgB,OACxB,gBAAiB,CACrBmJ,gBAAiBD,GAAMC,gBAAiBmF,SAAUvC,IAE9C,cAAetD,GAAU3J,MACzB6K,QAASA,GACT4E,OAAQ,CAAEC,EAAG,KACbC,WAAY,CAAEC,kBAAkB,EAAMC,SAAU,IAChDnF,gBAAiBA,GACjB7E,QAASA,EAAQ7F,OAChB,CACD8P,YAAYb,EAAAA,EAAAA,KAAS,EAAGc,YAAa,CACnB,aAAfA,EAAOlQ,MACHyO,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,OAAQ9M,GAAY6N,EAAAA,EAAAA,IAAiBS,EAAOjF,OAAQ,KACvFyE,EAAAA,EAAAA,IAAoB,IAAI,MAE9BvE,sBAAsBiE,EAAAA,EAAAA,KAAS,EAAGe,kBAAiBnD,eAAcC,UAASE,eAAc+C,YAAa,EACnGlO,EAAAA,EAAAA,GAAoB,MAAOH,EAAY,EACrClB,EAAAA,EAAAA,IAAagN,EAAoB,CAC/ByC,QAAS,cACTvN,IAAK6I,GACL2E,YAAa,UAAUH,EAAOhF,YAC9B/K,MAAO6M,EAAa,GACpB3L,MAAO,CAAC,MAAQ,QAAQ,gBAAgB,MAAM,QAAU,SACxDsO,SAAUrI,GAAK6I,EAAgB7I,EAAErI,OAAOkB,MAAQ,CAACmH,EAAErI,OAAOkB,OAAS,IACnEmQ,aAAepB,GAAiBnC,GAAaC,EAAcC,EAASiD,EAAOhF,YAC1E,KAAM,EAAG,CAAC,cAAe,QAAS,WAAY,kBACjDvK,EAAAA,EAAAA,IAAa8M,EAAqB,CAChC7G,KAAM,UACN2J,KAAM,QACNlP,MAAO,CAAC,MAAQ,OAAO,eAAe,OACtC4N,QAAUC,GAAiBnC,GAAaC,EAAcC,EAASiD,EAAOhF,YACrE,CACDsF,MAAMpB,EAAAA,EAAAA,KAAS,IAAM,EACnBzO,EAAAA,EAAAA,KAAa8P,EAAAA,EAAAA,IAAOC,EAAAA,OAEtBvB,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBC,EAAAA,EAAAA,IAAiB,WAEnBC,EAAG,GACF,KAAM,CAAC,aACV3O,EAAAA,EAAAA,IAAa8M,EAAqB,CAChC8C,KAAM,QACNlP,MAAO,CAAC,MAAQ,QAChB4N,QAAUC,GAAiBhC,GAAYC,IACtC,CACDgC,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBC,EAAAA,EAAAA,IAAiB,WAEnBC,EAAG,GACF,KAAM,CAAC,iBAGdqB,kBAAkBvB,EAAAA,EAAAA,KAAS,EAAGwB,cAAe,EAC3CjQ,EAAAA,EAAAA,KAAa8P,EAAAA,EAAAA,IAAOC,EAAAA,GAAiB,CACnCrP,OAAOwP,EAAAA,EAAAA,IAAgB,CAAEC,MAAOF,EAAW,eAAYrK,EAAWwK,SAAU,WAAYC,MAAO,KAC9F,KAAM,EAAG,CAAC,aAEfC,UAAU7B,EAAAA,EAAAA,KAAS,EAAGvD,OAAMqE,SAAQ5E,YAAa,CAC9Cf,GAAMsC,YAActC,GAAMuC,iBAAmBoD,EAAOhF,YAChDuD,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,OAAQ5M,EAAY,GACpD2M,EAAAA,EAAAA,KAAW,IAAOC,EAAAA,EAAAA,IAAoBc,EAAAA,GAAW,MAAM0B,EAAAA,EAAAA,IAAYrF,EACzEN,WACA4F,MAAM,IAAIC,OAAO,OAAO7G,GAAMsC,kBAAkBtC,GAAMsC,cAAe,OAAO,CAACwE,EAAUnS,MACxEuP,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoBc,EAAAA,GAAW,KAAM,CACxD6B,EAAS3L,gBAAkB6E,GAAMsC,WAAWnH,gBACxC+I,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,OAAQ,CACzC1O,IAAKd,EACLqC,MAAO,cACNkO,EAAAA,EAAAA,IAAiB4B,GAAW,MAC9B5C,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoBc,EAAAA,GAAW,CAAExP,IAAK,GAAK,EACxDqP,EAAAA,EAAAA,KAAiBI,EAAAA,EAAAA,IAAiB4B,GAAW,IAC5C,MACN,OACD,SAEU,WAAfnB,EAAOlQ,MACLyO,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoBc,EAAAA,GAAW,CAAExP,IAAK,GAAK,CACvD8J,GAAU3J,MAAMf,SACZqP,EAAAA,EAAAA,OAAc6C,EAAAA,EAAAA,IAAa1D,EAAyB,CACnD5N,IAAK,EACLiL,MAAO,QACPsG,OAAQ,KACRC,WAAY,KACZC,UAAYvC,GAAiBtE,GAASU,EAAOtL,MAC5C,CACDmP,SAASC,EAAAA,EAAAA,KAAS,IAAM,CACtBrN,KAEFuN,EAAG,GACF,KAAM,CAAC,gBACVI,EAAAA,EAAAA,IAAoB,IAAI,IAC5B1N,EAAAA,EAAAA,GAAoB,OAAQC,EAAa,EACvCD,EAAAA,EAAAA,GAAoB,IAAK,CACvBiN,QAAUC,GAAiBjD,GAASX,EAAQ,SAC3C,KAAM,EAAGpJ,MAEb,KACa,WAAfgO,EAAOlQ,MACLyO,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoBc,EAAAA,GAAW,CAAExP,IAAK,GAAK,CACrC,IAAlBsL,EAAO9E,SACHiI,EAAAA,EAAAA,OAAc6C,EAAAA,EAAAA,IAAazD,EAAkB,CAC5C7N,IAAK,EACL8Q,MAAO,SACN,CACD3B,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBC,EAAAA,EAAAA,IAAiB,UAEnBC,EAAG,KAEc,IAAlBhE,EAAO9E,SACLiI,EAAAA,EAAAA,OAAc6C,EAAAA,EAAAA,IAAazD,EAAkB,CAC5C7N,IAAK,EACL8Q,MAAO,SACN,CACD3B,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBC,EAAAA,EAAAA,IAAiB,UAEnBC,EAAG,KAEc,IAAlBhE,EAAO9E,SACLiI,EAAAA,EAAAA,OAAc6C,EAAAA,EAAAA,IAAazD,EAAkB,CAAE7N,IAAK,GAAK,CACxDmP,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBC,EAAAA,EAAAA,IAAiB,UAEnBC,EAAG,MAELI,EAAAA,EAAAA,IAAoB,IAAI,IAC/B,MACHA,EAAAA,EAAAA,IAAoB,IAAI,MAElCJ,EAAG,GACF,EAAG,CAAC,gBAAiB,cAAe,aACvC3O,EAAAA,EAAAA,IAAa0N,GAAoB,CAC/BqD,KAAM9H,GAAazJ,MACnB8K,MAAO,SACP0G,SAAU,GACVC,SAAU7F,IACT,CACD8F,QAAQzC,EAAAA,EAAAA,KAAS,IAAM,EACrBzO,EAAAA,EAAAA,IAAa8M,EAAqB,CAAEwB,QAASlD,IAAe,CAC1DoD,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBC,EAAAA,EAAAA,IAAiB,SAEnBC,EAAG,KAEL3O,EAAAA,EAAAA,IAAa8M,EAAqB,CAChC7G,KAAM,UACNqI,QAAS9G,IACR,CACDgH,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBC,EAAAA,EAAAA,IAAiB,SAEnBC,EAAG,OAGPH,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBzO,EAAAA,EAAAA,IAAa2N,IAAmBwD,EAAAA,EAAAA,IAAY,CAC1C1B,QAAS,UACTvN,IAAKoD,EACLzB,KAAM,oBACNuN,WAAY,OACZC,MAAO9L,EAAU/F,MACjB8H,MAAOA,IACNrC,GAAS,CACVuJ,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBzO,EAAAA,EAAAA,IAAaoN,GAAwB,CACnCjL,MAAO,KACP0B,KAAM,WACNwC,SAAU,IACT,CACDmI,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBzO,EAAAA,EAAAA,IAAagN,EAAoB,CAC/BxN,MAAO+F,EAAU/F,MAAMkG,SACvB,iBAAkBmH,EAAO,KAAOA,EAAO,GAAM0B,GAAkBhJ,EAAU/F,MAAMkG,SAAY6I,GAC3FtI,KAAM,OACNqL,aAAc,OACb,KAAM,EAAG,CAAC,aAEf3C,EAAG,KAEL3O,EAAAA,EAAAA,IAAaoN,GAAwB,CACnCjL,MAAO,KACP0B,KAAM,UACL,CACD2K,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBzO,EAAAA,EAAAA,IAAagN,EAAoB,CAC/BxN,MAAO+F,EAAU/F,MAAMiG,OACvB,iBAAkBoH,EAAO,KAAOA,EAAO,GAAM0B,GAAkBhJ,EAAU/F,MAAMiG,OAAU8I,GACzFtI,KAAM,OACNqL,aAAc,OACb,KAAM,EAAG,CAAC,aAEf3C,EAAG,KAEL3O,EAAAA,EAAAA,IAAaoN,GAAwB,CACnCjL,MAAO,OACP0B,KAAM,eACL,CACD2K,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBzO,EAAAA,EAAAA,IAAaqN,GAA0B,CACrC7N,MAAO+F,EAAU/F,MAAMuG,YACvB,iBAAkB8G,EAAO,KAAOA,EAAO,GAAM0B,GAAkBhJ,EAAU/F,MAAMuG,YAAewI,IAC7F,KAAM,EAAG,CAAC,aAEfI,EAAG,KAEL3O,EAAAA,EAAAA,IAAaoN,GAAwB,CACnCjL,MAAO,KACP0B,KAAM,QACL,CACD2K,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBzO,EAAAA,EAAAA,IAAawN,GAAqB,CAChChO,MAAO+F,EAAU/F,MAAMyG,KACvB,iBAAkB4G,EAAO,KAAOA,EAAO,GAAM0B,GAAkBhJ,EAAU/F,MAAMyG,KAAQsI,GACvF,cAAe,GACfmB,YAAa,SACb,gBAAiB9K,EACjBlE,MAAO,CAAC,MAAQ,SAChB6Q,QAAS/K,GAAMhH,MAAMmM,KAAI5B,IAAQ,CAAGvK,MAAOuK,MAC3CyH,YAAY,EACZC,KAAK,GACJ,CACDC,gBAAgBjD,EAAAA,EAAAA,KAAS,EAAGkD,SAAUC,KAAW,EAC/C5R,EAAAA,EAAAA,KAAa8P,EAAAA,EAAAA,IAAO5J,GAAS,CAAEE,OAAQwL,GAAQ,KAAM,EAAG,CAAC,YACzD5R,EAAAA,EAAAA,IAAasN,GAAsB,CAAE5M,MAAO,CAAC,OAAS,YACtDV,EAAAA,EAAAA,IAAauN,GAAoB,CAAE7M,MAAO,CAAC,QAAU,YAAc,CACjE8N,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBzO,EAAAA,EAAAA,IAAagN,EAAoB,CAC/ByC,QAAS,WACTvN,IAAKuE,GACLjH,MAAOqE,GAAKrE,MACZ,iBAAkBqN,EAAO,KAAOA,EAAO,GAAM0B,GAAkB1K,GAAMrE,MAAQ+O,GAC7EmB,YAAa,UACZ,KAAM,EAAG,CAAC,WACb1P,EAAAA,EAAAA,IAAa8M,EAAqB,CAChC7G,KAAM,OACNqI,QAAS5H,IACR,CACDmJ,MAAMpB,EAAAA,EAAAA,KAAS,IAAM,EACnBzO,EAAAA,EAAAA,KAAa8P,EAAAA,EAAAA,IAAO+B,EAAAA,OAEtBrD,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBC,EAAAA,EAAAA,IAAiB,aAEnBC,EAAG,OAGPA,EAAG,OAGP7J,QAAQ2J,EAAAA,EAAAA,KAAS,EAAGjP,WAAY,EAC9B6B,EAAAA,EAAAA,GAAoB,MAAOG,EAAa,EACtCH,EAAAA,EAAAA,GAAoB,OAAQ,MAAMyN,EAAAA,EAAAA,IAAiBtP,GAAQ,IAC3D6B,EAAAA,EAAAA,GAAoB,MAAO,CACzBiN,QAASzB,EAAO,KAAOA,EAAO,IAAKiF,EAAAA,EAAAA,KAAe,QAAU,CAAC,WAC5D,EACD9R,EAAAA,EAAAA,KAAa8P,EAAAA,EAAAA,IAAOiC,EAAAA,GAAsB,CACxCzD,QAAUC,GAAiBvE,GAAWxK,IACrC,KAAM,EAAG,CAAC,mBAInBmP,EAAG,GACF,EAAG,CAAC,QAAS,eAElBA,EAAG,KAEL3O,EAAAA,EAAAA,IAAaoN,GAAwB,CACnCjL,MAAO,KACP0B,KAAM,WACL,CACD2K,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBpN,EAAAA,EAAAA,GAAoB,MAAOI,EAAa,EACtCzB,EAAAA,EAAAA,IAAayN,GAAqB,CAChC,YAAalK,EAAS/D,MACtB,oBAAqBqN,EAAO,KAAOA,EAAO,GAAM0B,GAAkBhL,EAAU/D,MAAQ+O,GACpFyD,SAAU3O,EACV2L,SAAU/L,EACVgP,OAAQ,UACR,YAAa,eACbC,UAAWzO,GACV,CACD+K,SAASC,EAAAA,EAAAA,KAAS,IAAM,CACrBlL,EAAS/D,MAAMf,OAAS,IACpBqP,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAOrM,EAAa,EACrD1B,EAAAA,EAAAA,KAAa8P,EAAAA,EAAAA,IAAO+B,EAAAA,IACpBlQ,MAEFoN,EAAAA,EAAAA,IAAoB,IAAI,MAE9BJ,EAAG,GACF,EAAG,CAAC,eACP3O,EAAAA,EAAAA,IAAa0N,GAAoB,CAC/BqD,KAAMjO,EAAetD,MACrB8K,MAAOtH,EAAaxD,MACpB0R,OAAQ,KACRD,SAAUzN,GACT,CACDgL,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBpN,EAAAA,EAAAA,GAAoB,MAAO,CACzB8Q,IAAK,UACLzR,MAAO,CAAC,MAAQ,QAChB0R,IAAKrP,EAAavD,OACjB,KAAM,EAAGoC,MAEd+M,EAAG,GACF,EAAG,CAAC,OAAQ,eAGnBA,EAAG,KAEL3O,EAAAA,EAAAA,IAAaoN,GAAwB,CACnCjL,MAAO,KACP0B,KAAM,UACL,CACD2K,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBzO,EAAAA,EAAAA,IAAawN,GAAqB,CAChChO,MAAO+F,EAAU/F,MAAMqG,OACvB,iBAAkBgH,EAAO,KAAOA,EAAO,GAAM0B,GAAkBhJ,EAAU/F,MAAMqG,OAAU0I,GACzFmB,YAAa,UACb6B,QAAStP,EAAczC,OACtB,KAAM,EAAG,CAAC,QAAS,eAExBmP,EAAG,KAEL3O,EAAAA,EAAAA,IAAaoN,GAAwB,CACnCjL,MAAO,MACP0B,KAAM,WACL,CACD2K,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBzO,EAAAA,EAAAA,IAAagN,EAAoB,CAC/BxN,MAAO+F,EAAU/F,MAAMsG,QACvB,iBAAkB+G,EAAO,KAAOA,EAAO,GAAM0B,GAAkBhJ,EAAU/F,MAAMsG,QAAWyI,GAC1FtI,KAAM,OACNqL,aAAc,OACb,KAAM,EAAG,CAAC,aAEf3C,EAAG,KAEL3O,EAAAA,EAAAA,IAAaoN,GAAwB,CACnCjL,MAAO,OACP0B,KAAM,QACL,CACD2K,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBzO,EAAAA,EAAAA,IAAagN,EAAoB,CAC/BxN,MAAO+F,EAAU/F,MAAMmG,KACvB,iBAAkBkH,EAAO,MAAQA,EAAO,IAAO0B,GAAkBhJ,EAAU/F,MAAMmG,KAAQ4I,GACzFtI,KAAM,OACNqL,aAAc,OACb,KAAM,EAAG,CAAC,aAEf3C,EAAG,OAGPA,EAAG,GACF,GAAI,CAAC,aAEVA,EAAG,GACF,EAAG,CAAC,cAGX3O,EAAAA,EAAAA,IAAa6N,GAAiC,CAC5CtG,QAAS,QACTtB,KAAM,UACNvF,MAAO,CAAE2P,MAAO,QAASgC,OAAQ,SAChC,CACDxC,MAAMpB,EAAAA,EAAAA,KAAS,IAAM,EACnBzO,EAAAA,EAAAA,KAAa8P,EAAAA,EAAAA,IAAO1R,EAAAA,OAEtBoQ,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBzO,EAAAA,EAAAA,IAAa4N,GAA2B,CAAEU,QAAStC,IAAW,CAC5D6D,MAAMpB,EAAAA,EAAAA,KAAS,IAAM,EACnBzO,EAAAA,EAAAA,KAAa8P,EAAAA,EAAAA,IAAOwC,EAAAA,OAEtB3D,EAAG,OAGPA,EAAG,MAEJ,CAET,I,QE3kCA,MAAM4D,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O,s2JCLA,MACM9R,EAAa,CAAEG,MAAO,WACtBD,EAAa,CAAC,OACdE,EAAa,CAAEH,MAAO,CAAC,cAAc,QAgB3C,OAA4BmB,EAAAA,EAAAA,IAAiB,CAC3CC,OAAQ,UACRlC,MAAO,CACL5B,IAAK,CACDiI,KAAMuM,OACNC,SAAS,IAGf1Q,KAAAA,CAAMC,GCXR,MAAMpC,EAAQoC,EAaRwE,GAAQtE,EAAAA,EAAAA,IAAY,CACtB,CACIwQ,GAAI,EACJxH,KAAM,OACNlN,IAAK,kBACL2U,UAAU,EACVC,MAAOC,GAEX,CACIH,GAAI,EACJxH,KAAM,OACNlN,IAAK,oBACL2U,UAAU,EACVC,MAAOE,GAEX,CACIJ,GAAI,EACJxH,KAAM,OACNlN,IAAK,cACL2U,UAAU,EACVC,MAAOG,GAEX,CACIL,GAAI,EACJxH,KAAM,OACNlN,IAAK,gBACL2U,UAAU,EACVC,MAAOI,GAEX,CACIN,GAAI,EACJxH,KAAM,OACNlN,IAAK,gBACL2U,UAAU,EACVC,MAAOK,KDcf,OCXApH,EAAAA,EAAAA,KAAc,KACVrF,EAAMhH,MAAMJ,SAAQ2K,IACZA,EAAK/L,MAAQ4B,EAAM5B,MACnB+L,EAAK4I,UAAW,E,GAEtB,IDMC,CAAC/F,EAAUC,KAChB,MAAMqG,GAAyBnG,EAAAA,EAAAA,IAAkB,eAEjD,OAAQe,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAOtN,EAAY,GAC1DqN,EAAAA,EAAAA,KAAW,IAAOC,EAAAA,EAAAA,IAAoBc,EAAAA,GAAW,MAAM0B,EAAAA,EAAAA,IAAY/J,EAAMhH,OAAO,CAACuK,EAAMnB,MAC9EkF,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,CAC/CnN,OAAOuS,EAAAA,EAAAA,IAAgB,CAAC,WAAY,CAAER,SAAU5I,EAAK4I,YACrDtT,IAAKuJ,GACJ,EACD5I,EAAAA,EAAAA,IAAakT,EAAwB,CACnCE,GAAIrJ,EAAK/L,KACR,CACDwQ,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBpN,EAAAA,EAAAA,GAAoB,MAAO,CACzBT,OAAOuS,EAAAA,EAAAA,IAAgB,CAAC,QAAS,CAAEE,aAActJ,EAAK4I,aACrD,EACDtR,EAAAA,EAAAA,GAAoB,MAAO,CACzB+Q,IAAKrI,EAAK6I,OACT,KAAM,EAAGjS,IACZU,EAAAA,EAAAA,GAAoB,OAAQR,GAAYiO,EAAAA,EAAAA,IAAiB/E,EAAKmB,MAAO,IACpE,MAELyD,EAAG,GACF,KAAM,CAAC,QACT,MACD,OACJ,CAEJ,I,QEtGA,MAAM4D,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O,sKCDA,MAAMlS,EAAeC,KAAMC,EAAAA,EAAAA,IAAa,mBAAmBD,EAAEA,KAAIE,EAAAA,EAAAA,MAAcF,GACzEG,EAAa,CACjBG,MAAO,UACPF,MAAO,CAAC,SAAW,aAEfC,EAA2BN,GAAa,KAAmBgB,EAAAA,EAAAA,GAAoB,MAAO,CAAET,MAAO,QAAU,EAChGS,EAAAA,EAAAA,GAAoB,MAAO,CAAE+Q,IAAKkB,MAC7C,KACEzS,EAAa,CAAED,MAAO,aACtBE,EAAa,CAAEF,MAAO,UACtBG,EAAa,CAAC,OACdC,EAAa,CACjB3B,IAAK,EACL+S,IAAKmB,GAEDtS,EAA2BZ,GAAa,KAAmBgB,EAAAA,EAAAA,GAAoB,MAAO,CAC1FX,MAAO,CAAC,MAAQ,OAAO,OAAS,QAChC0R,IAAKoB,GACJ,MAAO,KACJtS,EAAa,CACjBD,GAiBF,OAA4BY,EAAAA,EAAAA,IAAiB,CAC3CC,OAAQ,UACR2R,MAAO,CAAC,kBAAmB,iBAAkB,UAC7C1R,KAAAA,CAAMC,GAAW0R,KAAMC,ICnBzB,MAAMF,EAAQE,EAMd,IAAIC,GAAe1R,EAAAA,EAAAA,KAAa,GAIhC,MAAM2R,GAAQC,EAAAA,EAAAA,MACR9P,EAAkBA,KACtByP,EAAM,mBACNG,EAAapU,OAAQ,CAAI,EAGrBgF,EAAiBA,KACrBiP,EAAM,kBACNG,EAAapU,OAAQ,CAAK,EAEtBuM,EAASA,KACb0H,EAAM,SAAS,EAGXM,EAASA,KACbjN,EAAAA,GAAQzB,QAAQ,UAAW,GAAKqC,MAAK,KACnCsM,aAAaC,WAAW,QACxBJ,EAAMK,OAAO,SAAS,GACtB,EDqBJ,MAAO,CAACtH,EAAUC,MACRiB,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAOtN,EAAY,CAC3DE,GACAU,EAAAA,EAAAA,GAAoB,MAAOR,EAAY,EACrCb,EAAAA,EAAAA,KAAa8P,EAAAA,EAAAA,IAAOwC,EAAAA,GAAe,CACjChE,QAASvC,EACTrL,MAAO,CAACyT,SAAS,OAAOC,YAAY,UAEpCtE,EAAAA,EAAAA,IAAO8D,KAMJ9F,EAAAA,EAAAA,OAAc6C,EAAAA,EAAAA,KAAab,EAAAA,EAAAA,IAAOuE,EAAAA,GAAyB,CAC1DhV,IAAK,EACLqB,MAAO,CAACyT,SAAS,OAAOC,YAAY,OACpC9F,QAAS9J,OARVsJ,EAAAA,EAAAA,OAAc6C,EAAAA,EAAAA,KAAab,EAAAA,EAAAA,IAAOwE,EAAAA,GAAqB,CACtDjV,IAAK,EACLqB,MAAO,CAACyT,SAAS,OAAOC,YAAY,OACpC9F,QAAStK,MAOf3C,EAAAA,EAAAA,GAAoB,MAAOP,EAAY,EACpCgP,EAAAA,EAAAA,IAAO+D,GAAOjK,MAAM2K,KAAKC,SACrB1G,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO,CACxC1O,IAAK,EACL+S,KAAKtC,EAAAA,EAAAA,IAAO+D,GAAOjK,MAAM2K,KAAKC,QAC7B,KAAM,EAAGzT,MACX+M,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO/M,KAC9CK,EAAAA,EAAAA,GAAoB,OAAQ,MAAMyN,EAAAA,EAAAA,KAAiBgB,EAAAA,EAAAA,IAAO+D,GAAOjK,MAAM2K,KAAKE,UAAW,MAEzFpT,EAAAA,EAAAA,GAAoB,MAAO,CACzBT,MAAO,WACP0N,QAASyF,GACR7S,OAIT,I,QE1GA,MAAMqR,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://biyeshiji/./src/axiosInstance.ts","webpack://biyeshiji/./node_modules/@ant-design/icons-svg/es/asn/UnorderedListOutlined.js","webpack://biyeshiji/./node_modules/@ant-design/icons-vue/es/icons/UnorderedListOutlined.js","webpack://biyeshiji/./src/views/admin/BookManagement.vue?d663","webpack://biyeshiji/./src/views/admin/BookManagement.vue","webpack://biyeshiji/./src/views/admin/BookManagement.vue?5051","webpack://biyeshiji/./src/views/admin/components/SideBar.vue?df45","webpack://biyeshiji/./src/views/admin/components/SideBar.vue","webpack://biyeshiji/./src/views/admin/components/SideBar.vue?ab5a","webpack://biyeshiji/./src/views/admin/components/TopMenu.vue?cac3","webpack://biyeshiji/./src/views/admin/components/TopMenu.vue","webpack://biyeshiji/./src/views/admin/components/TopMenu.vue?997d"],"sourcesContent":["// src/axiosInstance.js\r\nimport axios from 'axios';\r\n\r\n// 创建一个axios实例\r\nconst headUrl = 'http://localhost:3000'\r\nconst instance = axios.create({\r\n    baseURL: '/', // 你的API基础URL\r\n    timeout: 1000, // 请求超时时间\r\n});\r\n\r\n// 请求拦截器\r\ninstance.interceptors.request.use(\r\n    config => {\r\n\r\n        config.url = headUrl + config.url;\r\n\r\n        return config;\r\n    },\r\n    error => {\r\n        // 对请求错误做些什么\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\n\r\n\r\nexport default instance;\r\n","// This icon file is generated automatically.\nvar UnorderedListOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z\" } }] }, \"name\": \"unordered-list\", \"theme\": \"outlined\" };\nexport default UnorderedListOutlined;\n","import { createVNode as _createVNode } from \"vue\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport UnorderedListOutlinedSvg from \"@ant-design/icons-svg/es/asn/UnorderedListOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar UnorderedListOutlined = function UnorderedListOutlined(props, context) {\n  var p = _objectSpread({}, props, context.attrs);\n\n  return _createVNode(AntdIcon, _objectSpread({}, p, {\n    \"icon\": UnorderedListOutlinedSvg\n  }), null);\n};\n\nUnorderedListOutlined.displayName = 'UnorderedListOutlined';\nUnorderedListOutlined.inheritAttrs = false;\nexport default UnorderedListOutlined;","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, toDisplayString as _toDisplayString, Fragment as _Fragment, createElementVNode as _createElementVNode, unref as _unref, normalizeStyle as _normalizeStyle, renderList as _renderList, createBlock as _createBlock, withModifiers as _withModifiers, mergeProps as _mergeProps, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-03d9c796\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  key: 0,\n  style: {\"width\":\"100vw\",\"height\":\"100vh\"}\n}\nconst _hoisted_2 = {\n  key: 1,\n  class: \"content\"\n}\nconst _hoisted_3 = { class: \"main-content\" }\nconst _hoisted_4 = { class: \"books-table\" }\nconst _hoisted_5 = { style: {\"width\":\"20%\",\"display\":\"flex\",\"flex-direction\":\"row\",\"padding\":\"6px 0 0 6px\"} }\nconst _hoisted_6 = { style: {\"margin-left\":\"8px\",\"display\":\"flex\",\"justify-content\":\"center\",\"align-items\":\"center\",\"font-size\":\"12px\",\"color\":\"gray\"} }\nconst _hoisted_7 = {\n  key: 0,\n  style: {\"color\":\"#1890ff\"}\n}\nconst _hoisted_8 = { style: {\"padding\":\"8px\"} }\nconst _hoisted_9 = { key: 0 }\nconst _hoisted_10 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"a\", null, \"下架\", -1))\nconst _hoisted_11 = { style: {\"margin-left\":\"5px\"} }\nconst _hoisted_12 = [\"onClick\"]\nconst _hoisted_13 = { style: {\"display\":\"flex\",\"flex-direction\":\"row\",\"justify-content\":\"space-between\",\"align-items\":\"center\"} }\nconst _hoisted_14 = { class: \"clearfix\" }\nconst _hoisted_15 = { key: 0 }\nconst _hoisted_16 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { style: {\"margin-top\":\"8px\"} }, \"Upload\", -1))\nconst _hoisted_17 = [\"src\"]\n\nimport { ref, reactive, onBeforeMount, computed, defineComponent, toRaw } from 'vue';\r\nimport axiosInstance from '../../axiosInstance';\r\nimport dayjs from 'dayjs'\r\nimport SideBar from './components/SideBar.vue';\r\nimport TopMenu from './components/TopMenu.vue';\r\nimport { SearchOutlined } from '@ant-design/icons-vue';\r\nimport { message, type FormInstance } from 'ant-design-vue';\r\n\r\nimport type { Rule } from 'ant-design-vue/es/form';\r\nimport { PlusOutlined, CloseCircleOutlined, UnorderedListOutlined, RedoOutlined } from '@ant-design/icons-vue';\r\nimport ReloadPage from '../../components/reloadPage.vue'\r\nimport type { Dayjs } from 'dayjs';\r\nimport type { SelectProps } from 'ant-design-vue';\r\n\r\nimport type { UploadProps } from 'ant-design-vue';\r\n\r\n\r\ninterface FormState {\r\n  _id: string;\r\n  author: string;\r\n  bookname: string;\r\n  isbn: number | undefined;\r\n  status: number | undefined;\r\n  publish: string;\r\n  publishtime: Dayjs | undefined;\r\n  preview: string | undefined;\r\n  type: string | undefined;\r\n}\r\n\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'BookManagement',\n  setup(__props) {\n\r\nconst statusOptions = ref<SelectProps['options']>([\r\n  { value: 1, label: '已借出' },\r\n  { value: 2, label: '不可用' },\r\n  { value: 0, label: '可借阅' },\r\n]);\r\n\r\n\r\nconst reloadPage = ref<boolean>(false)\r\nfunction getBase64(file: File) {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => resolve(reader.result);\r\n    reader.onerror = error => reject(error);\r\n  });\r\n}\r\n\r\nconst previewVisible = ref(false);\r\nconst previewImage = ref('');\r\nconst previewTitle = ref('');\r\nconst uploadChange = () => {\r\n  console.log('has upload')\r\n  hasUpload.value = true\r\n}\r\n\r\nconst removeChange = (file: any) => {\r\n  console.log('remove', file)\r\n\r\n}\r\nconst formType = ref('编辑')\r\nconst fileList = ref<UploadProps['fileList']>([\r\n\r\n]);\r\nconst hasUpload = ref(false)\r\nconst handleCancel = () => {\r\n  previewVisible.value = false;\r\n  previewTitle.value = '';\r\n};\r\nconst handlePreview = async (file: UploadProps['fileList'][number]) => {\r\n  if (!file.url && !file.preview) {\r\n    file.preview = (await getBase64(file.originFileObj)) as string;\r\n  }\r\n  previewImage.value = file.url || file.preview;\r\n  previewVisible.value = true;\r\n\r\n  previewTitle.value = file.name || file.url.substring(file.url.lastIndexOf('/') + 1);\r\n};\r\n\r\n\r\n\r\n\r\nconst enterFullscreen = () => {\r\n  const element = document.documentElement; // 全屏元素，这里使用整个文档根元素\r\n  if (element.requestFullscreen) {\r\n    element.requestFullscreen();\r\n  } else if (element.mozRequestFullScreen) { // Firefox\r\n    element.mozRequestFullScreen();\r\n  } else if (element.webkitRequestFullscreen) { // Chrome, Safari and Opera\r\n    element.webkitRequestFullscreen();\r\n  } else if (element.msRequestFullscreen) { // IE/Edge\r\n    element.msRequestFullscreen();\r\n  }\r\n\r\n}\r\n\r\nconst exitFullscreen = () => {\r\n  if (document.exitFullscreen) {\r\n    document.exitFullscreen();\r\n  } else if (document.mozCancelFullScreen) { // Firefox\r\n    document.mozCancelFullScreen();\r\n  } else if (document.webkitExitFullscreen) { // Chrome, Safari and Opera\r\n    document.webkitExitFullscreen();\r\n  } else if (document.msExitFullscreen) { // IE/Edge\r\n    document.msExitFullscreen();\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\n\r\nconst filterOption = (input: string, option: any) => {\r\n  return option.value.toLowerCase().indexOf(input.toLowerCase()) >= 0;\r\n};\r\nconst layout = {\r\n  labelCol: { span: 4 },\r\n  wrapperCol: { span: 14 },\r\n};\r\nconst loading = ref<boolean>(true)\r\nconst formRef = ref<FormInstance>();\r\nconst formState = ref<FormState>({\r\n  _id: '',\r\n  author: '',\r\n  bookname: '',\r\n  isbn: undefined,\r\n  status: undefined,\r\n  publish: '',\r\n  publishtime: dayjs(),\r\n  preview: undefined,\r\n  type: undefined\r\n});\r\n\r\nconst VNodes = defineComponent({\r\n  props: {\r\n    vnodes: {\r\n      type: Object,\r\n      required: true,\r\n    },\r\n  },\r\n  render() {\r\n    return this.vnodes;\r\n  },\r\n});\r\n\r\nlet index = 0;\r\nconst items = ref<any>([]);\r\n\r\nconst inputRef = ref();\r\nconst name = ref();\r\n\r\nconst addItem = async (e: any) => {\r\n  e.preventDefault();\r\n  console.log('addItem');\r\n  if (!name.value) {\r\n    message.error('请输入分类名称', 1.5)\r\n    return\r\n  }\r\n  if (items.value.includes(name.value)) {\r\n    message.error('该分类已存在', 1.5)\r\n    return\r\n  }\r\n  items.value.push(name.value);\r\n  try {\r\n    await axiosInstance.post('/addtype', { type: name.value })\r\n  } catch (error) {\r\n    message.error(error.response.data.message, 1.5)\r\n    console.log('error', error)\r\n  }\r\n\r\n  name.value = '';\r\n  setTimeout(() => {\r\n    inputRef.value?.focus();\r\n  }, 0);\r\n};\r\nconst rules: Record<string, Rule[]> = {\r\n  author: [{ required: true, message: '请输入作者名称', trigger: 'change' }],\r\n  bookname: [{ required: true, message: '请输入书名', trigger: 'change' }],\r\n  publish: [{ required: true, message: '请输入出版社名称', trigger: 'change' }],\r\n  publishtime: [{ required: true, message: '请选择发布时间', trigger: 'change' }],\r\n  status: [{ required: true, message: '请选择状态', trigger: 'change' }],\r\n  type: [{ required: true, message: '请选择图书类型', trigger: 'change' }],\r\n  // preview: [{ required: true, message: '请上传预览目录图片', trigger: 'change' }],\r\n  isbn: [{ required: true, message: '请输入ISBN号', trigger: 'change' }],\r\n};\r\n\r\n// let blobs: any[] = []\r\n\r\n\r\n// for (let i = 0; i < preview.length; i++) {\r\n//   const base64Data = preview[i].split(\",\")[1]\r\n//   const contentType = ((preview[i].split(\",\")[0]).split(\":\")[1]).split(\";\")[0]\r\n//   blobs.push(base64ToBlob(base64Data, contentType))\r\n// }\r\n\r\n// const formData = new FormData();\r\n// blobs.forEach((blob, index) => {\r\n//   formData.append(`image${index + 1}`, blob, `image${index + 1}.jpg`);\r\n// });\r\n\r\n// await instance.post('/editbook', formData)\r\n// .then(res=> {\r\n//   {\r\n//   modalVisible.value = false\r\n//   message.success('编辑成功', 1.5)\r\n//   console.log('res', res, formState.value)\r\n//   if (formState.value._id) {\r\n//     for (let i = 0; i < tableData.value.length; i++) {\r\n//       if (tableData.value[i]._id === res.data.book._id) {\r\n//         tableData.value[i] = { key: res.data.book._id, ...res.data.book };\r\n\r\n//       }\r\n//     }\r\n//   } else {\r\n//     const temp = ref<string[]>([{ key: res.data.book._id, ...res.data.book }])\r\n//     tableData.value = temp.value.concat(tableData.value)\r\n//     // tableData.value.unshift(res.data.book)\r\n\r\n//   }\r\n//   updateTypes()\r\n\r\n// }\r\n// })\r\n// .catch(error => {\r\n//   console.log(error)\r\n//   message.error('编辑错误', 1.5)\r\n// });\r\nconst updateForm = () => {\r\n  console.log('点击了')\r\n  formRef.value?.validate().then(async () => {\r\n\r\n    let preview: string[] = []\r\n    console.log('aaaa', fileList.value, hasUpload.value)\r\n    for (let i = 0; i < fileList.value?.length; i++) {\r\n\r\n      let temp: any\r\n      if (hasUpload.value) {\r\n        if ('originFileObj' in fileList.value[i]) {\r\n          temp = await getBase64(fileList.value[i].originFileObj)\r\n        } else {\r\n          temp = fileList.value[i].url\r\n        }\r\n\r\n      } else {\r\n        temp = fileList.value[i].url\r\n      }\r\n\r\n\r\n      console.log('temp', temp)\r\n      preview.push(temp)\r\n    }\r\n    console.log('preview', preview)\r\n    for (let j = 0; j < preview.length; j++) {\r\n      const base64String = preview[j];\r\n      const chunkSize = 1024 * 8; // 每个块的大小\r\n      const totalChunks = Math.ceil(base64String.length / chunkSize);\r\n      for (let i = 0; i < totalChunks; i++) {\r\n        const start = i * chunkSize;\r\n        const end = Math.min(start + chunkSize, base64String.length);\r\n        const chunk = base64String.substring(start, end);\r\n        // 发送分块数据到后端\r\n        fetch('/editbook', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify({ chunk, index: i, totalChunks, listSign: j + 1, length: preview.length, isUploadDone: false }),\r\n        });\r\n      }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    console.log('点击了1', preview, formState.value)\r\n    await axiosInstance.post('/editbook', { book: formState.value, isUploadDone: true }).then((res) => {\r\n      modalVisible.value = false\r\n      message.success(`${formType.value}成功`, 1.5)\r\n      hasUpload.value = false\r\n      console.log('res', res, formState.value)\r\n      if (formState.value._id) {\r\n        for (let i = 0; i < tableData.value.length; i++) {\r\n          if (tableData.value[i]._id === res.data.book._id) {\r\n            tableData.value[i] = { key: res.data.book._id, ...res.data.book };\r\n\r\n          }\r\n        }\r\n      } else {\r\n        const temp = ref<string[]>([{ key: res.data.book._id, ...res.data.book }])\r\n        tableData.value = temp.value.concat(tableData.value)\r\n      }\r\n      updateTypes()\r\n\r\n    }).catch(error => {\r\n      console.log(error)\r\n      message.error(error.response.data.message, 1.5)\r\n    })\r\n    console.log('value', formState.value)\r\n  }).catch(error => {\r\n    console.log('error', error);\r\n  })\r\n}\r\n\r\n\r\nconst updateTypes = async () => {\r\n  try {\r\n    const { data } = await axiosInstance.get('/showtypes')\r\n    console.log('data', data)\r\n    let tempTypes = []\r\n    for (let i = 0; i < data.types.length; i++) {\r\n      tempTypes.push(data.types[i].type)\r\n    }\r\n    items.value = [...new Set(tempTypes)]\r\n  } catch (error) {\r\n\r\n    console.log(error)\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst deleteMany = async () => {\r\n  console.log('添加', toRaw(state.selectedRowKeys))\r\n  await axiosInstance.post('/deletebooks', { books: toRaw(state.selectedRowKeys) }).then((res) => {\r\n    console.log('res', res)\r\n    if (res) {\r\n      message.loading('loading', 1.0).then(() => {\r\n        message.success('删除成功', 1.0)\r\n        for (let i = 0; i < toRaw(state.selectedRowKeys).length; i++) {\r\n          tableData.value = tableData.value.filter(item => item.key !== toRaw(state.selectedRowKeys)[i]);\r\n        }\r\n        state.selectedRowKeys = []\r\n      })\r\n    }\r\n  })\r\n}\r\nconst deleteType = async (type: string) => {\r\n  console.log('type', type)\r\n\r\n  await axiosInstance.post('/deletetype', { type }).then((res) => {\r\n    console.log('res', res)\r\n    if (res) {\r\n      message.success('删除成功', 1.0)\r\n      updateTypes()\r\n    }\r\n  })\r\n\r\n}\r\n\r\nconst onDelete = async (key: string) => {\r\n  console.log('key', key)\r\n  try {\r\n    await axiosInstance.post('/deletebook', { _id: key }).then((res) => {\r\n      console.log('res', res)\r\n      if (res) {\r\n        message.loading('loading', 1.0).then(() => {\r\n          message.success('下架成功', 1.0)\r\n          tableData.value = tableData.value.filter(item => item.key !== key);\r\n        })\r\n      }\r\n    })\r\n  } catch (error) {\r\n    message.error('下架失败', 1.0)\r\n    console.log(error)\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst customHeaderRow = (conlumn) => {\r\n  // 在这里可以在控制台看到有一个className ，如下图\r\n  conlumn.forEach((e, index) => {\r\n    conlumn[index].className = 'tableClass' // 给数组中的每一列加上一个类名\r\n  })\r\n}\r\n\r\nconst columns = [\r\n  {\r\n    title: '书名',\r\n    dataIndex: 'bookname',\r\n    key: 'bookname',\r\n    customFilterDropdown: true,\r\n    ellipsis: true,\r\n    onFilter: (value, record) => record.bookname.toString().toLowerCase().includes(value.toLowerCase()),\r\n    onFilterDropdownOpenChange: visible => {\r\n      if (visible) {\r\n        setTimeout(() => {\r\n          searchInput.value.focus();\r\n        }, 100);\r\n      }\r\n    },\r\n    align: 'center'\r\n  },\r\n  {\r\n    title: '作者',\r\n    dataIndex: 'author',\r\n    key: 'author',\r\n    ellipsis: true,\r\n    customFilterDropdown: true,\r\n    onFilter: (value, record) => record.author.toString().toLowerCase().includes(value.toLowerCase()),\r\n    onFilterDropdownOpenChange: visible => {\r\n      if (visible) {\r\n        setTimeout(() => {\r\n          searchInput.value.focus();\r\n        }, 100);\r\n      }\r\n    },\r\n\r\n    align: 'center'\r\n  },\r\n  {\r\n    title: '分类',\r\n    dataIndex: 'type',\r\n    key: 'type',\r\n    customFilterDropdown: true,\r\n    onFilter: (value, record) => record.type.toString().toLowerCase().includes(value.toLowerCase()),\r\n    onFilterDropdownOpenChange: visible => {\r\n      if (visible) {\r\n        setTimeout(() => {\r\n          searchInput.value.focus();\r\n        }, 100);\r\n      }\r\n    },\r\n    align: 'center'\r\n  },\r\n  {\r\n    title: '发布时间',\r\n    dataIndex: 'publishtime',\r\n    key: 'publishtime',\r\n    customRender: ({ text }) => {\r\n      return dayjs(text).format('YYYY-MM-DD')\r\n    },\r\n    align: 'center'\r\n  },\r\n  {\r\n    title: '出版社',\r\n    dataIndex: 'publish',\r\n    key: 'publish',\r\n    align: 'center'\r\n  },\r\n  {\r\n    title: 'ISBN',\r\n    dataIndex: 'isbn',\r\n    key: 'isbn',\r\n    align: 'center'\r\n  },\r\n  {\r\n    title: '状态',\r\n    dataIndex: 'status',\r\n    key: 'status',\r\n    align: 'center',\r\n\r\n  },\r\n  {\r\n    title: '操作',\r\n    dataIndex: 'action',\r\n    key: 'action',\r\n    align: 'center'\r\n  }\r\n]\r\nconst tableData = ref<any>([])\r\n\r\nconst modalVisible = ref<boolean>(false);\r\nconst cancelModal = () => {\r\n  modalVisible.value = false\r\n  resetForm()\r\n\r\n};\r\nconst editForm = (record: any, type: string) => {\r\n  switch (type) {\r\n    case 'edit':\r\n      resetForm()\r\n      initFormData(record)\r\n      formType.value = '编辑'\r\n      modalVisible.value = true\r\n      break;\r\n    case 'add':\r\n      resetForm()\r\n      formType.value = '添加'\r\n      modalVisible.value = true\r\n      break;\r\n    default:\r\n      console.error({ msg: '未知提交类型' })\r\n  }\r\n\r\n  console.log('record', record)\r\n\r\n}\r\n\r\nconst initFormData = (record: any) => {\r\n\r\n  formState.value._id = record.key\r\n  formState.value.author = record.author\r\n  formState.value.bookname = record.bookname\r\n  formState.value.publish = record.publish\r\n  formState.value.publishtime = dayjs(record.publishtime)\r\n  formState.value.status = record.status\r\n  formState.value.type = record.type\r\n  formState.value.isbn = record.isbn\r\n  console.log('length', JSON.parse(record.preview))\r\n  JSON.parse(record.preview.replace(/'/g, '\"')).map((item: string) => {\r\n    fileList.value?.push({\r\n      uid: item,\r\n      name: item,\r\n      status: 'done',\r\n      url: item\r\n    })\r\n  })\r\n\r\n\r\n\r\n\r\n}\r\nconst resetForm = () => {\r\n  formState.value._id = ''\r\n  formState.value.author = ''\r\n  formState.value.bookname = ''\r\n  formState.value.publish = ''\r\n  formState.value.publishtime = dayjs()\r\n  formState.value.status = undefined\r\n  formState.value.type = undefined\r\n  formState.value.isbn = undefined\r\n  formState.value.preview = undefined\r\n  fileList.value = []\r\n}\r\n\r\n\r\n\r\nonBeforeMount(async () => {\r\n  try {\r\n    reloadPage.value = true\r\n    await axiosInstance.get('/showbooks').then((res) => {\r\n      if (res) {\r\n        for (let i = 0; i < res.data.books.length; i++) {\r\n          tableData.value.push({ key: res.data.books[i]._id, ...res.data.books[i] });\r\n        }\r\n      }\r\n    }).finally(() => {\r\n      updateTypes()\r\n      loading.value = false\r\n      reloadPage.value = false\r\n    })\r\n  } catch (error) {\r\n    console.log(error)\r\n  }\r\n})\r\n\r\n\r\nconst reload = async () => {\r\n  try {\r\n    reloadPage.value = true\r\n    await axiosInstance.post('/showbooks').then((res) => {\r\n      if (res) {\r\n        for (let i = 0; i < res.data.books.length; i++) {\r\n          tableData.value.push({ key: res.data.books[i]._id, ...res.data.books[i] });\r\n        }\r\n        updateTypes()\r\n      }\r\n    }).finally(() => {\r\n      reloadPage.value = false\r\n    })\r\n\r\n  } catch (error) {\r\n    console.log(error)\r\n  }\r\n}\r\n\r\nconst refresh = () => {\r\n  try {\r\n    loading.value = true\r\n    setTimeout(async () => {\r\n      tableData.value = []\r\n      const { data } = await axiosInstance.get('/showbooks')\r\n      for (let i = 0; i < data.books.length; i++) {\r\n        tableData.value.push({ key: data.books[i]._id, ...data.books[i] });\r\n      }\r\n      updateTypes()\r\n      loading.value = false\r\n    }, 1000)\r\n\r\n  } catch (error) {\r\n    console.log(error)\r\n  }\r\n}\r\n\r\n\r\nconst state = reactive({\r\n  searchText: '',\r\n  searchedColumn: '',\r\n  selectedRowKeys: [],\r\n});\r\n\r\nconst searchInput = ref();\r\n\r\n\r\n\r\nconst handleSearch = (selectedKeys, confirm, dataIndex) => {\r\n  confirm();\r\n  state.searchText = selectedKeys[0];\r\n  state.searchedColumn = dataIndex;\r\n};\r\n\r\nconst handleReset = clearFilters => {\r\n  clearFilters({ confirm: true });\r\n  state.searchText = '';\r\n};\r\n\r\nconst onSelectChange = (selectedRowKeys) => {\r\n  console.log('selectedRowKeys changed: ', selectedRowKeys);\r\n  state.selectedRowKeys = selectedRowKeys;\r\n};\r\n\r\n\r\n\r\nconst hasSelected = computed(() => state.selectedRowKeys.length > 0);\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_a_button = _resolveComponent(\"a-button\")!\n  const _component_a_input = _resolveComponent(\"a-input\")!\n  const _component_a_popconfirm = _resolveComponent(\"a-popconfirm\")!\n  const _component_a_tag = _resolveComponent(\"a-tag\")!\n  const _component_a_table = _resolveComponent(\"a-table\")!\n  const _component_a_form_item = _resolveComponent(\"a-form-item\")!\n  const _component_a_date_picker = _resolveComponent(\"a-date-picker\")!\n  const _component_a_divider = _resolveComponent(\"a-divider\")!\n  const _component_a_space = _resolveComponent(\"a-space\")!\n  const _component_a_select = _resolveComponent(\"a-select\")!\n  const _component_a_upload = _resolveComponent(\"a-upload\")!\n  const _component_a_modal = _resolveComponent(\"a-modal\")!\n  const _component_a_form = _resolveComponent(\"a-form\")!\n  const _component_a_float_button = _resolveComponent(\"a-float-button\")!\n  const _component_a_float_button_group = _resolveComponent(\"a-float-button-group\")!\n\n  return (reloadPage.value)\n    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        _createVNode(ReloadPage, { style: {\"display\":\"flex\",\"justify-content\":\"center\",\"align-items\":\"center\"} })\n      ]))\n    : (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n        _createVNode(TopMenu, {\n          onEnterFullscreen: enterFullscreen,\n          onExitFullscreen: exitFullscreen,\n          onReload: reload\n        }),\n        _createElementVNode(\"div\", _hoisted_3, [\n          _createVNode(SideBar, { url: '/admin/bookmanage' }),\n          _createElementVNode(\"div\", _hoisted_4, [\n            _createElementVNode(\"div\", _hoisted_5, [\n              _createVNode(_component_a_button, {\n                type: \"primary\",\n                style: {\"width\":\"65px\",\"margin-left\":\"7px\"},\n                onClick: _cache[0] || (_cache[0] = ($event: any) => (editForm({}, 'add')))\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(\"添加\")\n                ]),\n                _: 1\n              }),\n              _createVNode(_component_a_button, {\n                type: \"primary\",\n                style: {\"margin-left\":\"7px\"},\n                disabled: !hasSelected.value,\n                onClick: deleteMany\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(\" 批量删除 \")\n                ]),\n                _: 1\n              }, 8, [\"disabled\"]),\n              _createElementVNode(\"span\", _hoisted_6, [\n                (hasSelected.value)\n                  ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                      _createTextVNode(_toDisplayString(`选择了 ${state.selectedRowKeys.length} 项`), 1)\n                    ], 64))\n                  : _createCommentVNode(\"\", true)\n              ])\n            ]),\n            _createVNode(_component_a_table, {\n              style: {\"border-radius\":\"8px\"},\n              \"row-selection\": {\r\n          selectedRowKeys: state.selectedRowKeys, onChange: onSelectChange\r\n        },\n              \"data-source\": tableData.value,\n              columns: columns,\n              scroll: { y: 680 },\n              pagination: { hideOnSinglePage: true, pageSize: 50 },\n              customHeaderRow: customHeaderRow,\n              loading: loading.value\n            }, {\n              headerCell: _withCtx(({ column }) => [\n                (column.key === 'bookname')\n                  ? (_openBlock(), _createElementBlock(\"span\", _hoisted_7, _toDisplayString(column.title), 1))\n                  : _createCommentVNode(\"\", true)\n              ]),\n              customFilterDropdown: _withCtx(({ setSelectedKeys, selectedKeys, confirm, clearFilters, column }) => [\n                _createElementVNode(\"div\", _hoisted_8, [\n                  _createVNode(_component_a_input, {\n                    ref_key: \"searchInput\",\n                    ref: searchInput,\n                    placeholder: `Search ${column.dataIndex}`,\n                    value: selectedKeys[0],\n                    style: {\"width\":\"188px\",\"margin-bottom\":\"8px\",\"display\":\"block\"},\n                    onChange: e => setSelectedKeys(e.target.value ? [e.target.value] : []),\n                    onPressEnter: ($event: any) => (handleSearch(selectedKeys, confirm, column.dataIndex))\n                  }, null, 8, [\"placeholder\", \"value\", \"onChange\", \"onPressEnter\"]),\n                  _createVNode(_component_a_button, {\n                    type: \"primary\",\n                    size: \"small\",\n                    style: {\"width\":\"90px\",\"margin-right\":\"8px\"},\n                    onClick: ($event: any) => (handleSearch(selectedKeys, confirm, column.dataIndex))\n                  }, {\n                    icon: _withCtx(() => [\n                      _createVNode(_unref(SearchOutlined))\n                    ]),\n                    default: _withCtx(() => [\n                      _createTextVNode(\" 搜索 \")\n                    ]),\n                    _: 2\n                  }, 1032, [\"onClick\"]),\n                  _createVNode(_component_a_button, {\n                    size: \"small\",\n                    style: {\"width\":\"90px\"},\n                    onClick: ($event: any) => (handleReset(clearFilters))\n                  }, {\n                    default: _withCtx(() => [\n                      _createTextVNode(\" 清空 \")\n                    ]),\n                    _: 2\n                  }, 1032, [\"onClick\"])\n                ])\n              ]),\n              customFilterIcon: _withCtx(({ filtered }) => [\n                _createVNode(_unref(SearchOutlined), {\n                  style: _normalizeStyle({ color: filtered ? '#108ee9' : undefined, position: 'absolute', right: 0 })\n                }, null, 8, [\"style\"])\n              ]),\n              bodyCell: _withCtx(({ text, column, record }) => [\n                (state.searchText && state.searchedColumn === column.dataIndex)\n                  ? (_openBlock(), _createElementBlock(\"span\", _hoisted_9, [\n                      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(text\r\n                .toString()\r\n                .split(new RegExp(`(?<=${state.searchText})|(?=${state.searchText})`, 'i')), (fragment, i) => {\n                        return (_openBlock(), _createElementBlock(_Fragment, null, [\n                          (fragment.toLowerCase() === state.searchText.toLowerCase())\n                            ? (_openBlock(), _createElementBlock(\"mark\", {\n                                key: i,\n                                class: \"highlight\"\n                              }, _toDisplayString(fragment), 1))\n                            : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                _createTextVNode(_toDisplayString(fragment), 1)\n                              ], 64))\n                        ], 64))\n                      }), 256))\n                    ]))\n                  : (column.key === 'action')\n                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                        (tableData.value.length)\n                          ? (_openBlock(), _createBlock(_component_a_popconfirm, {\n                              key: 0,\n                              title: \"确认删除？\",\n                              okText: \"确认\",\n                              cancelText: \"取消\",\n                              onConfirm: ($event: any) => (onDelete(record.key))\n                            }, {\n                              default: _withCtx(() => [\n                                _hoisted_10\n                              ]),\n                              _: 2\n                            }, 1032, [\"onConfirm\"]))\n                          : _createCommentVNode(\"\", true),\n                        _createElementVNode(\"span\", _hoisted_11, [\n                          _createElementVNode(\"a\", {\n                            onClick: ($event: any) => (editForm(record, 'edit'))\n                          }, \"编辑\", 8, _hoisted_12)\n                        ])\n                      ], 64))\n                    : (column.key === 'status')\n                      ? (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                          (record.status === 0)\n                            ? (_openBlock(), _createBlock(_component_a_tag, {\n                                key: 0,\n                                color: \"green\"\n                              }, {\n                                default: _withCtx(() => [\n                                  _createTextVNode(\"可借阅\")\n                                ]),\n                                _: 1\n                              }))\n                            : (record.status === 1)\n                              ? (_openBlock(), _createBlock(_component_a_tag, {\n                                  key: 1,\n                                  color: \"error\"\n                                }, {\n                                  default: _withCtx(() => [\n                                    _createTextVNode(\"已借出\")\n                                  ]),\n                                  _: 1\n                                }))\n                              : (record.status === 2)\n                                ? (_openBlock(), _createBlock(_component_a_tag, { key: 2 }, {\n                                    default: _withCtx(() => [\n                                      _createTextVNode(\"不可用\")\n                                    ]),\n                                    _: 1\n                                  }))\n                                : _createCommentVNode(\"\", true)\n                        ], 64))\n                      : _createCommentVNode(\"\", true)\n              ]),\n              _: 1\n            }, 8, [\"row-selection\", \"data-source\", \"loading\"]),\n            _createVNode(_component_a_modal, {\n              open: modalVisible.value,\n              title: \"编辑图书信息\",\n              centered: \"\",\n              onCancel: cancelModal\n            }, {\n              footer: _withCtx(() => [\n                _createVNode(_component_a_button, { onClick: cancelModal }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(\"取消\")\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_a_button, {\n                  type: \"primary\",\n                  onClick: updateForm\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(\"保存\")\n                  ]),\n                  _: 1\n                })\n              ]),\n              default: _withCtx(() => [\n                _createVNode(_component_a_form, _mergeProps({\n                  ref_key: \"formRef\",\n                  ref: formRef,\n                  name: \"custom-validation\",\n                  labelAlign: \"left\",\n                  model: formState.value,\n                  rules: rules\n                }, layout), {\n                  default: _withCtx(() => [\n                    _createVNode(_component_a_form_item, {\n                      label: \"书名\",\n                      name: \"bookname\",\n                      required: \"\"\n                    }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_a_input, {\n                          value: formState.value.bookname,\n                          \"onUpdate:value\": _cache[1] || (_cache[1] = ($event: any) => ((formState.value.bookname) = $event)),\n                          type: \"text\",\n                          autocomplete: \"off\"\n                        }, null, 8, [\"value\"])\n                      ]),\n                      _: 1\n                    }),\n                    _createVNode(_component_a_form_item, {\n                      label: \"作者\",\n                      name: \"author\"\n                    }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_a_input, {\n                          value: formState.value.author,\n                          \"onUpdate:value\": _cache[2] || (_cache[2] = ($event: any) => ((formState.value.author) = $event)),\n                          type: \"text\",\n                          autocomplete: \"off\"\n                        }, null, 8, [\"value\"])\n                      ]),\n                      _: 1\n                    }),\n                    _createVNode(_component_a_form_item, {\n                      label: \"发布时间\",\n                      name: \"publishtime\"\n                    }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_a_date_picker, {\n                          value: formState.value.publishtime,\n                          \"onUpdate:value\": _cache[3] || (_cache[3] = ($event: any) => ((formState.value.publishtime) = $event))\n                        }, null, 8, [\"value\"])\n                      ]),\n                      _: 1\n                    }),\n                    _createVNode(_component_a_form_item, {\n                      label: \"分类\",\n                      name: \"type\"\n                    }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_a_select, {\n                          value: formState.value.type,\n                          \"onUpdate:value\": _cache[6] || (_cache[6] = ($event: any) => ((formState.value.type) = $event)),\n                          \"show-search\": \"\",\n                          placeholder: \"选择一个分类\",\n                          \"filter-option\": filterOption,\n                          style: {\"width\":\"300px\"},\n                          options: items.value.map(item => ({ value: item })),\n                          allowClear: true,\n                          tag: true\n                        }, {\n                          dropdownRender: _withCtx(({ menuNode: menu }) => [\n                            _createVNode(_unref(VNodes), { vnodes: menu }, null, 8, [\"vnodes\"]),\n                            _createVNode(_component_a_divider, { style: {\"margin\":\"4px 0\"} }),\n                            _createVNode(_component_a_space, { style: {\"padding\":\"4px 8px\"} }, {\n                              default: _withCtx(() => [\n                                _createVNode(_component_a_input, {\n                                  ref_key: \"inputRef\",\n                                  ref: inputRef,\n                                  value: name.value,\n                                  \"onUpdate:value\": _cache[4] || (_cache[4] = ($event: any) => ((name).value = $event)),\n                                  placeholder: \"增加一个分类\"\n                                }, null, 8, [\"value\"]),\n                                _createVNode(_component_a_button, {\n                                  type: \"text\",\n                                  onClick: addItem\n                                }, {\n                                  icon: _withCtx(() => [\n                                    _createVNode(_unref(PlusOutlined))\n                                  ]),\n                                  default: _withCtx(() => [\n                                    _createTextVNode(\" 添加分类 \")\n                                  ]),\n                                  _: 1\n                                })\n                              ]),\n                              _: 1\n                            })\n                          ]),\n                          option: _withCtx(({ value }) => [\n                            _createElementVNode(\"div\", _hoisted_13, [\n                              _createElementVNode(\"span\", null, _toDisplayString(value), 1),\n                              _createElementVNode(\"div\", {\n                                onClick: _cache[5] || (_cache[5] = _withModifiers(() => {}, [\"stop\"]))\n                              }, [\n                                _createVNode(_unref(CloseCircleOutlined), {\n                                  onClick: ($event: any) => (deleteType(value))\n                                }, null, 8, [\"onClick\"])\n                              ])\n                            ])\n                          ]),\n                          _: 1\n                        }, 8, [\"value\", \"options\"])\n                      ]),\n                      _: 1\n                    }),\n                    _createVNode(_component_a_form_item, {\n                      label: \"预览\",\n                      name: \"preview\"\n                    }, {\n                      default: _withCtx(() => [\n                        _createElementVNode(\"div\", _hoisted_14, [\n                          _createVNode(_component_a_upload, {\n                            \"file-list\": fileList.value,\n                            \"onUpdate:fileList\": _cache[7] || (_cache[7] = ($event: any) => ((fileList).value = $event)),\n                            onRemove: removeChange,\n                            onChange: uploadChange,\n                            action: \"/logins\",\n                            \"list-type\": \"picture-card\",\n                            onPreview: handlePreview\n                          }, {\n                            default: _withCtx(() => [\n                              (fileList.value.length < 3)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [\n                                    _createVNode(_unref(PlusOutlined)),\n                                    _hoisted_16\n                                  ]))\n                                : _createCommentVNode(\"\", true)\n                            ]),\n                            _: 1\n                          }, 8, [\"file-list\"]),\n                          _createVNode(_component_a_modal, {\n                            open: previewVisible.value,\n                            title: previewTitle.value,\n                            footer: null,\n                            onCancel: handleCancel\n                          }, {\n                            default: _withCtx(() => [\n                              _createElementVNode(\"img\", {\n                                alt: \"example\",\n                                style: {\"width\":\"100%\"},\n                                src: previewImage.value\n                              }, null, 8, _hoisted_17)\n                            ]),\n                            _: 1\n                          }, 8, [\"open\", \"title\"])\n                        ])\n                      ]),\n                      _: 1\n                    }),\n                    _createVNode(_component_a_form_item, {\n                      label: \"状态\",\n                      name: \"status\"\n                    }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_a_select, {\n                          value: formState.value.status,\n                          \"onUpdate:value\": _cache[8] || (_cache[8] = ($event: any) => ((formState.value.status) = $event)),\n                          placeholder: \"请选择一个状态\",\n                          options: statusOptions.value\n                        }, null, 8, [\"value\", \"options\"])\n                      ]),\n                      _: 1\n                    }),\n                    _createVNode(_component_a_form_item, {\n                      label: \"出版社\",\n                      name: \"publish\"\n                    }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_a_input, {\n                          value: formState.value.publish,\n                          \"onUpdate:value\": _cache[9] || (_cache[9] = ($event: any) => ((formState.value.publish) = $event)),\n                          type: \"text\",\n                          autocomplete: \"off\"\n                        }, null, 8, [\"value\"])\n                      ]),\n                      _: 1\n                    }),\n                    _createVNode(_component_a_form_item, {\n                      label: \"isbn\",\n                      name: \"isbn\"\n                    }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_a_input, {\n                          value: formState.value.isbn,\n                          \"onUpdate:value\": _cache[10] || (_cache[10] = ($event: any) => ((formState.value.isbn) = $event)),\n                          type: \"text\",\n                          autocomplete: \"off\"\n                        }, null, 8, [\"value\"])\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                }, 16, [\"model\"])\n              ]),\n              _: 1\n            }, 8, [\"open\"])\n          ])\n        ]),\n        _createVNode(_component_a_float_button_group, {\n          trigger: \"hover\",\n          type: \"primary\",\n          style: { right: '820px', bottom: '30px' }\n        }, {\n          icon: _withCtx(() => [\n            _createVNode(_unref(UnorderedListOutlined))\n          ]),\n          default: _withCtx(() => [\n            _createVNode(_component_a_float_button, { onClick: refresh }, {\n              icon: _withCtx(() => [\n                _createVNode(_unref(RedoOutlined))\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ]))\n}\n}\n\n})","<template>\r\n  <div v-if=\"reloadPage\" style=\"width: 100vw;height: 100vh;\">\r\n    <ReloadPage style=\"display: flex;justify-content: center;align-items: center;\"></ReloadPage>\r\n  </div>\r\n  <div v-else class=\"content\">\r\n    <TopMenu @enterFullscreen=\"enterFullscreen\" @exitFullscreen=\"exitFullscreen\" @reload=\"reload\"></TopMenu>\r\n    <div class=\"main-content\">\r\n      <SideBar :url=\"'/admin/bookmanage'\"></SideBar>\r\n      <div class=\"books-table\">\r\n        <div style=\"width: 20%;display: flex;flex-direction: row;padding:6px 0 0 6px;\">\r\n          <a-button type=\"primary\" style=\"width: 65px;margin-left: 7px;\" @click=\"editForm({}, 'add')\">添加</a-button>\r\n          <a-button type=\"primary\" style=\"margin-left: 7px;\" :disabled=\"!hasSelected\" @click=\"deleteMany\">\r\n            批量删除\r\n          </a-button>\r\n          <span\r\n            style=\"margin-left: 8px;display: flex;justify-content: center;align-items: center;font-size: 12px;color:gray\">\r\n            <template v-if=\"hasSelected\">\r\n              {{ `选择了 ${state.selectedRowKeys.length} 项` }}\r\n            </template>\r\n          </span>\r\n        </div>\r\n\r\n        <a-table style=\"border-radius: 8px;\" :row-selection=\"{\r\n          selectedRowKeys: state.selectedRowKeys, onChange: onSelectChange\r\n        }\" :data-source=\"tableData\" :columns=\"columns\" :scroll=\"{ y: 680 }\"\r\n          :pagination=\"{ hideOnSinglePage: true, pageSize: 50 }\" :customHeaderRow=\"customHeaderRow\" :loading=\"loading\">\r\n\r\n          <template #headerCell=\"{ column }\">\r\n            <template v-if=\"column.key === 'bookname'\">\r\n              <span style=\"color: #1890ff\">{{ column.title }}</span>\r\n            </template>\r\n          </template>\r\n\r\n          <template #customFilterDropdown=\"{ setSelectedKeys, selectedKeys, confirm, clearFilters, column }\">\r\n            <div style=\"padding: 8px\">\r\n              <a-input ref=\"searchInput\" :placeholder=\"`Search ${column.dataIndex}`\" :value=\"selectedKeys[0]\"\r\n                style=\"width: 188px; margin-bottom: 8px; display: block\"\r\n                @change=\"e => setSelectedKeys(e.target.value ? [e.target.value] : [])\"\r\n                @pressEnter=\"handleSearch(selectedKeys, confirm, column.dataIndex)\" />\r\n              <a-button type=\"primary\" size=\"small\" style=\"width: 90px; margin-right: 8px\"\r\n                @click=\"handleSearch(selectedKeys, confirm, column.dataIndex)\">\r\n                <template #icon>\r\n                  <SearchOutlined />\r\n                </template>\r\n                搜索\r\n              </a-button>\r\n              <a-button size=\"small\" style=\"width: 90px\" @click=\"handleReset(clearFilters)\">\r\n                清空\r\n              </a-button>\r\n            </div>\r\n          </template>\r\n\r\n          <template #customFilterIcon=\"{ filtered }\">\r\n            <search-outlined :style=\"{ color: filtered ? '#108ee9' : undefined, position: 'absolute', right: 0 }\" />\r\n          </template>\r\n\r\n          <template #bodyCell=\"{ text, column, record }\">\r\n            <span v-if=\"state.searchText && state.searchedColumn === column.dataIndex\">\r\n              <template v-for=\"(fragment, i) in text\r\n                .toString()\r\n                .split(new RegExp(`(?<=${state.searchText})|(?=${state.searchText})`, 'i'))\">\r\n                <mark v-if=\"fragment.toLowerCase() === state.searchText.toLowerCase()\" :key=\"i\" class=\"highlight\">\r\n                  {{ fragment }}\r\n                </mark>\r\n                <template v-else>{{ fragment }}</template>\r\n              </template>\r\n            </span>\r\n\r\n            <template v-else-if=\"column.key === 'action'\">\r\n              <a-popconfirm v-if=\"tableData.length\" title=\"确认删除？\" okText=\"确认\" cancelText=\"取消\"\r\n                @confirm=\"onDelete(record.key)\">\r\n                <a>下架</a>\r\n              </a-popconfirm>\r\n\r\n              <span style=\"margin-left: 5px;\">\r\n                <a @click=\"editForm(record, 'edit')\">编辑</a>\r\n              </span>\r\n            </template>\r\n\r\n            <template v-else-if=\"column.key === 'status'\">\r\n              <a-tag v-if=\"record.status === 0\" color=\"green\">可借阅</a-tag>\r\n              <a-tag v-else-if=\"record.status === 1\" color=\"error\">已借出</a-tag>\r\n              <a-tag v-else-if=\"record.status === 2\">不可用</a-tag>\r\n            </template>\r\n          </template>\r\n        </a-table>\r\n        <a-modal :open=\"modalVisible\" title=\"编辑图书信息\" centered @cancel=\"cancelModal\">\r\n          <a-form ref=\"formRef\" name=\"custom-validation\" labelAlign=\"left\" :model=\"formState\" :rules=\"rules\"\r\n            v-bind=\"layout\">\r\n\r\n            <a-form-item label=\"书名\" name=\"bookname\" required>\r\n              <a-input v-model:value=\"formState.bookname\" type=\"text\" autocomplete=\"off\" />\r\n            </a-form-item>\r\n            <a-form-item label=\"作者\" name=\"author\">\r\n\r\n              <a-input v-model:value=\"formState.author\" type=\"text\" autocomplete=\"off\" />\r\n            </a-form-item>\r\n            <a-form-item label=\"发布时间\" name=\"publishtime\">\r\n              <a-date-picker v-model:value=\"formState.publishtime\" />\r\n            </a-form-item>\r\n            <a-form-item label=\"分类\" name=\"type\">\r\n              <a-select v-model:value=\"formState.type\" show-search placeholder=\"选择一个分类\" :filter-option=\"filterOption\"\r\n                style=\"width: 300px\" :options=\"items.map(item => ({ value: item }))\" :allowClear=\"true\" :tag=\"true\">\r\n\r\n                <template #dropdownRender=\"{ menuNode: menu }\">\r\n                  <v-nodes :vnodes=\"menu\" />\r\n                  <a-divider style=\"margin: 4px 0\" />\r\n                  <a-space style=\"padding: 4px 8px\">\r\n                    <a-input ref=\"inputRef\" v-model:value=\"name\" placeholder=\"增加一个分类\" />\r\n                    <a-button type=\"text\" @click=\"addItem\">\r\n                      <template #icon>\r\n                        <plus-outlined />\r\n                      </template>\r\n                      添加分类\r\n                    </a-button>\r\n                  </a-space>\r\n                </template>\r\n\r\n                <template #option=\"{ value }\">\r\n                  <div style=\"display: flex;flex-direction: row;justify-content: space-between;align-items: center;\">\r\n                    <span>{{ value }}</span>\r\n                    <div @click.stop>\r\n                      <CloseCircleOutlined @click=\"deleteType(value)\" />\r\n                    </div>\r\n\r\n                  </div>\r\n                </template>\r\n              </a-select>\r\n            </a-form-item>\r\n            <a-form-item label=\"预览\" name=\"preview\">\r\n              <div class=\"clearfix\">\r\n\r\n                <a-upload v-model:file-list=\"fileList\" @remove=\"removeChange\" @change=\"uploadChange\" action=\"/logins\"\r\n                  list-type=\"picture-card\" @preview=\"handlePreview\">\r\n                  <div v-if=\"fileList.length < 3\">\r\n                    <plus-outlined />\r\n                    <div style=\"margin-top: 8px\">Upload</div>\r\n                  </div>\r\n                </a-upload>\r\n                <a-modal :open=\"previewVisible\" :title=\"previewTitle\" :footer=\"null\" @cancel=\"handleCancel\">\r\n                  <img alt=\"example\" style=\"width: 100%\" :src=\"previewImage\" />\r\n                </a-modal>\r\n              </div>\r\n            </a-form-item>\r\n            <a-form-item label=\"状态\" name=\"status\">\r\n              <a-select v-model:value=\"formState.status\" placeholder=\"请选择一个状态\" :options=\"statusOptions\"></a-select>\r\n            </a-form-item>\r\n            <a-form-item label=\"出版社\" name=\"publish\">\r\n              <a-input v-model:value=\"formState.publish\" type=\"text\" autocomplete=\"off\" />\r\n            </a-form-item>\r\n            <a-form-item label=\"isbn\" name=\"isbn\">\r\n              <a-input v-model:value=\"formState.isbn\" type=\"text\" autocomplete=\"off\" />\r\n            </a-form-item>\r\n          </a-form>\r\n\r\n          <template #footer>\r\n            <a-button @click=\"cancelModal\">取消</a-button>\r\n            <a-button type=\"primary\" @click=\"updateForm\">保存</a-button>\r\n          </template>\r\n\r\n        </a-modal>\r\n      </div>\r\n\r\n    </div>\r\n    <a-float-button-group trigger=\"hover\" type=\"primary\" :style=\"{ right: '820px', bottom: '30px' }\">\r\n\r\n      <template #icon>\r\n        <UnorderedListOutlined />\r\n      </template>\r\n      <a-float-button @click=\"refresh\">\r\n\r\n        <template #icon>\r\n          <RedoOutlined />\r\n        </template>\r\n      </a-float-button>\r\n    </a-float-button-group>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { ref, reactive, onBeforeMount, computed, defineComponent, toRaw } from 'vue';\r\nimport axiosInstance from '../../axiosInstance';\r\nimport dayjs from 'dayjs'\r\nimport SideBar from './components/SideBar.vue';\r\nimport TopMenu from './components/TopMenu.vue';\r\nimport { SearchOutlined } from '@ant-design/icons-vue';\r\nimport { message, type FormInstance } from 'ant-design-vue';\r\n\r\nimport type { Rule } from 'ant-design-vue/es/form';\r\nimport { PlusOutlined, CloseCircleOutlined, UnorderedListOutlined, RedoOutlined } from '@ant-design/icons-vue';\r\nimport ReloadPage from '../../components/reloadPage.vue'\r\nimport type { Dayjs } from 'dayjs';\r\nimport type { SelectProps } from 'ant-design-vue';\r\n\r\nimport type { UploadProps } from 'ant-design-vue';\r\n\r\n\r\nconst statusOptions = ref<SelectProps['options']>([\r\n  { value: 1, label: '已借出' },\r\n  { value: 2, label: '不可用' },\r\n  { value: 0, label: '可借阅' },\r\n]);\r\n\r\n\r\nconst reloadPage = ref<boolean>(false)\r\ninterface FormState {\r\n  _id: string;\r\n  author: string;\r\n  bookname: string;\r\n  isbn: number | undefined;\r\n  status: number | undefined;\r\n  publish: string;\r\n  publishtime: Dayjs | undefined;\r\n  preview: string | undefined;\r\n  type: string | undefined;\r\n}\r\n\r\n\r\nfunction getBase64(file: File) {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => resolve(reader.result);\r\n    reader.onerror = error => reject(error);\r\n  });\r\n}\r\n\r\nconst previewVisible = ref(false);\r\nconst previewImage = ref('');\r\nconst previewTitle = ref('');\r\nconst uploadChange = () => {\r\n  console.log('has upload')\r\n  hasUpload.value = true\r\n}\r\n\r\nconst removeChange = (file: any) => {\r\n  console.log('remove', file)\r\n\r\n}\r\nconst formType = ref('编辑')\r\nconst fileList = ref<UploadProps['fileList']>([\r\n\r\n]);\r\nconst hasUpload = ref(false)\r\nconst handleCancel = () => {\r\n  previewVisible.value = false;\r\n  previewTitle.value = '';\r\n};\r\nconst handlePreview = async (file: UploadProps['fileList'][number]) => {\r\n  if (!file.url && !file.preview) {\r\n    file.preview = (await getBase64(file.originFileObj)) as string;\r\n  }\r\n  previewImage.value = file.url || file.preview;\r\n  previewVisible.value = true;\r\n\r\n  previewTitle.value = file.name || file.url.substring(file.url.lastIndexOf('/') + 1);\r\n};\r\n\r\n\r\n\r\n\r\nconst enterFullscreen = () => {\r\n  const element = document.documentElement; // 全屏元素，这里使用整个文档根元素\r\n  if (element.requestFullscreen) {\r\n    element.requestFullscreen();\r\n  } else if (element.mozRequestFullScreen) { // Firefox\r\n    element.mozRequestFullScreen();\r\n  } else if (element.webkitRequestFullscreen) { // Chrome, Safari and Opera\r\n    element.webkitRequestFullscreen();\r\n  } else if (element.msRequestFullscreen) { // IE/Edge\r\n    element.msRequestFullscreen();\r\n  }\r\n\r\n}\r\n\r\nconst exitFullscreen = () => {\r\n  if (document.exitFullscreen) {\r\n    document.exitFullscreen();\r\n  } else if (document.mozCancelFullScreen) { // Firefox\r\n    document.mozCancelFullScreen();\r\n  } else if (document.webkitExitFullscreen) { // Chrome, Safari and Opera\r\n    document.webkitExitFullscreen();\r\n  } else if (document.msExitFullscreen) { // IE/Edge\r\n    document.msExitFullscreen();\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\n\r\nconst filterOption = (input: string, option: any) => {\r\n  return option.value.toLowerCase().indexOf(input.toLowerCase()) >= 0;\r\n};\r\nconst layout = {\r\n  labelCol: { span: 4 },\r\n  wrapperCol: { span: 14 },\r\n};\r\nconst loading = ref<boolean>(true)\r\nconst formRef = ref<FormInstance>();\r\nconst formState = ref<FormState>({\r\n  _id: '',\r\n  author: '',\r\n  bookname: '',\r\n  isbn: undefined,\r\n  status: undefined,\r\n  publish: '',\r\n  publishtime: dayjs(),\r\n  preview: undefined,\r\n  type: undefined\r\n});\r\n\r\nconst VNodes = defineComponent({\r\n  props: {\r\n    vnodes: {\r\n      type: Object,\r\n      required: true,\r\n    },\r\n  },\r\n  render() {\r\n    return this.vnodes;\r\n  },\r\n});\r\n\r\nlet index = 0;\r\nconst items = ref<any>([]);\r\n\r\nconst inputRef = ref();\r\nconst name = ref();\r\n\r\nconst addItem = async (e: any) => {\r\n  e.preventDefault();\r\n  console.log('addItem');\r\n  if (!name.value) {\r\n    message.error('请输入分类名称', 1.5)\r\n    return\r\n  }\r\n  if (items.value.includes(name.value)) {\r\n    message.error('该分类已存在', 1.5)\r\n    return\r\n  }\r\n  items.value.push(name.value);\r\n  try {\r\n    await axiosInstance.post('/addtype', { type: name.value })\r\n  } catch (error) {\r\n    message.error(error.response.data.message, 1.5)\r\n    console.log('error', error)\r\n  }\r\n\r\n  name.value = '';\r\n  setTimeout(() => {\r\n    inputRef.value?.focus();\r\n  }, 0);\r\n};\r\nconst rules: Record<string, Rule[]> = {\r\n  author: [{ required: true, message: '请输入作者名称', trigger: 'change' }],\r\n  bookname: [{ required: true, message: '请输入书名', trigger: 'change' }],\r\n  publish: [{ required: true, message: '请输入出版社名称', trigger: 'change' }],\r\n  publishtime: [{ required: true, message: '请选择发布时间', trigger: 'change' }],\r\n  status: [{ required: true, message: '请选择状态', trigger: 'change' }],\r\n  type: [{ required: true, message: '请选择图书类型', trigger: 'change' }],\r\n  // preview: [{ required: true, message: '请上传预览目录图片', trigger: 'change' }],\r\n  isbn: [{ required: true, message: '请输入ISBN号', trigger: 'change' }],\r\n};\r\n\r\n// let blobs: any[] = []\r\n\r\n\r\n// for (let i = 0; i < preview.length; i++) {\r\n//   const base64Data = preview[i].split(\",\")[1]\r\n//   const contentType = ((preview[i].split(\",\")[0]).split(\":\")[1]).split(\";\")[0]\r\n//   blobs.push(base64ToBlob(base64Data, contentType))\r\n// }\r\n\r\n// const formData = new FormData();\r\n// blobs.forEach((blob, index) => {\r\n//   formData.append(`image${index + 1}`, blob, `image${index + 1}.jpg`);\r\n// });\r\n\r\n// await instance.post('/editbook', formData)\r\n// .then(res=> {\r\n//   {\r\n//   modalVisible.value = false\r\n//   message.success('编辑成功', 1.5)\r\n//   console.log('res', res, formState.value)\r\n//   if (formState.value._id) {\r\n//     for (let i = 0; i < tableData.value.length; i++) {\r\n//       if (tableData.value[i]._id === res.data.book._id) {\r\n//         tableData.value[i] = { key: res.data.book._id, ...res.data.book };\r\n\r\n//       }\r\n//     }\r\n//   } else {\r\n//     const temp = ref<string[]>([{ key: res.data.book._id, ...res.data.book }])\r\n//     tableData.value = temp.value.concat(tableData.value)\r\n//     // tableData.value.unshift(res.data.book)\r\n\r\n//   }\r\n//   updateTypes()\r\n\r\n// }\r\n// })\r\n// .catch(error => {\r\n//   console.log(error)\r\n//   message.error('编辑错误', 1.5)\r\n// });\r\nconst updateForm = () => {\r\n  console.log('点击了')\r\n  formRef.value?.validate().then(async () => {\r\n\r\n    let preview: string[] = []\r\n    console.log('aaaa', fileList.value, hasUpload.value)\r\n    for (let i = 0; i < fileList.value?.length; i++) {\r\n\r\n      let temp: any\r\n      if (hasUpload.value) {\r\n        if ('originFileObj' in fileList.value[i]) {\r\n          temp = await getBase64(fileList.value[i].originFileObj)\r\n        } else {\r\n          temp = fileList.value[i].url\r\n        }\r\n\r\n      } else {\r\n        temp = fileList.value[i].url\r\n      }\r\n\r\n\r\n      console.log('temp', temp)\r\n      preview.push(temp)\r\n    }\r\n    console.log('preview', preview)\r\n    for (let j = 0; j < preview.length; j++) {\r\n      const base64String = preview[j];\r\n      const chunkSize = 1024 * 8; // 每个块的大小\r\n      const totalChunks = Math.ceil(base64String.length / chunkSize);\r\n      for (let i = 0; i < totalChunks; i++) {\r\n        const start = i * chunkSize;\r\n        const end = Math.min(start + chunkSize, base64String.length);\r\n        const chunk = base64String.substring(start, end);\r\n        // 发送分块数据到后端\r\n        fetch('/editbook', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify({ chunk, index: i, totalChunks, listSign: j + 1, length: preview.length, isUploadDone: false }),\r\n        });\r\n      }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    console.log('点击了1', preview, formState.value)\r\n    await axiosInstance.post('/editbook', { book: formState.value, isUploadDone: true }).then((res) => {\r\n      modalVisible.value = false\r\n      message.success(`${formType.value}成功`, 1.5)\r\n      hasUpload.value = false\r\n      console.log('res', res, formState.value)\r\n      if (formState.value._id) {\r\n        for (let i = 0; i < tableData.value.length; i++) {\r\n          if (tableData.value[i]._id === res.data.book._id) {\r\n            tableData.value[i] = { key: res.data.book._id, ...res.data.book };\r\n\r\n          }\r\n        }\r\n      } else {\r\n        const temp = ref<string[]>([{ key: res.data.book._id, ...res.data.book }])\r\n        tableData.value = temp.value.concat(tableData.value)\r\n      }\r\n      updateTypes()\r\n\r\n    }).catch(error => {\r\n      console.log(error)\r\n      message.error(error.response.data.message, 1.5)\r\n    })\r\n    console.log('value', formState.value)\r\n  }).catch(error => {\r\n    console.log('error', error);\r\n  })\r\n}\r\n\r\n\r\nconst updateTypes = async () => {\r\n  try {\r\n    const { data } = await axiosInstance.get('/showtypes')\r\n    console.log('data', data)\r\n    let tempTypes = []\r\n    for (let i = 0; i < data.types.length; i++) {\r\n      tempTypes.push(data.types[i].type)\r\n    }\r\n    items.value = [...new Set(tempTypes)]\r\n  } catch (error) {\r\n\r\n    console.log(error)\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst deleteMany = async () => {\r\n  console.log('添加', toRaw(state.selectedRowKeys))\r\n  await axiosInstance.post('/deletebooks', { books: toRaw(state.selectedRowKeys) }).then((res) => {\r\n    console.log('res', res)\r\n    if (res) {\r\n      message.loading('loading', 1.0).then(() => {\r\n        message.success('删除成功', 1.0)\r\n        for (let i = 0; i < toRaw(state.selectedRowKeys).length; i++) {\r\n          tableData.value = tableData.value.filter(item => item.key !== toRaw(state.selectedRowKeys)[i]);\r\n        }\r\n        state.selectedRowKeys = []\r\n      })\r\n    }\r\n  })\r\n}\r\nconst deleteType = async (type: string) => {\r\n  console.log('type', type)\r\n\r\n  await axiosInstance.post('/deletetype', { type }).then((res) => {\r\n    console.log('res', res)\r\n    if (res) {\r\n      message.success('删除成功', 1.0)\r\n      updateTypes()\r\n    }\r\n  })\r\n\r\n}\r\n\r\nconst onDelete = async (key: string) => {\r\n  console.log('key', key)\r\n  try {\r\n    await axiosInstance.post('/deletebook', { _id: key }).then((res) => {\r\n      console.log('res', res)\r\n      if (res) {\r\n        message.loading('loading', 1.0).then(() => {\r\n          message.success('下架成功', 1.0)\r\n          tableData.value = tableData.value.filter(item => item.key !== key);\r\n        })\r\n      }\r\n    })\r\n  } catch (error) {\r\n    message.error('下架失败', 1.0)\r\n    console.log(error)\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst customHeaderRow = (conlumn) => {\r\n  // 在这里可以在控制台看到有一个className ，如下图\r\n  conlumn.forEach((e, index) => {\r\n    conlumn[index].className = 'tableClass' // 给数组中的每一列加上一个类名\r\n  })\r\n}\r\n\r\nconst columns = [\r\n  {\r\n    title: '书名',\r\n    dataIndex: 'bookname',\r\n    key: 'bookname',\r\n    customFilterDropdown: true,\r\n    ellipsis: true,\r\n    onFilter: (value, record) => record.bookname.toString().toLowerCase().includes(value.toLowerCase()),\r\n    onFilterDropdownOpenChange: visible => {\r\n      if (visible) {\r\n        setTimeout(() => {\r\n          searchInput.value.focus();\r\n        }, 100);\r\n      }\r\n    },\r\n    align: 'center'\r\n  },\r\n  {\r\n    title: '作者',\r\n    dataIndex: 'author',\r\n    key: 'author',\r\n    ellipsis: true,\r\n    customFilterDropdown: true,\r\n    onFilter: (value, record) => record.author.toString().toLowerCase().includes(value.toLowerCase()),\r\n    onFilterDropdownOpenChange: visible => {\r\n      if (visible) {\r\n        setTimeout(() => {\r\n          searchInput.value.focus();\r\n        }, 100);\r\n      }\r\n    },\r\n\r\n    align: 'center'\r\n  },\r\n  {\r\n    title: '分类',\r\n    dataIndex: 'type',\r\n    key: 'type',\r\n    customFilterDropdown: true,\r\n    onFilter: (value, record) => record.type.toString().toLowerCase().includes(value.toLowerCase()),\r\n    onFilterDropdownOpenChange: visible => {\r\n      if (visible) {\r\n        setTimeout(() => {\r\n          searchInput.value.focus();\r\n        }, 100);\r\n      }\r\n    },\r\n    align: 'center'\r\n  },\r\n  {\r\n    title: '发布时间',\r\n    dataIndex: 'publishtime',\r\n    key: 'publishtime',\r\n    customRender: ({ text }) => {\r\n      return dayjs(text).format('YYYY-MM-DD')\r\n    },\r\n    align: 'center'\r\n  },\r\n  {\r\n    title: '出版社',\r\n    dataIndex: 'publish',\r\n    key: 'publish',\r\n    align: 'center'\r\n  },\r\n  {\r\n    title: 'ISBN',\r\n    dataIndex: 'isbn',\r\n    key: 'isbn',\r\n    align: 'center'\r\n  },\r\n  {\r\n    title: '状态',\r\n    dataIndex: 'status',\r\n    key: 'status',\r\n    align: 'center',\r\n\r\n  },\r\n  {\r\n    title: '操作',\r\n    dataIndex: 'action',\r\n    key: 'action',\r\n    align: 'center'\r\n  }\r\n]\r\nconst tableData = ref<any>([])\r\n\r\nconst modalVisible = ref<boolean>(false);\r\nconst cancelModal = () => {\r\n  modalVisible.value = false\r\n  resetForm()\r\n\r\n};\r\nconst editForm = (record: any, type: string) => {\r\n  switch (type) {\r\n    case 'edit':\r\n      resetForm()\r\n      initFormData(record)\r\n      formType.value = '编辑'\r\n      modalVisible.value = true\r\n      break;\r\n    case 'add':\r\n      resetForm()\r\n      formType.value = '添加'\r\n      modalVisible.value = true\r\n      break;\r\n    default:\r\n      console.error({ msg: '未知提交类型' })\r\n  }\r\n\r\n  console.log('record', record)\r\n\r\n}\r\n\r\nconst initFormData = (record: any) => {\r\n\r\n  formState.value._id = record.key\r\n  formState.value.author = record.author\r\n  formState.value.bookname = record.bookname\r\n  formState.value.publish = record.publish\r\n  formState.value.publishtime = dayjs(record.publishtime)\r\n  formState.value.status = record.status\r\n  formState.value.type = record.type\r\n  formState.value.isbn = record.isbn\r\n  console.log('length', JSON.parse(record.preview))\r\n  JSON.parse(record.preview.replace(/'/g, '\"')).map((item: string) => {\r\n    fileList.value?.push({\r\n      uid: item,\r\n      name: item,\r\n      status: 'done',\r\n      url: item\r\n    })\r\n  })\r\n\r\n\r\n\r\n\r\n}\r\nconst resetForm = () => {\r\n  formState.value._id = ''\r\n  formState.value.author = ''\r\n  formState.value.bookname = ''\r\n  formState.value.publish = ''\r\n  formState.value.publishtime = dayjs()\r\n  formState.value.status = undefined\r\n  formState.value.type = undefined\r\n  formState.value.isbn = undefined\r\n  formState.value.preview = undefined\r\n  fileList.value = []\r\n}\r\n\r\n\r\n\r\nonBeforeMount(async () => {\r\n  try {\r\n    reloadPage.value = true\r\n    await axiosInstance.get('/showbooks').then((res) => {\r\n      if (res) {\r\n        for (let i = 0; i < res.data.books.length; i++) {\r\n          tableData.value.push({ key: res.data.books[i]._id, ...res.data.books[i] });\r\n        }\r\n      }\r\n    }).finally(() => {\r\n      updateTypes()\r\n      loading.value = false\r\n      reloadPage.value = false\r\n    })\r\n  } catch (error) {\r\n    console.log(error)\r\n  }\r\n})\r\n\r\n\r\nconst reload = async () => {\r\n  try {\r\n    reloadPage.value = true\r\n    await axiosInstance.post('/showbooks').then((res) => {\r\n      if (res) {\r\n        for (let i = 0; i < res.data.books.length; i++) {\r\n          tableData.value.push({ key: res.data.books[i]._id, ...res.data.books[i] });\r\n        }\r\n        updateTypes()\r\n      }\r\n    }).finally(() => {\r\n      reloadPage.value = false\r\n    })\r\n\r\n  } catch (error) {\r\n    console.log(error)\r\n  }\r\n}\r\n\r\nconst refresh = () => {\r\n  try {\r\n    loading.value = true\r\n    setTimeout(async () => {\r\n      tableData.value = []\r\n      const { data } = await axiosInstance.get('/showbooks')\r\n      for (let i = 0; i < data.books.length; i++) {\r\n        tableData.value.push({ key: data.books[i]._id, ...data.books[i] });\r\n      }\r\n      updateTypes()\r\n      loading.value = false\r\n    }, 1000)\r\n\r\n  } catch (error) {\r\n    console.log(error)\r\n  }\r\n}\r\n\r\n\r\nconst state = reactive({\r\n  searchText: '',\r\n  searchedColumn: '',\r\n  selectedRowKeys: [],\r\n});\r\n\r\nconst searchInput = ref();\r\n\r\n\r\n\r\nconst handleSearch = (selectedKeys, confirm, dataIndex) => {\r\n  confirm();\r\n  state.searchText = selectedKeys[0];\r\n  state.searchedColumn = dataIndex;\r\n};\r\n\r\nconst handleReset = clearFilters => {\r\n  clearFilters({ confirm: true });\r\n  state.searchText = '';\r\n};\r\n\r\nconst onSelectChange = (selectedRowKeys) => {\r\n  console.log('selectedRowKeys changed: ', selectedRowKeys);\r\n  state.selectedRowKeys = selectedRowKeys;\r\n};\r\n\r\n\r\n\r\nconst hasSelected = computed(() => state.selectedRowKeys.length > 0);\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n:deep(.ant-table-tbody tr:nth-child(2n)) {\r\n  background-color: #fafafa;\r\n}\r\n\r\n:deep(.tableClass) {\r\n  background-color: #fff !important;\r\n\r\n  &:first-child {\r\n\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n\r\n\r\n}\r\n\r\n.ant-upload-select-picture-card i {\r\n  font-size: 32px;\r\n  color: #999;\r\n}\r\n\r\n.ant-upload-select-picture-card .ant-upload-text {\r\n  margin-top: 8px;\r\n  color: #666;\r\n}\r\n\r\n.content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: #f0f2f5;\r\n\r\n  >.main-content {\r\n    display: flex;\r\n    flex-direction: row;\r\n\r\n\r\n  }\r\n}\r\n\r\n\r\n.books-table {\r\n  width: 87%;\r\n  height: 90vh;\r\n  margin: 20px 0 0 20px;\r\n  background-color: #fff;\r\n  display: flex;\r\n  flex-direction: column;\r\n  border-radius: 8px;\r\n}\r\n</style>","import script from \"./BookManagement.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./BookManagement.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./BookManagement.vue?vue&type=style&index=0&id=03d9c796&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-03d9c796\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-c654d7a2\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"sidebar\" }\nconst _hoisted_2 = [\"src\"]\nconst _hoisted_3 = { style: {\"margin-left\":\"5px\"} }\n\nimport { onBeforeMount, ref } from 'vue';\r\nimport bookImage from '@/assets/book.png'\r\nimport userImage from '@/assets/user.png'\r\nimport borrowImage from '@/assets/borrow.png'\r\nimport noticeImage from '@/assets/notice.png'\r\nimport analysisImage from '@/assets/analysis.png'\r\ninterface Item {\r\n    id: number;\r\n    text: string;\r\n    url: string;\r\n    selected: boolean;\r\n    image: string;\r\n}\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'SideBar',\n  props: {\r\n    url: {\r\n        type: String,\r\n        require: true\r\n    }\r\n},\n  setup(__props) {\n\r\nconst props = __props\r\nconst items = ref<Item[]>([\r\n    {\r\n        id: 4,\r\n        text: '数据分析',\r\n        url: '/admin/analysis',\r\n        selected: false,\r\n        image: analysisImage\r\n    },\r\n    {\r\n        id: 1,\r\n        text: '图书管理',\r\n        url: '/admin/bookmanage',\r\n        selected: false,\r\n        image: bookImage\r\n    },\r\n    {\r\n        id: 2,\r\n        text: '用户管理',\r\n        url: '/admin/user',\r\n        selected: false,\r\n        image: userImage\r\n    },\r\n    {\r\n        id: 3,\r\n        text: '借阅管理',\r\n        url: '/admin/borrow',\r\n        selected: false,\r\n        image: borrowImage\r\n    },\r\n    {\r\n        id: 4,\r\n        text: '通知提醒',\r\n        url: '/admin/notice',\r\n        selected: false,\r\n        image: noticeImage\r\n    }\r\n])\r\nonBeforeMount(() => {\r\n    items.value.forEach(item => {\r\n        if (item.url === props.url) {\r\n            item.selected = true\r\n        }\r\n    });\r\n})\r\n\r\n\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_router_link = _resolveComponent(\"router-link\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(items.value, (item, index) => {\n      return (_openBlock(), _createElementBlock(\"div\", {\n        class: _normalizeClass([\"sideitem\", { selected: item.selected }]),\n        key: index\n      }, [\n        _createVNode(_component_router_link, {\n          to: item.url\n        }, {\n          default: _withCtx(() => [\n            _createElementVNode(\"div\", {\n              class: _normalizeClass([\"fonts\", { selectedfont: item.selected }])\n            }, [\n              _createElementVNode(\"img\", {\n                src: item.image\n              }, null, 8, _hoisted_2),\n              _createElementVNode(\"span\", _hoisted_3, _toDisplayString(item.text), 1)\n            ], 2)\n          ]),\n          _: 2\n        }, 1032, [\"to\"])\n      ], 2))\n    }), 128))\n  ]))\n}\n}\n\n})","<template>\r\n    <div class=\"sidebar\">\r\n        <div class=\"sideitem\" v-for=\"(item, index) in items\" :key=\"index\" :class=\"{ selected: item.selected }\">\r\n            <router-link :to=\"item.url\">\r\n                <div class=\"fonts\" :class=\"{ selectedfont: item.selected }\">\r\n                    <img :src=\"item.image\" />\r\n                    <span style=\"margin-left: 5px;\">{{ item.text }}</span>\r\n                </div>\r\n            </router-link>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script lang=\"ts\" setup>\r\nimport { onBeforeMount, ref } from 'vue';\r\nimport bookImage from '@/assets/book.png'\r\nimport userImage from '@/assets/user.png'\r\nimport borrowImage from '@/assets/borrow.png'\r\nimport noticeImage from '@/assets/notice.png'\r\nimport analysisImage from '@/assets/analysis.png'\r\nconst props = defineProps({\r\n    url: {\r\n        type: String,\r\n        require: true\r\n    }\r\n})\r\ninterface Item {\r\n    id: number;\r\n    text: string;\r\n    url: string;\r\n    selected: boolean;\r\n    image: string;\r\n}\r\nconst items = ref<Item[]>([\r\n    {\r\n        id: 4,\r\n        text: '数据分析',\r\n        url: '/admin/analysis',\r\n        selected: false,\r\n        image: analysisImage\r\n    },\r\n    {\r\n        id: 1,\r\n        text: '图书管理',\r\n        url: '/admin/bookmanage',\r\n        selected: false,\r\n        image: bookImage\r\n    },\r\n    {\r\n        id: 2,\r\n        text: '用户管理',\r\n        url: '/admin/user',\r\n        selected: false,\r\n        image: userImage\r\n    },\r\n    {\r\n        id: 3,\r\n        text: '借阅管理',\r\n        url: '/admin/borrow',\r\n        selected: false,\r\n        image: borrowImage\r\n    },\r\n    {\r\n        id: 4,\r\n        text: '通知提醒',\r\n        url: '/admin/notice',\r\n        selected: false,\r\n        image: noticeImage\r\n    }\r\n])\r\nonBeforeMount(() => {\r\n    items.value.forEach(item => {\r\n        if (item.url === props.url) {\r\n            item.selected = true\r\n        }\r\n    });\r\n})\r\n\r\n\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.sidebar {\r\n    width: 197px;\r\n    height: 94vh;\r\n    border-right: 1px solid #f6f6f6;\r\n    background-color: #fff;\r\n    z-index: 999;\r\n}\r\n\r\n.sideitem {\r\n\r\n    width: 90%;\r\n    height: 30px;\r\n    //padding: 5px;\r\n    margin: 10px;\r\n    border-radius: 4px;\r\n\r\n}\r\n\r\n.selected {\r\n\r\n    background: rgb(64, 158, 255);\r\n    background: linear-gradient(142deg, rgba(64, 158, 255, 0.7147233893557423) 0%, rgba(64, 158, 255, 0.9416141456582633) 100%);\r\n}\r\n\r\n.fonts {\r\n    width: 100%;\r\n    height: 100%;\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n    margin-left: 30px;\r\n    color: black;\r\n    position: relative;\r\n\r\n    >img {\r\n        position: absolute;\r\n        width: 16px;\r\n        height: 16px;\r\n        left: -25px;\r\n        margin-left: 10px;\r\n    }\r\n}\r\n\r\n.selectedfont {\r\n    color: #fff\r\n}\r\n</style>","import script from \"./SideBar.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./SideBar.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./SideBar.vue?vue&type=style&index=0&id=c654d7a2&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-c654d7a2\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, unref as _unref, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\nimport _imports_0 from '../../../assets/logo.png'\nimport _imports_1 from '../../../assets/user-avatar-line.png'\nimport _imports_2 from '../../../assets/Logout.png'\n\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-00e5ff7a\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  class: \"topmenu\",\n  style: {\"position\":\"relative\"}\n}\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"logo\" }, [\n  /*#__PURE__*/_createElementVNode(\"img\", { src: _imports_0 })\n], -1))\nconst _hoisted_3 = { class: \"user-info\" }\nconst _hoisted_4 = { class: \"avatar\" }\nconst _hoisted_5 = [\"src\"]\nconst _hoisted_6 = {\n  key: 1,\n  src: _imports_1\n}\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  style: {\"width\":\"35px\",\"height\":\"35px\"},\n  src: _imports_2\n}, null, -1))\nconst _hoisted_8 = [\n  _hoisted_7\n]\n\nimport {ref } from 'vue'\r\n\r\nimport { useStore } from 'vuex';\r\nimport { message } from 'ant-design-vue';\r\nimport { FullscreenOutlined, FullscreenExitOutlined ,RedoOutlined} from '@ant-design/icons-vue'\r\n\r\n\r\n// 使用 defineEmits 定义组件的事件\r\ninterface DataItem {\r\n  title: string;\r\n  content: string;\r\n  tag: string\r\n}\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'TopMenu',\n  emits: ['enterFullscreen', 'exitFullscreen', 'reload'],\n  setup(__props, { emit: __emit }) {\n\r\nconst emits = __emit;\r\nlet isFullscreen = ref<boolean>(false)\r\n\r\n\r\n\r\nconst store = useStore()\r\nconst enterFullscreen = () => {\r\n  emits('enterFullscreen')\r\n  isFullscreen.value = true\r\n}\r\n\r\nconst exitFullscreen = () => {\r\n  emits('exitFullscreen')\r\n  isFullscreen.value = false\r\n}\r\nconst reload = () => {\r\n  emits('reload')\r\n}\r\n\r\nconst logout = () => {\r\n  message.loading('loading', 1.0).then(() => {\r\n    localStorage.removeItem('user')\r\n    store.commit('logout')\r\n  })\r\n\r\n}\r\n\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _hoisted_2,\n    _createElementVNode(\"div\", _hoisted_3, [\n      _createVNode(_unref(RedoOutlined), {\n        onClick: reload,\n        style: {fontSize:'21px',marginRight:'3px'}\n      }),\n      (!_unref(isFullscreen))\n        ? (_openBlock(), _createBlock(_unref(FullscreenOutlined), {\n            key: 0,\n            style: {fontSize:'21px',marginRight:'3px'},\n            onClick: enterFullscreen\n          }))\n        : (_openBlock(), _createBlock(_unref(FullscreenExitOutlined), {\n            key: 1,\n            style: {fontSize:'21px',marginRight:'3px'},\n            onClick: exitFullscreen\n          })),\n      _createElementVNode(\"div\", _hoisted_4, [\n        (_unref(store).state.user.avatar)\n          ? (_openBlock(), _createElementBlock(\"img\", {\n              key: 0,\n              src: _unref(store).state.user.avatar\n            }, null, 8, _hoisted_5))\n          : (_openBlock(), _createElementBlock(\"img\", _hoisted_6)),\n        _createElementVNode(\"span\", null, _toDisplayString(_unref(store).state.user.username), 1)\n      ]),\n      _createElementVNode(\"div\", {\n        class: \"user-btn\",\n        onClick: logout\n      }, _hoisted_8)\n    ])\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"topmenu\" style=\"position: relative;\">\r\n    <div class=\"logo\">\r\n      <img src=\"../../../assets/logo.png\" />\r\n    </div>\r\n\r\n    <div class=\"user-info\" >\r\n      <RedoOutlined @click=\"reload\" :style=\"{fontSize:'21px',marginRight:'3px'}\"/>\r\n      <FullscreenOutlined v-if=\"!isFullscreen\" :style=\"{fontSize:'21px',marginRight:'3px'}\" @click=\"enterFullscreen\" />\r\n      <FullscreenExitOutlined v-else :style=\"{fontSize:'21px',marginRight:'3px'}\" @click=\"exitFullscreen\" />\r\n      <div class=\"avatar\"><img v-if=\"store.state.user.avatar\" :src=\"store.state.user.avatar\" />\r\n        <img v-else src=\"../../../assets/user-avatar-line.png\" /><span>{{\r\n          store.state.user.username\r\n        }}</span>\r\n      </div>\r\n      <div class=\"user-btn\" @click=\"logout\"><img style=\"width: 35px;height: 35px;\" src=\"../../../assets/Logout.png\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script lang=\"ts\" setup>\r\nimport {ref, defineEmits } from 'vue'\r\n\r\nimport { useStore } from 'vuex';\r\nimport { message } from 'ant-design-vue';\r\nimport { FullscreenOutlined, FullscreenExitOutlined ,RedoOutlined} from '@ant-design/icons-vue'\r\n\r\n\r\n// 使用 defineEmits 定义组件的事件\r\nconst emits = defineEmits(['enterFullscreen', 'exitFullscreen', 'reload']);\r\ninterface DataItem {\r\n  title: string;\r\n  content: string;\r\n  tag: string\r\n}\r\nlet isFullscreen = ref<boolean>(false)\r\n\r\n\r\n\r\nconst store = useStore()\r\nconst enterFullscreen = () => {\r\n  emits('enterFullscreen')\r\n  isFullscreen.value = true\r\n}\r\n\r\nconst exitFullscreen = () => {\r\n  emits('exitFullscreen')\r\n  isFullscreen.value = false\r\n}\r\nconst reload = () => {\r\n  emits('reload')\r\n}\r\n\r\nconst logout = () => {\r\n  message.loading('loading', 1.0).then(() => {\r\n    localStorage.removeItem('user')\r\n    store.commit('logout')\r\n  })\r\n\r\n}\r\n\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n:deep(.slick-slide) {\r\n  text-align: center;\r\n  background: transparent;\r\n  height: 45px;\r\n  line-height: 45px;\r\n}\r\n\r\n:deep(.slick-slide h3) {\r\n  color: #fff;\r\n}\r\n\r\n.topmenu {\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  width: 100%;\r\n  height: 6vh;\r\n  background-color: white;\r\n}\r\n\r\n.logo {\r\n  width: 197px;\r\n  height: 100%;\r\n  border-right: 1px solid #f6f6f6;\r\n\r\n  >img {\r\n    width: 120px;\r\n    height: 70px;\r\n  }\r\n}\r\n\r\n.user-info {\r\n  width: 200px;\r\n\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-right: 15px;\r\n\r\n  >.user-btn {\r\n    display: flex;\r\n    justify-content: center;\r\n    margin-right: 10px;\r\n    align-items: center;\r\n    cursor: pointer;\r\n  }\r\n}\r\n\r\n.avatar {\r\n\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: center;\r\n  align-items: center;\r\n\r\n  >span {\r\n    margin-left: 5px;\r\n  }\r\n\r\n  >img {\r\n    width: 35px;\r\n    height: 35px;\r\n    border-radius: 50%;\r\n  }\r\n}\r\n</style>","import script from \"./TopMenu.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./TopMenu.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./TopMenu.vue?vue&type=style&index=0&id=00e5ff7a&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-00e5ff7a\"]])\n\nexport default __exports__"],"names":["headUrl","instance","axios","create","baseURL","timeout","interceptors","request","use","config","url","error","Promise","reject","UnorderedListOutlined","_objectSpread","target","i","arguments","length","source","Object","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","enumerable","forEach","key","_defineProperty","obj","value","defineProperty","configurable","writable","props","context","p","attrs","_createVNode","AntdIcon","UnorderedListOutlinedSvg","displayName","inheritAttrs","_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_1","style","_hoisted_2","class","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_createElementVNode","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_defineComponent","__name","setup","__props","statusOptions","ref","label","reloadPage","getBase64","file","resolve","reader","FileReader","readAsDataURL","onload","result","onerror","previewVisible","previewImage","previewTitle","uploadChange","console","log","hasUpload","removeChange","formType","fileList","handleCancel","handlePreview","async","preview","originFileObj","name","substring","lastIndexOf","enterFullscreen","element","document","documentElement","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","filterOption","input","option","toLowerCase","indexOf","layout","labelCol","span","wrapperCol","loading","formRef","formState","_id","author","bookname","isbn","undefined","status","publish","publishtime","dayjs","type","VNodes","defineComponent","vnodes","required","render","this","items","inputRef","addItem","e","preventDefault","includes","message","push","axiosInstance","post","response","data","setTimeout","focus","rules","trigger","updateForm","validate","then","temp","j","base64String","chunkSize","totalChunks","Math","ceil","start","end","min","chunk","fetch","method","headers","body","JSON","stringify","index","listSign","isUploadDone","book","res","modalVisible","success","tableData","updateTypes","catch","get","tempTypes","types","Set","deleteMany","toRaw","state","selectedRowKeys","books","item","deleteType","onDelete","customHeaderRow","conlumn","className","columns","title","dataIndex","customFilterDropdown","ellipsis","onFilter","record","toString","onFilterDropdownOpenChange","visible","searchInput","align","customRender","text","format","cancelModal","resetForm","editForm","initFormData","msg","parse","replace","map","uid","onBeforeMount","finally","reload","refresh","reactive","searchText","searchedColumn","handleSearch","selectedKeys","confirm","handleReset","clearFilters","onSelectChange","hasSelected","computed","_ctx","_cache","_component_a_button","_resolveComponent","_component_a_input","_component_a_popconfirm","_component_a_tag","_component_a_table","_component_a_form_item","_component_a_date_picker","_component_a_divider","_component_a_space","_component_a_select","_component_a_upload","_component_a_modal","_component_a_form","_component_a_float_button","_component_a_float_button_group","_openBlock","_createElementBlock","ReloadPage","TopMenu","onEnterFullscreen","onExitFullscreen","onReload","SideBar","onClick","$event","default","_withCtx","_createTextVNode","_","disabled","_Fragment","_toDisplayString","_createCommentVNode","onChange","scroll","y","pagination","hideOnSinglePage","pageSize","headerCell","column","setSelectedKeys","ref_key","placeholder","onPressEnter","size","icon","_unref","SearchOutlined","customFilterIcon","filtered","_normalizeStyle","color","position","right","bodyCell","_renderList","split","RegExp","fragment","_createBlock","okText","cancelText","onConfirm","open","centered","onCancel","footer","_mergeProps","labelAlign","model","autocomplete","options","allowClear","tag","dropdownRender","menuNode","menu","PlusOutlined","_withModifiers","CloseCircleOutlined","onRemove","action","onPreview","alt","src","bottom","RedoOutlined","__exports__","String","require","id","selected","image","analysisImage","bookImage","userImage","borrowImage","noticeImage","_component_router_link","_normalizeClass","to","selectedfont","_imports_0","_imports_1","_imports_2","emits","emit","__emit","isFullscreen","store","useStore","logout","localStorage","removeItem","commit","fontSize","marginRight","FullscreenExitOutlined","FullscreenOutlined","user","avatar","username"],"sourceRoot":""}