{"version":3,"file":"js/960.3a4ea7bd.js","mappings":"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","sources":["webpack://biyeshiji/./node_modules/@ant-design/icons-svg/es/asn/UnorderedListOutlined.js","webpack://biyeshiji/./node_modules/@ant-design/icons-vue/es/icons/UnorderedListOutlined.js","webpack://biyeshiji/./src/components/SideBar.vue?24c3","webpack://biyeshiji/./src/components/SideBar.vue","webpack://biyeshiji/./src/components/SideBar.vue?799c","webpack://biyeshiji/./src/components/TopMenu.vue?9d02","webpack://biyeshiji/./src/components/TopMenu.vue","webpack://biyeshiji/./src/components/TopMenu.vue?2de4","webpack://biyeshiji/./src/views/BorrowBook.vue?8208","webpack://biyeshiji/./src/views/BorrowBook.vue","webpack://biyeshiji/./src/views/BorrowBook.vue?7fe0"],"sourcesContent":["// This icon file is generated automatically.\nvar UnorderedListOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z\" } }] }, \"name\": \"unordered-list\", \"theme\": \"outlined\" };\nexport default UnorderedListOutlined;\n","import { createVNode as _createVNode } from \"vue\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport UnorderedListOutlinedSvg from \"@ant-design/icons-svg/es/asn/UnorderedListOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar UnorderedListOutlined = function UnorderedListOutlined(props, context) {\n  var p = _objectSpread({}, props, context.attrs);\n\n  return _createVNode(AntdIcon, _objectSpread({}, p, {\n    \"icon\": UnorderedListOutlinedSvg\n  }), null);\n};\n\nUnorderedListOutlined.displayName = 'UnorderedListOutlined';\nUnorderedListOutlined.inheritAttrs = false;\nexport default UnorderedListOutlined;","import { defineComponent as _defineComponent } from 'vue'\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-0e72bda8\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"sidebar\" }\nconst _hoisted_2 = [\"src\"]\nconst _hoisted_3 = { style: {\"margin-left\":\"5px\"} }\n\nimport { onBeforeMount, ref } from 'vue';\r\nimport bookImage from '@/assets/book.png'\r\nimport userImage from '@/assets/user.png'\r\nimport borrowImage from '@/assets/borrow.png'\r\nimport noticeImage from '@/assets/notice.png'\r\n\r\ninterface Item {\r\n    id: number;\r\n    text: string;\r\n    url: string;\r\n    selected: boolean;\r\n    image: string;\r\n}\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'SideBar',\n  props: {\r\n    url: {\r\n        type: String,\r\n        require: true\r\n    }\r\n},\n  setup(__props) {\n\r\nconst props = __props\r\nconst items = ref<Item[]>([\r\n    {\r\n        id: 1,\r\n        text: '图书预约',\r\n        url: '/bookmanage',\r\n        selected: false,\r\n        image: bookImage\r\n    },\r\n    {\r\n        id: 2,\r\n        text: '用户信息',\r\n        url: '/user',\r\n        selected: false,\r\n        image: userImage\r\n    },\r\n    {\r\n        id: 3,\r\n        text: '图书借阅',\r\n        url: '/borrow',\r\n        selected: false,\r\n        image: borrowImage\r\n    },\r\n    {\r\n        id: 4,\r\n        text: '我的通知',\r\n        url: '/notice',\r\n        selected: false,\r\n        image: noticeImage\r\n    }\r\n])\r\nonBeforeMount(() => {\r\n    items.value.forEach(item => {\r\n        if (item.url === props.url) {\r\n            item.selected = true\r\n        }\r\n    });\r\n})\r\n\r\n\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_router_link = _resolveComponent(\"router-link\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(items.value, (item, index) => {\n      return (_openBlock(), _createElementBlock(\"div\", {\n        class: _normalizeClass([\"sideitem\", { selected: item.selected }]),\n        key: index\n      }, [\n        _createVNode(_component_router_link, {\n          to: item.url\n        }, {\n          default: _withCtx(() => [\n            _createElementVNode(\"div\", {\n              class: _normalizeClass([\"fonts\", { selectedfont: item.selected }])\n            }, [\n              _createElementVNode(\"img\", {\n                src: item.image\n              }, null, 8, _hoisted_2),\n              _createElementVNode(\"span\", _hoisted_3, _toDisplayString(item.text), 1)\n            ], 2)\n          ]),\n          _: 2\n        }, 1032, [\"to\"])\n      ], 2))\n    }), 128))\n  ]))\n}\n}\n\n})","<template>\r\n    <div class=\"sidebar\">\r\n        <div class=\"sideitem\" v-for=\"(item, index) in items\" :key=\"index\" :class=\"{ selected: item.selected }\">\r\n            <router-link :to=\"item.url\">\r\n                <div class=\"fonts\" :class=\"{ selectedfont: item.selected }\">\r\n                    <img :src=\"item.image\" />\r\n                    <span style=\"margin-left: 5px;\">{{ item.text }}</span>\r\n                </div>\r\n            </router-link>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script lang=\"ts\" setup>\r\nimport { onBeforeMount, ref } from 'vue';\r\nimport bookImage from '@/assets/book.png'\r\nimport userImage from '@/assets/user.png'\r\nimport borrowImage from '@/assets/borrow.png'\r\nimport noticeImage from '@/assets/notice.png'\r\n\r\nconst props = defineProps({\r\n    url: {\r\n        type: String,\r\n        require: true\r\n    }\r\n})\r\ninterface Item {\r\n    id: number;\r\n    text: string;\r\n    url: string;\r\n    selected: boolean;\r\n    image: string;\r\n}\r\nconst items = ref<Item[]>([\r\n    {\r\n        id: 1,\r\n        text: '图书预约',\r\n        url: '/bookmanage',\r\n        selected: false,\r\n        image: bookImage\r\n    },\r\n    {\r\n        id: 2,\r\n        text: '用户信息',\r\n        url: '/user',\r\n        selected: false,\r\n        image: userImage\r\n    },\r\n    {\r\n        id: 3,\r\n        text: '图书借阅',\r\n        url: '/borrow',\r\n        selected: false,\r\n        image: borrowImage\r\n    },\r\n    {\r\n        id: 4,\r\n        text: '我的通知',\r\n        url: '/notice',\r\n        selected: false,\r\n        image: noticeImage\r\n    }\r\n])\r\nonBeforeMount(() => {\r\n    items.value.forEach(item => {\r\n        if (item.url === props.url) {\r\n            item.selected = true\r\n        }\r\n    });\r\n})\r\n\r\n\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.sidebar {\r\n    width: 197px;\r\n    height: 94vh;\r\n    border-right: 1px solid #f6f6f6;\r\n    background-color: #fff;\r\n    z-index: 999;\r\n}\r\n\r\n.sideitem {\r\n\r\n    width: 90%;\r\n    height: 30px;\r\n    //padding: 5px;\r\n    margin: 10px;\r\n    border-radius: 4px;\r\n\r\n}\r\n\r\n.selected {\r\n\r\n    background: rgb(64, 158, 255);\r\n    background: linear-gradient(142deg, rgba(64, 158, 255, 0.7147233893557423) 0%, rgba(64, 158, 255, 0.9416141456582633) 100%);\r\n}\r\n\r\n.fonts {\r\n    width: 100%;\r\n    height: 100%;\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n    margin-left: 30px;\r\n    color: black;\r\n    position: relative;\r\n\r\n    >img {\r\n        position: absolute;\r\n        width: 16px;\r\n        height: 16px;\r\n        left: -25px;\r\n        margin-left: 10px;\r\n    }\r\n}\r\n\r\n.selectedfont {\r\n    color: #fff\r\n}\r\n</style>","import script from \"./SideBar.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./SideBar.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./SideBar.vue?vue&type=style&index=0&id=0e72bda8&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0e72bda8\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, unref as _unref, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createBlock as _createBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\nimport _imports_0 from '../assets/logo.png'\nimport _imports_1 from '../assets/user-avatar-line.png'\nimport _imports_2 from '../assets/Logout.png'\n\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-82e46dfe\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  class: \"topmenu\",\n  style: {\"position\":\"relative\"}\n}\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"logo\" }, [\n  /*#__PURE__*/_createElementVNode(\"img\", { src: _imports_0 })\n], -1))\nconst _hoisted_3 = { style: {\"position\":\"absolute\",\"width\":\"60%\",\"height\":\"80%\",\"margin-left\":\"20%\"} }\nconst _hoisted_4 = { style: {\"display\":\"flex\",\"flex-direction\":\"row\",\"justify-content\":\"center\",\"align-items\":\"center\"} }\nconst _hoisted_5 = { class: \"user-info\" }\nconst _hoisted_6 = { class: \"avatar\" }\nconst _hoisted_7 = [\"src\"]\nconst _hoisted_8 = {\n  key: 1,\n  src: _imports_1\n}\nconst _hoisted_9 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  style: {\"width\":\"35px\",\"height\":\"35px\"},\n  src: _imports_2\n}, null, -1))\nconst _hoisted_10 = [\n  _hoisted_9\n]\n\nimport { onBeforeMount, ref } from 'vue'\r\nimport axios from 'axios'\r\nimport { useStore } from 'vuex';\r\nimport { message } from 'ant-design-vue';\r\nimport { FullscreenOutlined, FullscreenExitOutlined, RedoOutlined } from '@ant-design/icons-vue'\r\ninterface DataItem {\r\n  title: string;\r\n  content: string;\r\n  tag: string\r\n}\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'TopMenu',\n  emits: ['enterFullscreen', 'exitFullscreen', 'reload'],\n  setup(__props, { emit: __emit }) {\n\r\nconst emits = __emit;\r\nlet isFullscreen = ref<boolean>(false)\r\nlet noticeData = ref<DataItem[]>([\r\n\r\n]);\r\nconst enterFullscreen = () => {\r\n  emits('enterFullscreen')\r\n  isFullscreen.value = true\r\n}\r\n\r\nconst exitFullscreen = () => {\r\n  emits('exitFullscreen')\r\n  isFullscreen.value = false\r\n}\r\nconst reload = () => {\r\n  emits('reload')\r\n}\r\n\r\n\r\nconst store = useStore()\r\nconst fetchNotices = async () => {\r\n  const { data } = await axios.get('http://localhost:3000/shownotices?userId=' + store.state.user._id);\r\n  const filteredNotices = data.notices.filter(notice => notice.status === 0);\r\n  noticeData.value = filteredNotices;\r\n};\r\nonBeforeMount(async () => {\r\n  await fetchNotices(); // 初始加载数据\r\n\r\n  // 每 30 秒自动刷新数据\r\n  const refreshInterval = 30000; // 30 秒\r\n  setInterval(async () => {\r\n    await fetchNotices();\r\n  }, refreshInterval);\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logout = () => {\r\n  message.loading('loading', 1.0).then(() => {\r\n    localStorage.removeItem('user')\r\n    store.commit('logout')\r\n    store.commit('setLoginStatus', false)\r\n  })\r\n\r\n}\r\n\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_a_tag = _resolveComponent(\"a-tag\")!\n  const _component_a_carousel = _resolveComponent(\"a-carousel\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _hoisted_2,\n    _createElementVNode(\"div\", _hoisted_3, [\n      _createVNode(_component_a_carousel, {\n        autoplay: \"\",\n        dots: false,\n        effect: \"fade\"\n      }, {\n        default: _withCtx(() => [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(noticeData), (item, index) => {\n            return (_openBlock(), _createElementBlock(\"div\", { key: index }, [\n              _createElementVNode(\"h2\", _hoisted_4, [\n                _createVNode(_component_a_tag, {\n                  color: (item.title.includes('归还') || item.title.includes('借阅')) ? 'green' : (item.tag === '通知' ? 'red' : item.tag === '公告' ? 'blue' : 'warning')\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(_toDisplayString(item.tag), 1)\n                  ]),\n                  _: 2\n                }, 1032, [\"color\"]),\n                _createTextVNode(_toDisplayString(item.content.length > 50 ?\r\n        item.content.slice(0, 30) + '...' : item.content), 1)\n              ])\n            ]))\n          }), 128))\n        ]),\n        _: 1\n      })\n    ]),\n    _createElementVNode(\"div\", _hoisted_5, [\n      _createVNode(_unref(RedoOutlined), {\n        onClick: reload,\n        style: { fontSize: '21px', marginRight: '3px' }\n      }),\n      (!_unref(isFullscreen))\n        ? (_openBlock(), _createBlock(_unref(FullscreenOutlined), {\n            key: 0,\n            style: { fontSize: '21px', marginRight: '3px' },\n            onClick: enterFullscreen\n          }))\n        : (_openBlock(), _createBlock(_unref(FullscreenExitOutlined), {\n            key: 1,\n            style: { fontSize: '21px', marginRight: '3px' },\n            onClick: exitFullscreen\n          })),\n      _createElementVNode(\"div\", _hoisted_6, [\n        (_unref(store).state.user.avatar)\n          ? (_openBlock(), _createElementBlock(\"img\", {\n              key: 0,\n              src: _unref(store).state.user.avatar\n            }, null, 8, _hoisted_7))\n          : (_openBlock(), _createElementBlock(\"img\", _hoisted_8)),\n        _createElementVNode(\"span\", null, _toDisplayString(_unref(store).state.user.username), 1)\n      ]),\n      _createElementVNode(\"div\", {\n        class: \"user-btn\",\n        onClick: logout\n      }, _hoisted_10)\n    ])\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"topmenu\" style=\"position: relative;\">\r\n    <div class=\"logo\">\r\n      <img src=\"../assets/logo.png\" />\r\n    </div>\r\n    <div style=\"position:absolute;width: 60%;height: 80%;margin-left: 20%;\">\r\n      <a-carousel autoplay :dots=\"false\" effect=\"fade\">\r\n        <div v-for=\"(item, index) in noticeData\" :key=\"index\">\r\n\r\n          <h2 style=\"display: flex;flex-direction: row;justify-content: center;align-items: center;\">\r\n            <a-tag\r\n              :color=\"(item.title.includes('归还') || item.title.includes('借阅')) ? 'green' : (item.tag === '通知' ? 'red' : item.tag === '公告' ? 'blue' : 'warning')\">{{\r\n        item.tag }}</a-tag>{{ item.content.length > 50 ?\r\n        item.content.slice(0, 30) + '...' : item.content }}\r\n          </h2>\r\n        </div>\r\n      </a-carousel>\r\n    </div>\r\n    <div class=\"user-info\">\r\n      <RedoOutlined @click=\"reload\" :style=\"{ fontSize: '21px', marginRight: '3px' }\" />\r\n      <FullscreenOutlined v-if=\"!isFullscreen\" :style=\"{ fontSize: '21px', marginRight: '3px' }\"\r\n        @click=\"enterFullscreen\" />\r\n      <FullscreenExitOutlined v-else :style=\"{ fontSize: '21px', marginRight: '3px' }\" @click=\"exitFullscreen\" />\r\n      <div class=\"avatar\"><img v-if=\"store.state.user.avatar\" :src=\"store.state.user.avatar\" />\r\n        <img v-else src=\"../assets/user-avatar-line.png\" /><span>{{\r\n        store.state.user.username\r\n      }}</span>\r\n      </div>\r\n      <div class=\"user-btn\" @click=\"logout\"><img style=\"width: 35px;height: 35px;\" src=\"../assets/Logout.png\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script lang=\"ts\" setup>\r\nimport { onBeforeMount, ref } from 'vue'\r\nimport axios from 'axios'\r\nimport { useStore } from 'vuex';\r\nimport { message } from 'ant-design-vue';\r\nimport { FullscreenOutlined, FullscreenExitOutlined, RedoOutlined } from '@ant-design/icons-vue'\r\ninterface DataItem {\r\n  title: string;\r\n  content: string;\r\n  tag: string\r\n}\r\nconst emits = defineEmits(['enterFullscreen', 'exitFullscreen', 'reload']);\r\nlet isFullscreen = ref<boolean>(false)\r\nlet noticeData = ref<DataItem[]>([\r\n\r\n]);\r\nconst enterFullscreen = () => {\r\n  emits('enterFullscreen')\r\n  isFullscreen.value = true\r\n}\r\n\r\nconst exitFullscreen = () => {\r\n  emits('exitFullscreen')\r\n  isFullscreen.value = false\r\n}\r\nconst reload = () => {\r\n  emits('reload')\r\n}\r\n\r\n\r\nconst store = useStore()\r\nconst fetchNotices = async () => {\r\n  const { data } = await axios.get('http://localhost:3000/shownotices?userId=' + store.state.user._id);\r\n  const filteredNotices = data.notices.filter(notice => notice.status === 0);\r\n  noticeData.value = filteredNotices;\r\n};\r\nonBeforeMount(async () => {\r\n  await fetchNotices(); // 初始加载数据\r\n\r\n  // 每 30 秒自动刷新数据\r\n  const refreshInterval = 30000; // 30 秒\r\n  setInterval(async () => {\r\n    await fetchNotices();\r\n  }, refreshInterval);\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logout = () => {\r\n  message.loading('loading', 1.0).then(() => {\r\n    localStorage.removeItem('user')\r\n    store.commit('logout')\r\n    store.commit('setLoginStatus', false)\r\n  })\r\n\r\n}\r\n\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n:deep(.slick-slide) {\r\n  text-align: center;\r\n  background: transparent;\r\n  height: 45px;\r\n  line-height: 45px;\r\n}\r\n\r\n:deep(.slick-slide h3) {\r\n  color: #fff;\r\n}\r\n\r\n.topmenu {\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  width: 100%;\r\n  height: 6vh;\r\n  background-color: white;\r\n}\r\n\r\n.logo {\r\n  width: 197px;\r\n  ;\r\n  height: 100%;\r\n  border-right: 1px solid #f6f6f6;\r\n\r\n  >img {\r\n    width: 120px;\r\n    height: 70px;\r\n  }\r\n}\r\n\r\n.user-info {\r\n  width: 200px;\r\n\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-right: 15px;\r\n\r\n  >.user-btn {\r\n    display: flex;\r\n    justify-content: center;\r\n    margin-right: 10px;\r\n    align-items: center;\r\n    cursor: pointer;\r\n  }\r\n}\r\n\r\n.avatar {\r\n\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: center;\r\n  align-items: center;\r\n\r\n  >span {\r\n    margin-left: 5px;\r\n  }\r\n\r\n  >img {\r\n    width: 35px;\r\n    height: 35px;\r\n    border-radius: 50%;\r\n  }\r\n}\r\n</style>","import script from \"./TopMenu.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./TopMenu.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./TopMenu.vue?vue&type=style&index=0&id=82e46dfe&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-82e46dfe\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, vShow as _vShow, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, createElementVNode as _createElementVNode, unref as _unref, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-4c2dcc28\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  key: 0,\n  style: {\"width\":\"100vw\",\"height\":\"100vh\"}\n}\nconst _hoisted_2 = {\n  key: 1,\n  class: \"borrow-page\"\n}\nconst _hoisted_3 = { class: \"main-content\" }\nconst _hoisted_4 = { class: \"borrowform\" }\nconst _hoisted_5 = {\n  key: 1,\n  class: \"card-container\"\n}\nconst _hoisted_6 = {\n  key: 2,\n  class: \"card-container\"\n}\nconst _hoisted_7 = { class: \"scroll-container\" }\nconst _hoisted_8 = { class: \"scroll-content\" }\nconst _hoisted_9 = [\"src\"]\nconst _hoisted_10 = { class: \"borrow-table\" }\nconst _hoisted_11 = { key: 1 }\n\nimport SideBar from '../components/SideBar.vue';\r\nimport TopMenu from '../components/TopMenu.vue';\r\nimport { onBeforeMount } from 'vue';\r\nimport { Dayjs } from 'dayjs';\r\nimport dayjs from 'dayjs';\r\nimport { reactive, ref, toRaw } from 'vue';\r\nimport type { UnwrapRef } from 'vue';\r\nimport { useRouter } from 'vue-router'\r\nimport axios from 'axios';\r\nimport { useStore } from 'vuex';\r\nimport { message } from 'ant-design-vue';\r\nimport { UnorderedListOutlined, RedoOutlined } from '@ant-design/icons-vue';\r\nimport ReloadPage from '../components/reloadPage.vue'\r\ninterface FormState {\r\n    bookName: string | undefined;\r\n    date1: Dayjs | undefined;\r\n    isbn: string | undefined;\r\n    id: string | undefined;\r\n}\r\ninterface TabData {\r\n    key: number,\r\n    bookname: string | undefined,\r\n    isbn: string | undefined,\r\n    bperson: string | undefined,\r\n    borrowtime: Date | undefined,\r\n    backtime: Date | undefined,\r\n    status: number\r\n}\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'BorrowBook',\n  setup(__props) {\n\r\n\r\nconst store = useStore()\r\nconst formRef = ref();\r\nconst preview = ref(true)\r\nconst previewLoading = ref(true)\r\n\r\nconst previewList = ref([])\r\nconst previewBook = async (bookId: string | undefined) => {\r\n    console.log('bookid', bookId)\r\n    preview.value = false\r\n    setTimeout(async () => {\r\n        previewLoading.value=false\r\n        if (bookId) {\r\n            await axios.get('http://localhost:3000/getbookprebyid?bookId=' + bookId).then((res) => {\r\n                if (res.status === 200) {\r\n                    previewList.value = JSON.parse(res.data.preview.replace(/'/g, '\"'))\r\n                }\r\n            })\r\n        } else {\r\n            await axios.get('http://localhost:3000/getbookprebyisbn?isbn=' + formState.isbn).then((res) => {\r\n                if (res.status === 200) {\r\n                    previewList.value = JSON.parse(res.data.preview.replace(/'/g, '\"'))\r\n                }\r\n            })\r\n        }\r\n    }, 1000)\r\n\r\n\r\n}\r\n\r\n\r\nconst labelCol = { span: 7 };\r\nconst wrapperCol = { span: 15 };\r\nconst activeKey = ref('1');\r\nconst formState: UnwrapRef<FormState> = reactive({\r\n    bookName: '',\r\n    date1: undefined,\r\n    isbn: '',\r\n    id: ''\r\n});\r\nlet statusList: any = ref([\r\n    {\r\n        status: '已预约',\r\n        color: 'green'\r\n    },\r\n    {\r\n        status: '已归还',\r\n        color: 'geekblue'\r\n    },\r\n    {\r\n        status: '已逾期',\r\n        color: 'volcano'\r\n    },\r\n    {\r\n        status: '借阅中',\r\n        color: 'cyan'\r\n    }\r\n\r\n])\r\n\r\nconst enterFullscreen = () => {\r\n    const element = document.documentElement; // 全屏元素，这里使用整个文档根元素\r\n    if (element.requestFullscreen) {\r\n        element.requestFullscreen();\r\n    } else if (element.mozRequestFullScreen) { // Firefox\r\n        element.mozRequestFullScreen();\r\n    } else if (element.webkitRequestFullscreen) { // Chrome, Safari and Opera\r\n        element.webkitRequestFullscreen();\r\n    } else if (element.msRequestFullscreen) { // IE/Edge\r\n        element.msRequestFullscreen();\r\n    }\r\n\r\n}\r\n\r\nconst exitFullscreen = () => {\r\n    if (document.exitFullscreen) {\r\n        document.exitFullscreen();\r\n    } else if (document.mozCancelFullScreen) { // Firefox\r\n        document.mozCancelFullScreen();\r\n    } else if (document.webkitExitFullscreen) { // Chrome, Safari and Opera\r\n        document.webkitExitFullscreen();\r\n    } else if (document.msExitFullscreen) { // IE/Edge\r\n        document.msExitFullscreen();\r\n    }\r\n\r\n}\r\nconst reloadPage = ref<boolean>(false)\r\nconst reload = async () => {\r\n    try {\r\n        reloadPage.value = true\r\n        await axios.get('http://localhost:3000/showborrowlist?userId=' + store.state.user._id).then(async (res) => {\r\n            if (res) {\r\n                const tempList = []\r\n                for (let i = 0; i < res.data.records.length; i++) {\r\n                    if (res.data.records[i].status === 0) {\r\n                        tempList.push(res.data.records[i])\r\n                    }\r\n                }\r\n                for (let i = 0; i < tempList.length; i++) {\r\n                    //当前日期=归还日期+1 更改状态 为已逾期 \r\n                    if (dayjs(tempList[i].backAt).isBefore(dayjs())) {\r\n                        await axios.post('http://localhost:3000/updateborrow', { record: tempList[i] })\r\n                    }\r\n                }\r\n                updateBorrow('init')\r\n            }\r\n        }).finally(() => {\r\n            reloadPage.value = false\r\n        })\r\n\r\n    } catch (error) {\r\n        console.log(error)\r\n    }\r\n}\r\n\r\n\r\nconst router = useRouter()\r\nlet tabData: any = ref([])\r\nconst loading = ref<boolean>(true)\r\nonBeforeMount(async () => {\r\n    formState.bookName = router.currentRoute.value.query.bookname?.toString()\r\n    formState.isbn = router.currentRoute.value.query.isbn?.toString()\r\n    formState.id = router.currentRoute.value.query.id?.toString()\r\n    loading.value = false\r\n    reloadPage.value = true\r\n    await axios.get('http://localhost:3000/showborrowlist?userId=' + store.state.user._id).then(async (res) => {\r\n        if (res) {\r\n            const tempList = []\r\n            for (let i = 0; i < res.data.records.length; i++) {\r\n                if (res.data.records[i].status === 0) {\r\n                    tempList.push(res.data.records[i])\r\n                }\r\n            }\r\n            for (let i = 0; i < tempList.length; i++) {\r\n                //当前日期=归还日期+1 更改状态 为已逾期 \r\n                if (dayjs(tempList[i].backAt).isBefore(dayjs())) {\r\n                    await axios.post('http://localhost:3000/updateborrow', { record: tempList[i] })\r\n                }\r\n            }\r\n            updateBorrow('init')\r\n        }\r\n    }).finally(() => {\r\n        reloadPage.value = false\r\n    })\r\n\r\n})\r\n\r\nconst refresh = () => {\r\n    try {\r\n        loading.value = true\r\n        setTimeout(async () => {\r\n            const { data } = await axios.get('http://localhost:3000/showborrowlist?userId=' + store.state.user._id)\r\n            const tempList = []\r\n            for (let i = 0; i < data.records.length; i++) {\r\n                if (data.records[i].status === 0) {\r\n                    tempList.push(data.records[i])\r\n                }\r\n            }\r\n            for (let i = 0; i < tempList.length; i++) {\r\n                console.log('test1', data.records[i].status)\r\n                //当前日期=归还日期+1 更改状态 为已逾期 \r\n                if (dayjs(tempList[i].backAt).isBefore(dayjs())) {\r\n                    await axios.post('http://localhost:3000/updateborrow', { record: tempList[i] })\r\n                }\r\n            }\r\n\r\n            updateBorrow('init')\r\n            loading.value = false\r\n        }, 1000)\r\n\r\n    } catch (error) {\r\n        console.log(error)\r\n    }\r\n}\r\n\r\n\r\nconst columns = [\r\n    {\r\n        title: '书名',\r\n        dataIndex: 'bookname',\r\n        width: 150,\r\n    },\r\n    {\r\n        title: 'ISBN',\r\n        dataIndex: 'isbn',\r\n        width: 150,\r\n    },\r\n    {\r\n        title: '借阅人',\r\n        dataIndex: 'bperson',\r\n        width: 100,\r\n    },\r\n    {\r\n        title: '借阅日期',\r\n        dataIndex: 'borrowtime',\r\n        width: 150,\r\n    },\r\n    {\r\n        title: '还书日期',\r\n        dataIndex: 'backtime',\r\n        width: 150,\r\n    },\r\n    {\r\n        title: '状态',\r\n        dataIndex: 'status',\r\n        width: 100,\r\n    },\r\n\r\n];\r\n\r\n\r\nconst onSubmit = async (type: string) => {\r\n    console.log('ffff',formState)\r\n    btnVisibile.value=true\r\n    if (type === '借阅') {\r\n        try {\r\n            if (isExist(formState.id, undefined)) {\r\n                message.error('这本书你已经预约或借过了', 1.5)\r\n                btnVisibile.value=false\r\n            } else {\r\n                let record\r\n                if (router.currentRoute.value.query.id) {\r\n                    record = {\r\n                        book: router.currentRoute.value.query.id,\r\n                        backAt: formRef.value.getFieldsValue().date1.$d,\r\n                        isbn: formState.isbn,\r\n                        user: store.state.user._id\r\n                    }\r\n                    console.log('record:', record)\r\n                    await axios.post('http://localhost:3000/addborrow', { record, haveId: true })\r\n                    updateBorrow('update')\r\n                } else {\r\n                    record = {\r\n                        backAt: formRef.value.getFieldsValue().date1.$d,\r\n                        isbn: formState.isbn,\r\n                        user: store.state.user._id\r\n                    }\r\n                    const { data } = await axios.get('http://localhost:3000/showborrowlist?userId=' + store.state.user._id)\r\n                    let flag\r\n                    data.records.forEach((item: any) => {\r\n\r\n                        if (item.book.isbn.toString() === formState.isbn && (item.status === 0 || item.status === 2)) {\r\n                            flag = true\r\n                        } else {\r\n                            flag = false\r\n                        }\r\n\r\n                    })\r\n\r\n                    if (flag) {\r\n                        message.error('这本书你已经预约或借过了', 1.0)\r\n                        btnVisibile.value=false\r\n                    } else {\r\n                        await axios.post('http://localhost:3000/addborrow', { record, haveId: false })\r\n                        updateBorrow('update')\r\n                    }\r\n                }\r\n\r\n            }\r\n        } catch (error) {\r\n            console.log('error', error)\r\n            message.error('请检查所填信息是否正确', 1.5)\r\n        }\r\n    } else if (type === '还书') {\r\n        if (isExist(undefined, formState.isbn)) {\r\n            const record = {\r\n                isbn: formState.isbn,\r\n                user: store.state.user._id,\r\n                status: 1\r\n            }\r\n            const { data } = await axios.post('http://localhost:3000/addback', { record })\r\n            updateBorrow('back')\r\n        } else {\r\n            message.error('未查到借阅信息', 1.0)\r\n        }\r\n    }\r\n\r\n};\r\n\r\nconst backBookReset = (e: string) => {\r\n    console.log('e', typeof e)\r\n    if (e === '2') {\r\n        formRef.value.resetFields();\r\n        formState.bookName = ''\r\n        formState.isbn = ''\r\n    } else {\r\n        formState.isbn = router.currentRoute.value.query.isbn?.toString() || \"\"\r\n        formState.bookName = router.currentRoute.value.query.bookname?.toString() || \"\"\r\n    }\r\n\r\n}\r\nconst resetForm = () => {\r\n    console.log('重置了')\r\n    formRef.value.resetFields();\r\n    formState.bookName = ''\r\n    formState.isbn = ''\r\n};\r\nconst onBack = (key: number) => {\r\n    console.log('key', key)\r\n}\r\nconst btnVisibile=ref(false)\r\nconst updateBorrow = async (action: string) => {\r\n    try {\r\n       \r\n        const { data } = await axios.get('http://localhost:3000/showborrowlist?userId=' + store.state.user._id)\r\n        if (action === 'init') {\r\n            console.log('status', statusList.value[0])\r\n            tabData.value = [...data.records].map((item, index) => ({\r\n                key: index,\r\n                id: item.book._id,\r\n                bookname: item.book.bookname,\r\n                isbn: item.book.isbn,\r\n                bperson: item.user.username,\r\n                borrowtime: dayjs(item.createdAt).format('YYYY-MM-DD'),\r\n                backtime: dayjs(item.backAt).format('YYYY-MM-DD'),\r\n                status: statusList.value[item.status]\r\n            }));\r\n            btnVisibile.value=false\r\n        } else if (action === 'update') {\r\n            message\r\n                .loading('loading..', 1.5)\r\n                .then(\r\n                    () => message.success('预约成功', 1.0)\r\n                ).then(() => {\r\n                    router.push('/borrow')\r\n                    tabData.value = [...data.records].map((item, index) => ({\r\n                        key: index,\r\n                        bookname: item.book.bookname,\r\n                        isbn: item.book.isbn,\r\n                        bperson: item.user.username,\r\n                        borrowtime: dayjs(item.createdAt).format('YYYY-MM-DD'),\r\n                        backtime: dayjs(item.backAt).format('YYYY-MM-DD'),\r\n                        status: statusList.value[item.status]\r\n                    }));\r\n                    resetForm()\r\n                    btnVisibile.value=false\r\n                })\r\n        } else if (action === 'back') {\r\n            message\r\n                .loading('loading..', 1.5)\r\n                .then(\r\n                    () => message.success('归还成功', 1.0)\r\n                ).then(() => {\r\n                    tabData.value = [...data.records].map((item, index) => ({\r\n                        key: index,\r\n                        bookname: item.book.bookname,\r\n                        isbn: item.book.isbn,\r\n                        bperson: item.user.username,\r\n                        borrowtime: dayjs(item.createdAt).format('YYYY-MM-DD'),\r\n                        backtime: dayjs(item.backAt).format('YYYY-MM-DD'),\r\n                        status: statusList.value[item.status]\r\n                    }));\r\n                    btnVisibile.value=false\r\n                })\r\n        }\r\n\r\n    } catch (error) {\r\n        const errors: any = error\r\n        message\r\n            .loading('loading..', 1.0)\r\n            .then(\r\n                () => message.error(errors.response.data.errors[0].msg, 2.0),\r\n            )\r\n    }\r\n\r\n}\r\n\r\nconst isExist = (id: string | undefined, isbn: string | undefined) => {\r\n    console.log('1122', id)\r\n    console.log('22222', tabData.value)\r\n    if (id) {\r\n        for (let i = 0; i < tabData.value.length; i++) {\r\n            if (tabData.value[i].id === id && tabData.value[i].status.status !== '已归还') {\r\n                return true\r\n            }\r\n        }\r\n    } else {\r\n        for (let i = 0; i < tabData.value.length; i++) {\r\n            if (tabData.value[i].isbn.toString() === isbn && tabData.value[i].status.status !== '已归还') {\r\n                return true\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n    return false\r\n\r\n}\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_a_button = _resolveComponent(\"a-button\")!\n  const _component_a_input = _resolveComponent(\"a-input\")!\n  const _component_a_form_item = _resolveComponent(\"a-form-item\")!\n  const _component_a_date_picker = _resolveComponent(\"a-date-picker\")!\n  const _component_a_form = _resolveComponent(\"a-form\")!\n  const _component_a_tab_pane = _resolveComponent(\"a-tab-pane\")!\n  const _component_a_tabs = _resolveComponent(\"a-tabs\")!\n  const _component_a_spin = _resolveComponent(\"a-spin\")!\n  const _component_a_tag = _resolveComponent(\"a-tag\")!\n  const _component_a_table = _resolveComponent(\"a-table\")!\n  const _component_a_float_button = _resolveComponent(\"a-float-button\")!\n  const _component_a_float_button_group = _resolveComponent(\"a-float-button-group\")!\n\n  return (reloadPage.value)\n    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        _createVNode(ReloadPage, { style: {\"display\":\"flex\",\"justify-content\":\"center\",\"align-items\":\"center\"} })\n      ]))\n    : (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n        _createVNode(TopMenu, {\n          onEnterFullscreen: enterFullscreen,\n          onExitFullscreen: exitFullscreen,\n          onReload: reload\n        }),\n        _createElementVNode(\"div\", _hoisted_3, [\n          _createVNode(SideBar, { url: '/borrow' }),\n          _createElementVNode(\"div\", _hoisted_4, [\n            (btnVisibile.value)\n              ? (_openBlock(), _createElementBlock(\"div\", {\n                  key: 0,\n                  class: \"overlay\",\n                  onClick: _cache[0] || (_cache[0] = _withModifiers(() => {}, [\"stop\"]))\n                }))\n              : _createCommentVNode(\"\", true),\n            (preview.value)\n              ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [\n                  _createVNode(_component_a_button, {\n                    type: \"primary\",\n                    style: {\"position\":\"absolute\",\"left\":\"42.5%\",\"top\":\"13%\",\"z-index\":\"999\"},\n                    onClick: _cache[1] || (_cache[1] = ($event: any) => (previewBook(formState.id))),\n                    disabled: !(formState.bookName && formState.isbn && formState.date1)\n                  }, {\n                    default: _withCtx(() => [\n                      _createTextVNode(\"在线预览\")\n                    ]),\n                    _: 1\n                  }, 8, [\"disabled\"]),\n                  _createVNode(_component_a_tabs, {\n                    activeKey: activeKey.value,\n                    \"onUpdate:activeKey\": _cache[6] || (_cache[6] = ($event: any) => ((activeKey).value = $event)),\n                    type: \"card\",\n                    onChange: backBookReset\n                  }, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_a_tab_pane, {\n                        key: \"1\",\n                        tab: \"预约图书\",\n                        style: {\"width\":\"50%\"}\n                      }, {\n                        default: _withCtx(() => [\n                          _createVNode(_component_a_form, {\n                            style: {\"width\":\"100%\",\"height\":\"50%\",\"margin\":\"50% 0 0 50%\"},\n                            ref_key: \"formRef\",\n                            ref: formRef,\n                            model: formState,\n                            \"label-col\": labelCol,\n                            \"wrapper-col\": wrapperCol\n                          }, {\n                            default: _withCtx(() => [\n                              _createVNode(_component_a_form_item, {\n                                ref: \"bookName\",\n                                label: \"书名：\",\n                                name: \"bookName\"\n                              }, {\n                                default: _withCtx(() => [\n                                  _createVNode(_component_a_input, {\n                                    value: formState.bookName,\n                                    \"onUpdate:value\": _cache[2] || (_cache[2] = ($event: any) => ((formState.bookName) = $event))\n                                  }, null, 8, [\"value\"])\n                                ]),\n                                _: 1\n                              }, 512),\n                              _createVNode(_component_a_form_item, {\n                                ref: \"isbn\",\n                                label: \"ISBN：\",\n                                name: \"isbn\"\n                              }, {\n                                default: _withCtx(() => [\n                                  _createVNode(_component_a_input, {\n                                    value: formState.isbn,\n                                    \"onUpdate:value\": _cache[3] || (_cache[3] = ($event: any) => ((formState.isbn) = $event))\n                                  }, null, 8, [\"value\"])\n                                ]),\n                                _: 1\n                              }, 512),\n                              _createVNode(_component_a_form_item, {\n                                label: \"还书日期：\",\n                                name: \"date1\"\n                              }, {\n                                default: _withCtx(() => [\n                                  _createVNode(_component_a_date_picker, {\n                                    value: formState.date1,\n                                    \"onUpdate:value\": _cache[4] || (_cache[4] = ($event: any) => ((formState.date1) = $event)),\n                                    type: \"date\",\n                                    placeholder: \"Pick a date\",\n                                    style: {\"width\":\"100%\"}\n                                  }, null, 8, [\"value\"])\n                                ]),\n                                _: 1\n                              }),\n                              _createVNode(_component_a_form_item, { \"wrapper-col\": { span: 14, offset: 8 } }, {\n                                default: _withCtx(() => [\n                                  _createVNode(_component_a_button, {\n                                    type: \"primary\",\n                                    disabled: !(formState.bookName && formState.isbn && formState.date1),\n                                    onClick: _cache[5] || (_cache[5] = ($event: any) => (onSubmit('借阅')))\n                                  }, {\n                                    default: _withCtx(() => [\n                                      _createTextVNode(\"预约\")\n                                    ]),\n                                    _: 1\n                                  }, 8, [\"disabled\"]),\n                                  _createVNode(_component_a_button, {\n                                    style: {\"margin-left\":\"50px\"},\n                                    onClick: resetForm\n                                  }, {\n                                    default: _withCtx(() => [\n                                      _createTextVNode(\"重置\")\n                                    ]),\n                                    _: 1\n                                  })\n                                ]),\n                                _: 1\n                              })\n                            ]),\n                            _: 1\n                          }, 8, [\"model\"])\n                        ]),\n                        _: 1\n                      })\n                    ]),\n                    _: 1\n                  }, 8, [\"activeKey\"])\n                ]))\n              : (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [\n                  _withDirectives(_createVNode(_component_a_spin, { style: {\"position\":\"absolute\",\"top\":\"50%\",\"left\":\"30%\",\"z-index\":\"9999\"} }, null, 512), [\n                    [_vShow, previewLoading.value]\n                  ]),\n                  _createVNode(_component_a_button, {\n                    type: \"primary\",\n                    style: {\"position\":\"absolute\",\"left\":\"42.5%\",\"top\":\"13%\",\"z-index\":\"999\"},\n                    onClick: _cache[7] || (_cache[7] = ($event: any) => (preview.value = true))\n                  }, {\n                    default: _withCtx(() => [\n                      _createTextVNode(\"返回\")\n                    ]),\n                    _: 1\n                  }),\n                  _withDirectives(_createElementVNode(\"div\", _hoisted_7, [\n                    _createElementVNode(\"div\", _hoisted_8, [\n                      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(previewList.value, (pre, index) => {\n                        return (_openBlock(), _createElementBlock(\"div\", {\n                          key: index,\n                          style: {\"width\":\"100%\"}\n                        }, [\n                          _createElementVNode(\"img\", {\n                            src: pre,\n                            style: {\"width\":\"91%\"}\n                          }, null, 8, _hoisted_9)\n                        ]))\n                      }), 128))\n                    ])\n                  ], 512), [\n                    [_vShow, !previewLoading.value]\n                  ])\n                ]))\n          ]),\n          _createElementVNode(\"div\", _hoisted_10, [\n            _createVNode(_component_a_table, {\n              columns: columns,\n              \"data-source\": _unref(tabData),\n              pagination: { hideOnSinglePage: true, pageSize: 50 },\n              scroll: { y: 700 },\n              loading: loading.value\n            }, {\n              bodyCell: _withCtx(({ text, column, record }) => [\n                (column.dataIndex === 'bookname')\n                  ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                      _createTextVNode(_toDisplayString(text), 1)\n                    ], 64))\n                  : (column.dataIndex === 'status')\n                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_11, [\n                        _createVNode(_component_a_tag, {\n                          color: record.status.color\n                        }, {\n                          default: _withCtx(() => [\n                            _createTextVNode(_toDisplayString(record.status.status), 1)\n                          ]),\n                          _: 2\n                        }, 1032, [\"color\"])\n                      ]))\n                    : _createCommentVNode(\"\", true)\n              ]),\n              _: 1\n            }, 8, [\"data-source\", \"loading\"])\n          ])\n        ]),\n        _createVNode(_component_a_float_button_group, {\n          trigger: \"hover\",\n          type: \"primary\",\n          style: { right: '380px', bottom: '30px' }\n        }, {\n          icon: _withCtx(() => [\n            _createVNode(_unref(UnorderedListOutlined))\n          ]),\n          default: _withCtx(() => [\n            _createVNode(_component_a_float_button, { onClick: refresh }, {\n              icon: _withCtx(() => [\n                _createVNode(_unref(RedoOutlined))\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ]))\n}\n}\n\n})","<template>\r\n    <div v-if=\"reloadPage\" style=\"width: 100vw;height: 100vh;\">\r\n        <ReloadPage style=\"display: flex;justify-content: center;align-items: center;\"></ReloadPage>\r\n    </div>\r\n    <div v-else class=\"borrow-page\">\r\n        <TopMenu @enterFullscreen=\"enterFullscreen\" @exitFullscreen=\"exitFullscreen\" @reload=\"reload\"></TopMenu>\r\n        <div class=\"main-content\">\r\n            <SideBar :url=\"'/borrow'\"></SideBar>\r\n\r\n            <div class=\"borrowform\">\r\n                <div v-if=\"btnVisibile\" class=\"overlay\" @click.stop></div>\r\n                <div class=\"card-container\" v-if=\"preview\">\r\n                    <a-button type=\"primary\" style=\"position: absolute;left: 42.5%;top: 13%;z-index: 999\"\r\n                        @click=\"previewBook(formState.id)\"\r\n                        :disabled=\"!(formState.bookName && formState.isbn && formState.date1)\">在线预览</a-button>\r\n                    <a-tabs v-model:activeKey=\"activeKey\" type=\"card\" @change=\"backBookReset\">\r\n                        <a-tab-pane key=\"1\" tab=\"预约图书\" style=\"width: 50%;\">\r\n                            <a-form style=\"width: 100%;height: 50%;margin:50% 0 0 50%;\" ref=\"formRef\" :model=\"formState\"\r\n                                :label-col=\"labelCol\" :wrapper-col=\"wrapperCol\">\r\n                                <a-form-item ref=\"bookName\" label=\"书名：\" name=\"bookName\">\r\n                                    <a-input v-model:value=\"formState.bookName\" />\r\n                                </a-form-item>\r\n                                <a-form-item ref=\"isbn\" label=\"ISBN：\" name=\"isbn\">\r\n                                    <a-input v-model:value=\"formState.isbn\" />\r\n                                </a-form-item>\r\n\r\n                                <a-form-item label=\"还书日期：\" name=\"date1\">\r\n                                    <a-date-picker v-model:value=\"formState.date1\" type=\"date\" placeholder=\"Pick a date\"\r\n                                        style=\"width: 100%\" />\r\n\r\n                                </a-form-item>\r\n                                <a-form-item :wrapper-col=\"{ span: 14, offset: 8 }\">\r\n                                    <a-button type=\"primary\" :disabled=\"!(formState.bookName && formState.isbn && formState.date1)\" @click=\"onSubmit('借阅')\">预约</a-button>\r\n                                    <a-button style=\"margin-left: 50px\" @click=\"resetForm\">重置</a-button>\r\n\r\n                                </a-form-item>\r\n                            </a-form>\r\n\r\n                        </a-tab-pane>\r\n                        <!-- <a-tab-pane key=\"2\" tab=\"还书\" style=\"width: 50%;\">\r\n                            <a-form style=\"width: 100%;height: 50%;margin:50% 0 0 50%;\" ref=\"formRef\" :model=\"formState\"\r\n                                :label-col=\"labelCol\" :wrapper-col=\"wrapperCol\">\r\n                                <a-form-item ref=\"bookName\" label=\"书名：\" name=\"bookName\">\r\n                                    <a-input v-model:value=\"formState.bookName\" />\r\n                                </a-form-item>\r\n                                <a-form-item ref=\"isbn\" label=\"ISBN：\" name=\"isbn\">\r\n                                    <a-input v-model:value=\"formState.isbn\" />\r\n                                </a-form-item>\r\n                                <a-form-item :wrapper-col=\"{ span: 14, offset: 8 }\">\r\n                                    <a-button type=\"primary\" @click=\"onSubmit('还书')\">还书</a-button>\r\n                                    <a-button style=\"margin-left: 50px\" @click=\"resetForm\">重置</a-button>\r\n                                </a-form-item>\r\n                            </a-form>\r\n                        </a-tab-pane> -->\r\n\r\n                    </a-tabs>\r\n                </div>\r\n                <div class=\"card-container\" v-else>\r\n                    <a-spin style=\"position: absolute;top: 50%;left: 30%;z-index: 9999;\"\r\n                        v-show=\"previewLoading\"></a-spin>\r\n                    <a-button type=\"primary\" style=\"position: absolute;left: 42.5%;top: 13%;z-index: 999\"\r\n                        @click=\"preview = true\">返回</a-button>\r\n                    <div class=\"scroll-container\" v-show=\"!previewLoading\">\r\n                        <div class=\"scroll-content\">\r\n                            <div v-for=\"(pre, index) in previewList\" :key=\"index\" style=\"width: 100%;\">\r\n                                <img :src=\"pre\" style=\"width: 91%;\" />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"borrow-table\">\r\n                <a-table :columns=\"columns\" :data-source=\"tabData\"\r\n                    :pagination=\"{ hideOnSinglePage: true, pageSize: 50 }\" :scroll=\"{ y: 700 }\" :loading=\"loading\">\r\n                    <template #bodyCell=\"{ text, column, record }\">\r\n                        <template v-if=\"column.dataIndex === 'bookname'\">\r\n                            {{ text }}\r\n                        </template>\r\n                        <template v-else-if=\"column.dataIndex === 'status'\">\r\n                            <span>\r\n                                <a-tag :color=\"record.status.color\">\r\n                                    {{ record.status.status }}\r\n                                </a-tag>\r\n                            </span>\r\n                        </template>\r\n                    </template>\r\n\r\n                </a-table>\r\n            </div>\r\n\r\n        </div>\r\n        <a-float-button-group trigger=\"hover\" type=\"primary\" :style=\"{ right: '380px', bottom: '30px' }\">\r\n\r\n            <template #icon>\r\n                <UnorderedListOutlined />\r\n            </template>\r\n            <a-float-button @click=\"refresh\">\r\n\r\n                <template #icon>\r\n                    <RedoOutlined />\r\n                </template>\r\n            </a-float-button>\r\n        </a-float-button-group>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\n\r\nimport SideBar from '../components/SideBar.vue';\r\nimport TopMenu from '../components/TopMenu.vue';\r\nimport { onBeforeMount } from 'vue';\r\nimport { Dayjs } from 'dayjs';\r\nimport dayjs from 'dayjs';\r\nimport { reactive, ref, toRaw } from 'vue';\r\nimport type { UnwrapRef } from 'vue';\r\nimport { useRouter } from 'vue-router'\r\nimport axios from 'axios';\r\nimport { useStore } from 'vuex';\r\nimport { message } from 'ant-design-vue';\r\nimport { UnorderedListOutlined, RedoOutlined } from '@ant-design/icons-vue';\r\nimport ReloadPage from '../components/reloadPage.vue'\r\ninterface FormState {\r\n    bookName: string | undefined;\r\n    date1: Dayjs | undefined;\r\n    isbn: string | undefined;\r\n    id: string | undefined;\r\n}\r\ninterface TabData {\r\n    key: number,\r\n    bookname: string | undefined,\r\n    isbn: string | undefined,\r\n    bperson: string | undefined,\r\n    borrowtime: Date | undefined,\r\n    backtime: Date | undefined,\r\n    status: number\r\n}\r\nconst store = useStore()\r\nconst formRef = ref();\r\nconst preview = ref(true)\r\nconst previewLoading = ref(true)\r\n\r\nconst previewList = ref([])\r\nconst previewBook = async (bookId: string | undefined) => {\r\n    console.log('bookid', bookId)\r\n    preview.value = false\r\n    setTimeout(async () => {\r\n        previewLoading.value=false\r\n        if (bookId) {\r\n            await axios.get('http://localhost:3000/getbookprebyid?bookId=' + bookId).then((res) => {\r\n                if (res.status === 200) {\r\n                    previewList.value = JSON.parse(res.data.preview.replace(/'/g, '\"'))\r\n                }\r\n            })\r\n        } else {\r\n            await axios.get('http://localhost:3000/getbookprebyisbn?isbn=' + formState.isbn).then((res) => {\r\n                if (res.status === 200) {\r\n                    previewList.value = JSON.parse(res.data.preview.replace(/'/g, '\"'))\r\n                }\r\n            })\r\n        }\r\n    }, 1000)\r\n\r\n\r\n}\r\n\r\n\r\nconst labelCol = { span: 7 };\r\nconst wrapperCol = { span: 15 };\r\nconst activeKey = ref('1');\r\nconst formState: UnwrapRef<FormState> = reactive({\r\n    bookName: '',\r\n    date1: undefined,\r\n    isbn: '',\r\n    id: ''\r\n});\r\nlet statusList: any = ref([\r\n    {\r\n        status: '已预约',\r\n        color: 'green'\r\n    },\r\n    {\r\n        status: '已归还',\r\n        color: 'geekblue'\r\n    },\r\n    {\r\n        status: '已逾期',\r\n        color: 'volcano'\r\n    },\r\n    {\r\n        status: '借阅中',\r\n        color: 'cyan'\r\n    }\r\n\r\n])\r\n\r\nconst enterFullscreen = () => {\r\n    const element = document.documentElement; // 全屏元素，这里使用整个文档根元素\r\n    if (element.requestFullscreen) {\r\n        element.requestFullscreen();\r\n    } else if (element.mozRequestFullScreen) { // Firefox\r\n        element.mozRequestFullScreen();\r\n    } else if (element.webkitRequestFullscreen) { // Chrome, Safari and Opera\r\n        element.webkitRequestFullscreen();\r\n    } else if (element.msRequestFullscreen) { // IE/Edge\r\n        element.msRequestFullscreen();\r\n    }\r\n\r\n}\r\n\r\nconst exitFullscreen = () => {\r\n    if (document.exitFullscreen) {\r\n        document.exitFullscreen();\r\n    } else if (document.mozCancelFullScreen) { // Firefox\r\n        document.mozCancelFullScreen();\r\n    } else if (document.webkitExitFullscreen) { // Chrome, Safari and Opera\r\n        document.webkitExitFullscreen();\r\n    } else if (document.msExitFullscreen) { // IE/Edge\r\n        document.msExitFullscreen();\r\n    }\r\n\r\n}\r\nconst reloadPage = ref<boolean>(false)\r\nconst reload = async () => {\r\n    try {\r\n        reloadPage.value = true\r\n        await axios.get('http://localhost:3000/showborrowlist?userId=' + store.state.user._id).then(async (res) => {\r\n            if (res) {\r\n                const tempList = []\r\n                for (let i = 0; i < res.data.records.length; i++) {\r\n                    if (res.data.records[i].status === 0) {\r\n                        tempList.push(res.data.records[i])\r\n                    }\r\n                }\r\n                for (let i = 0; i < tempList.length; i++) {\r\n                    //当前日期=归还日期+1 更改状态 为已逾期 \r\n                    if (dayjs(tempList[i].backAt).isBefore(dayjs())) {\r\n                        await axios.post('http://localhost:3000/updateborrow', { record: tempList[i] })\r\n                    }\r\n                }\r\n                updateBorrow('init')\r\n            }\r\n        }).finally(() => {\r\n            reloadPage.value = false\r\n        })\r\n\r\n    } catch (error) {\r\n        console.log(error)\r\n    }\r\n}\r\n\r\n\r\nconst router = useRouter()\r\nlet tabData: any = ref([])\r\nconst loading = ref<boolean>(true)\r\nonBeforeMount(async () => {\r\n    formState.bookName = router.currentRoute.value.query.bookname?.toString()\r\n    formState.isbn = router.currentRoute.value.query.isbn?.toString()\r\n    formState.id = router.currentRoute.value.query.id?.toString()\r\n    loading.value = false\r\n    reloadPage.value = true\r\n    await axios.get('http://localhost:3000/showborrowlist?userId=' + store.state.user._id).then(async (res) => {\r\n        if (res) {\r\n            const tempList = []\r\n            for (let i = 0; i < res.data.records.length; i++) {\r\n                if (res.data.records[i].status === 0) {\r\n                    tempList.push(res.data.records[i])\r\n                }\r\n            }\r\n            for (let i = 0; i < tempList.length; i++) {\r\n                //当前日期=归还日期+1 更改状态 为已逾期 \r\n                if (dayjs(tempList[i].backAt).isBefore(dayjs())) {\r\n                    await axios.post('http://localhost:3000/updateborrow', { record: tempList[i] })\r\n                }\r\n            }\r\n            updateBorrow('init')\r\n        }\r\n    }).finally(() => {\r\n        reloadPage.value = false\r\n    })\r\n\r\n})\r\n\r\nconst refresh = () => {\r\n    try {\r\n        loading.value = true\r\n        setTimeout(async () => {\r\n            const { data } = await axios.get('http://localhost:3000/showborrowlist?userId=' + store.state.user._id)\r\n            const tempList = []\r\n            for (let i = 0; i < data.records.length; i++) {\r\n                if (data.records[i].status === 0) {\r\n                    tempList.push(data.records[i])\r\n                }\r\n            }\r\n            for (let i = 0; i < tempList.length; i++) {\r\n                console.log('test1', data.records[i].status)\r\n                //当前日期=归还日期+1 更改状态 为已逾期 \r\n                if (dayjs(tempList[i].backAt).isBefore(dayjs())) {\r\n                    await axios.post('http://localhost:3000/updateborrow', { record: tempList[i] })\r\n                }\r\n            }\r\n\r\n            updateBorrow('init')\r\n            loading.value = false\r\n        }, 1000)\r\n\r\n    } catch (error) {\r\n        console.log(error)\r\n    }\r\n}\r\n\r\n\r\nconst columns = [\r\n    {\r\n        title: '书名',\r\n        dataIndex: 'bookname',\r\n        width: 150,\r\n    },\r\n    {\r\n        title: 'ISBN',\r\n        dataIndex: 'isbn',\r\n        width: 150,\r\n    },\r\n    {\r\n        title: '借阅人',\r\n        dataIndex: 'bperson',\r\n        width: 100,\r\n    },\r\n    {\r\n        title: '借阅日期',\r\n        dataIndex: 'borrowtime',\r\n        width: 150,\r\n    },\r\n    {\r\n        title: '还书日期',\r\n        dataIndex: 'backtime',\r\n        width: 150,\r\n    },\r\n    {\r\n        title: '状态',\r\n        dataIndex: 'status',\r\n        width: 100,\r\n    },\r\n\r\n];\r\n\r\n\r\nconst onSubmit = async (type: string) => {\r\n    console.log('ffff',formState)\r\n    btnVisibile.value=true\r\n    if (type === '借阅') {\r\n        try {\r\n            if (isExist(formState.id, undefined)) {\r\n                message.error('这本书你已经预约或借过了', 1.5)\r\n                btnVisibile.value=false\r\n            } else {\r\n                let record\r\n                if (router.currentRoute.value.query.id) {\r\n                    record = {\r\n                        book: router.currentRoute.value.query.id,\r\n                        backAt: formRef.value.getFieldsValue().date1.$d,\r\n                        isbn: formState.isbn,\r\n                        user: store.state.user._id\r\n                    }\r\n                    console.log('record:', record)\r\n                    await axios.post('http://localhost:3000/addborrow', { record, haveId: true })\r\n                    updateBorrow('update')\r\n                } else {\r\n                    record = {\r\n                        backAt: formRef.value.getFieldsValue().date1.$d,\r\n                        isbn: formState.isbn,\r\n                        user: store.state.user._id\r\n                    }\r\n                    const { data } = await axios.get('http://localhost:3000/showborrowlist?userId=' + store.state.user._id)\r\n                    let flag\r\n                    data.records.forEach((item: any) => {\r\n\r\n                        if (item.book.isbn.toString() === formState.isbn && (item.status === 0 || item.status === 2)) {\r\n                            flag = true\r\n                        } else {\r\n                            flag = false\r\n                        }\r\n\r\n                    })\r\n\r\n                    if (flag) {\r\n                        message.error('这本书你已经预约或借过了', 1.0)\r\n                        btnVisibile.value=false\r\n                    } else {\r\n                        await axios.post('http://localhost:3000/addborrow', { record, haveId: false })\r\n                        updateBorrow('update')\r\n                    }\r\n                }\r\n\r\n            }\r\n        } catch (error) {\r\n            console.log('error', error)\r\n            message.error('请检查所填信息是否正确', 1.5)\r\n        }\r\n    } else if (type === '还书') {\r\n        if (isExist(undefined, formState.isbn)) {\r\n            const record = {\r\n                isbn: formState.isbn,\r\n                user: store.state.user._id,\r\n                status: 1\r\n            }\r\n            const { data } = await axios.post('http://localhost:3000/addback', { record })\r\n            updateBorrow('back')\r\n        } else {\r\n            message.error('未查到借阅信息', 1.0)\r\n        }\r\n    }\r\n\r\n};\r\n\r\nconst backBookReset = (e: string) => {\r\n    console.log('e', typeof e)\r\n    if (e === '2') {\r\n        formRef.value.resetFields();\r\n        formState.bookName = ''\r\n        formState.isbn = ''\r\n    } else {\r\n        formState.isbn = router.currentRoute.value.query.isbn?.toString() || \"\"\r\n        formState.bookName = router.currentRoute.value.query.bookname?.toString() || \"\"\r\n    }\r\n\r\n}\r\nconst resetForm = () => {\r\n    console.log('重置了')\r\n    formRef.value.resetFields();\r\n    formState.bookName = ''\r\n    formState.isbn = ''\r\n};\r\nconst onBack = (key: number) => {\r\n    console.log('key', key)\r\n}\r\nconst btnVisibile=ref(false)\r\nconst updateBorrow = async (action: string) => {\r\n    try {\r\n       \r\n        const { data } = await axios.get('http://localhost:3000/showborrowlist?userId=' + store.state.user._id)\r\n        if (action === 'init') {\r\n            console.log('status', statusList.value[0])\r\n            tabData.value = [...data.records].map((item, index) => ({\r\n                key: index,\r\n                id: item.book._id,\r\n                bookname: item.book.bookname,\r\n                isbn: item.book.isbn,\r\n                bperson: item.user.username,\r\n                borrowtime: dayjs(item.createdAt).format('YYYY-MM-DD'),\r\n                backtime: dayjs(item.backAt).format('YYYY-MM-DD'),\r\n                status: statusList.value[item.status]\r\n            }));\r\n            btnVisibile.value=false\r\n        } else if (action === 'update') {\r\n            message\r\n                .loading('loading..', 1.5)\r\n                .then(\r\n                    () => message.success('预约成功', 1.0)\r\n                ).then(() => {\r\n                    router.push('/borrow')\r\n                    tabData.value = [...data.records].map((item, index) => ({\r\n                        key: index,\r\n                        bookname: item.book.bookname,\r\n                        isbn: item.book.isbn,\r\n                        bperson: item.user.username,\r\n                        borrowtime: dayjs(item.createdAt).format('YYYY-MM-DD'),\r\n                        backtime: dayjs(item.backAt).format('YYYY-MM-DD'),\r\n                        status: statusList.value[item.status]\r\n                    }));\r\n                    resetForm()\r\n                    btnVisibile.value=false\r\n                })\r\n        } else if (action === 'back') {\r\n            message\r\n                .loading('loading..', 1.5)\r\n                .then(\r\n                    () => message.success('归还成功', 1.0)\r\n                ).then(() => {\r\n                    tabData.value = [...data.records].map((item, index) => ({\r\n                        key: index,\r\n                        bookname: item.book.bookname,\r\n                        isbn: item.book.isbn,\r\n                        bperson: item.user.username,\r\n                        borrowtime: dayjs(item.createdAt).format('YYYY-MM-DD'),\r\n                        backtime: dayjs(item.backAt).format('YYYY-MM-DD'),\r\n                        status: statusList.value[item.status]\r\n                    }));\r\n                    btnVisibile.value=false\r\n                })\r\n        }\r\n\r\n    } catch (error) {\r\n        const errors: any = error\r\n        message\r\n            .loading('loading..', 1.0)\r\n            .then(\r\n                () => message.error(errors.response.data.errors[0].msg, 2.0),\r\n            )\r\n    }\r\n\r\n}\r\n\r\nconst isExist = (id: string | undefined, isbn: string | undefined) => {\r\n    console.log('1122', id)\r\n    console.log('22222', tabData.value)\r\n    if (id) {\r\n        for (let i = 0; i < tabData.value.length; i++) {\r\n            if (tabData.value[i].id === id && tabData.value[i].status.status !== '已归还') {\r\n                return true\r\n            }\r\n        }\r\n    } else {\r\n        for (let i = 0; i < tabData.value.length; i++) {\r\n            if (tabData.value[i].isbn.toString() === isbn && tabData.value[i].status.status !== '已归还') {\r\n                return true\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n    return false\r\n\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.scroll-container {\r\n    height: 850px;\r\n    /* 设置容器高度 */\r\n    overflow: hidden;\r\n    /* 隐藏原生滚动条 */\r\n    position: relative;\r\n    /* 相对定位 */\r\n}\r\n\r\n.scroll-content {\r\n    height: 100%;\r\n    /* 设置内容高度为容器高度 */\r\n    overflow-y: auto;\r\n    /* 显示内容的垂直滚动条 */\r\n    padding-right: 17px;\r\n    /* 留出滚动条的空间 */\r\n}\r\n\r\n.scroll-content::-webkit-scrollbar {\r\n    width: 0;\r\n    /* 隐藏滚动条 */\r\n}\r\n\r\n.scroll-content::-webkit-scrollbar-track {\r\n    display: none;\r\n    /* 隐藏滚动条轨道 */\r\n}\r\n\r\n.scroll-content::-webkit-scrollbar-thumb {\r\n    display: none;\r\n    /* 隐藏滚动条手柄 */\r\n}\r\n.overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  z-index: 99999;\r\n  background-color: rgba(255, 255, 255, 0.2); /* 半透明黑色背景 */\r\n}\r\n.scroll-content:before {\r\n    content: \"\";\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n    width: 10px;\r\n    /* 模拟滚动条宽度 */\r\n    height: 100%;\r\n    background: #fff;\r\n    /* 模拟滚动条背景色 */\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n.card-container {\r\n    width: 100%;\r\n}\r\n\r\n.card-container>.ant-tabs-card .ant-tabs-content {\r\n    height: 120px;\r\n    margin-top: -16px;\r\n}\r\n\r\n.card-container>.ant-tabs-card .ant-tabs-content>.ant-tabs-tabpane {\r\n    padding: 16px;\r\n    background: #fff;\r\n}\r\n\r\n.card-container>.ant-tabs-card>.ant-tabs-nav::before {\r\n    display: none;\r\n}\r\n\r\n.card-container>.ant-tabs-card .ant-tabs-tab,\r\n[data-theme='compact'] .card-container>.ant-tabs-card .ant-tabs-tab {\r\n    background: transparent;\r\n    border-color: transparent;\r\n}\r\n\r\n.card-container>.ant-tabs-card .ant-tabs-tab-active,\r\n[data-theme='compact'] .card-container>.ant-tabs-card .ant-tabs-tab-active {\r\n    background: #fff;\r\n    border-color: #fff;\r\n}\r\n\r\n#components-tabs-demo-card-top .code-box-demo {\r\n    padding: 24px;\r\n    overflow: hidden;\r\n    background: #f5f5f5;\r\n}\r\n\r\n[data-theme='compact'] .card-container>.ant-tabs-card .ant-tabs-content {\r\n    height: 120px;\r\n    margin-top: -8px;\r\n}\r\n\r\n[data-theme='dark'] .card-container>.ant-tabs-card .ant-tabs-tab {\r\n    background: transparent;\r\n    border-color: transparent;\r\n}\r\n\r\n[data-theme='dark'] #components-tabs-demo-card-top .code-box-demo {\r\n    background: #000;\r\n}\r\n\r\n[data-theme='dark'] .card-container>.ant-tabs-card .ant-tabs-content>.ant-tabs-tabpane {\r\n    background: #141414;\r\n}\r\n\r\n[data-theme='dark'] .card-container>.ant-tabs-card .ant-tabs-tab-active {\r\n    background: #141414;\r\n    border-color: #141414;\r\n}\r\n\r\n.borrow-page {\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n\r\n}\r\n\r\n.borrowform {\r\n    width: 36%;\r\n\r\n    display: flex;\r\n    flex-direction: column;\r\n\r\n    font-size: 40px;\r\n\r\n    background-color: #fff;\r\n    border-radius: 10px;\r\n    margin: 20px;\r\n\r\n    >button {\r\n        border: none;\r\n        border-radius: 4px;\r\n        margin-top: 20px;\r\n        padding: 5px 10px;\r\n        background-color: #1890FF;\r\n        color: white;\r\n        width: 10%;\r\n    }\r\n}\r\n\r\n.borrow-table {\r\n    width: 50%;\r\n\r\n    background-color: #fff;\r\n    border-radius: 10px;\r\n    margin: 20px 20px 20px 0;\r\n}\r\n\r\n.main-content {\r\n    display: flex;\r\n    flex-direction: row;\r\n    background-color: #f0f2f5;\r\n\r\n}\r\n</style>","import script from \"./BorrowBook.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./BorrowBook.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./BorrowBook.vue?vue&type=style&index=0&id=4c2dcc28&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4c2dcc28\"]])\n\nexport default __exports__"],"names":["UnorderedListOutlined","_objectSpread","target","i","arguments","length","source","Object","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","enumerable","forEach","key","_defineProperty","obj","value","defineProperty","configurable","writable","props","context","p","attrs","_createVNode","AntdIcon","UnorderedListOutlinedSvg","displayName","inheritAttrs","_hoisted_1","class","_hoisted_2","_hoisted_3","style","_defineComponent","__name","url","type","String","require","setup","__props","items","ref","id","text","selected","image","bookImage","userImage","borrowImage","noticeImage","onBeforeMount","item","_ctx","_cache","_component_router_link","_resolveComponent","_openBlock","_createElementBlock","_Fragment","_renderList","index","_normalizeClass","to","default","_withCtx","_createElementVNode","selectedfont","src","_toDisplayString","_","__exports__","_withScopeId","n","_pushScopeId","_popScopeId","_imports_0","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_imports_1","_hoisted_9","_imports_2","_hoisted_10","emits","emit","__emit","isFullscreen","noticeData","enterFullscreen","exitFullscreen","reload","store","useStore","fetchNotices","async","data","axios","get","state","user","_id","filteredNotices","notices","notice","status","refreshInterval","setInterval","logout","message","loading","then","localStorage","removeItem","commit","_component_a_tag","_component_a_carousel","autoplay","dots","effect","_unref","color","title","includes","tag","_createTextVNode","content","slice","RedoOutlined","onClick","fontSize","marginRight","_createBlock","FullscreenExitOutlined","FullscreenOutlined","avatar","username","_hoisted_11","formRef","preview","previewLoading","previewList","previewBook","console","log","bookId","setTimeout","res","JSON","parse","replace","formState","isbn","labelCol","span","wrapperCol","activeKey","reactive","bookName","date1","undefined","statusList","element","document","documentElement","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","reloadPage","tempList","records","push","dayjs","backAt","isBefore","post","record","updateBorrow","finally","error","router","useRouter","tabData","currentRoute","query","bookname","toString","refresh","columns","dataIndex","width","onSubmit","btnVisibile","isExist","book","getFieldsValue","$d","haveId","flag","backBookReset","e","resetFields","resetForm","action","map","bperson","borrowtime","createdAt","format","backtime","success","errors","response","msg","_component_a_button","_component_a_input","_component_a_form_item","_component_a_date_picker","_component_a_form","_component_a_tab_pane","_component_a_tabs","_component_a_spin","_component_a_table","_component_a_float_button","_component_a_float_button_group","ReloadPage","TopMenu","onEnterFullscreen","onExitFullscreen","onReload","SideBar","_withModifiers","_createCommentVNode","$event","disabled","onChange","tab","ref_key","model","label","name","placeholder","offset","_withDirectives","_vShow","pre","pagination","hideOnSinglePage","pageSize","scroll","y","bodyCell","column","trigger","right","bottom","icon"],"sourceRoot":""}